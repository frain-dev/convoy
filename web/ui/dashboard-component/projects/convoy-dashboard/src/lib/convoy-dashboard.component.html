<div class="dashboard">
	<div class="dashboard--page">
		<div class="dashboard--page--head">
			<div class="filter without-padding" [ngClass]="{ 'show-calendar': showFilterCalendar }">
				<div class="margin-right__10px">Filter by:</div>

				<div class="dropdown">
					<button
						[ngClass]="{ active: (statsDateRange.value.startDate !== '' && statsDateRange.value.endDate !== '') || selectedEventsDateOption }"
						class="button button__filter button--has-icon icon-left icon-right"
						(click)="showOverlay = true; showDateFilterDropdown = !showDateFilterDropdown"
					>
						<img src="/assets/img/calendar-icon.svg" alt="calender icon" />
						<!-- to be reviewed  -->
						<!-- <span class="color__grey">Date</span>
                        <span class="color__primary" *ngIf="selectedDateOption">: {{ selectedDateOption }}</span> -->
						<mat-date-range-input [formGroup]="statsDateRange" [rangePicker]="statsPicker">
							<input matStartDate formControlName="startDate" placeholder="Start date" />
							<input
								matEndDate
								formControlName="endDate"
								placeholder="End date"
								(dateChange)="selectedDateOption = formatDate(statsDateRange.value.startDate) + ' - ' + formatDate(statsDateRange.value.endDate); fetchDashboardData()"
							/>
						</mat-date-range-input>
						<mat-date-range-picker #statsPicker [disabled]="false"></mat-date-range-picker>
						<img src="/assets/img/angle-arrow-down.svg" alt="arrow down icon" />
					</button>

					<div [ngClass]="{ show: showDateFilterDropdown }" class="dropdown__menu large">
						<ul>
							<li
								[ngClass]="{ active: selectedDateOption == dateOption }"
								*ngFor="let dateOption of dateOptions"
								(click)="getSelectedDate(dateOption); showDateFilterDropdown = false; showOverlay = false"
							>
								From {{ dateOption }}
							</li>
							<li (click)="statsPicker.open(); showDateFilterDropdown = false; showOverlay = false">Custom Option</li>
							<!-- to be reviewed  -->
							<!-- <li class="no-hover flex flex__align-items-center">
                                <button class="button button__primary button__small margin-right__14px" (click)="fetchDashboardData(); showDateFilterDropdown = false">Apply</button>
                                <button class="button__clear" (click)="selectedDateOption = ''; showDateFilterDropdown = false">Clear</button>
                            </li> -->
						</ul>
					</div>
				</div>

				<div class="select">
					<select value="daily" [(ngModel)]="dashboardFrequency" (change)="fetchDashboardData()">
						<option value="daily">Daily</option>
						<option value="weekly">Weekly</option>
						<option value="monthly">Monthly</option>
						<option value="yearly">Yearly</option>
					</select>
				</div>
			</div>

			<ng-container *ngIf="!isCloud">
				<div class="filter without-padding" [ngClass]="{ 'show-calendar': showFilterCalendar }">
					<div>Active Group:</div>
					<div class="select">
						<select [value]="activeGroup" id="groups-dropdown" [(ngModel)]="activeGroup" (change)="toggleActiveGroup()">
							<option [value]="group.uid" *ngFor="let group of groups">{{ group.name }}</option>
						</select>
					</div>
				</div>
			</ng-container>
		</div>

		<div class="dashboard--page--details">
			<div class="card has-title dashboard--page--details--chart has-loader">
				<convoy-loader *ngIf="isloadingDashboardData"></convoy-loader>

				<ul class="metrics">
					<li class="messages">
						<img src="/assets/img/message-icon.svg" alt="message icon" />
						<div class="metric">
							<div>{{ dashboardData.events_sent | metric }}</div>
							<div>Event Sent</div>
						</div>
					</li>
					<li class="apps">
						<img src="/assets/img/apps-icon.svg" alt="apps icon" />
						<div class="metric">
							<div>{{ dashboardData.apps | metric }}</div>
							<div>Apps</div>
						</div>
					</li>
				</ul>

				<div>
					<h3>Events Sent</h3>
					<canvas id="dahboard_events_chart" width="400" height="200"></canvas>
				</div>
			</div>

			<div class="card has-title dashboard--page--details--credentials has-loader">
				<convoy-loader *ngIf="isloadingConfig"></convoy-loader>

				<div class="card--title">
					<h3>Configuration</h3>
				</div>

				<ul class="card--container">
					<li class="list-item">
						<div class="list-item--label">
							Request interval (Seconds)
							<div class="list-item--item">{{ organisationDetails?.strategy?.default?.intervalSeconds }}s</div>
						</div>
					</li>

					<li class="list-item">
						<div class="list-item--label">
							Retry limit
							<div class="list-item--item">{{ organisationDetails?.strategy?.default?.retryLimit }}</div>
						</div>
					</li>

					<li class="list-item">
						<div class="list-item--label">
							Signature header
							<div class="list-item--item">{{ organisationDetails?.signature?.header }}</div>
						</div>
					</li>

					<li class="list-item">
						<div class="list-item--label">
							Signature hash
							<div class="list-item--item">{{ organisationDetails?.signature?.hash }}</div>
						</div>
					</li>
				</ul>
			</div>
		</div>

		<section class="card has-title dashboard--logs">
			<div class="dashboard--logs--tabs">
				<div class="tabs">
					<li *ngFor="let tab of tabs" (click)="toggleActiveTab(tab)">
						<button [ngClass]="{ active: activeTab === tab }">
							<span>{{ tab }}</span>
						</button>
					</li>
				</div>
			</div>
			<div class="dashboard--logs--filter">
				<div [hidden]="activeTab !== 'events'">
					<div class="flex flex__align-items-center flex__justify-between">
						<div class="flex">
							<div class="dropdown">
								<button
									class="button button__filter without-margin button--has-icon icon-left icon-right"
									[ngClass]="{ active: (eventsFilterDateRange.value.startDate !== '' && eventsFilterDateRange.value.endDate !== '') || selectedEventsDateOption }"
									(click)="showEventFilterCalendar = !showEventFilterCalendar; showOverlay = true"
								>
									<img src="/assets/img/calendar-icon.svg" alt="calender icon" />
									<!-- to be reviewed  -->
									<!-- <span class="color__grey">Date</span>
                                    <span class="color__primary" *ngIf="selectedEventsDateOption">: {{ selectedEventsDateOption }}</span> -->
									<mat-date-range-input [formGroup]="eventsFilterDateRange" [rangePicker]="eventsFilterPicker">
										<input matStartDate formControlName="startDate" placeholder="Start date" />
										<input
											matEndDate
											formControlName="endDate"
											placeholder="End date"
											(dateChange)="
												selectedEventsDateOption = formatDate(eventsFilterDateRange.value.startDate) + ' - ' + formatDate(eventsFilterDateRange.value.endDate);
												getEvents({ addToURL: true, fromFilter: true })
											"
										/>
									</mat-date-range-input>
									<mat-date-range-picker #eventsFilterPicker [disabled]="false"></mat-date-range-picker>
									<img src="/assets/img/angle-arrow-down.svg" alt="arrow down icon" />
								</button>
								<div [ngClass]="{ show: showEventFilterCalendar }" class="dropdown__menu large">
									<ul>
										<li
											[ngClass]="{ active: selectedEventsDateOption == dateOption }"
											*ngFor="let dateOption of dateOptions"
											(click)="getSelectedDate(dateOption, activeTab); showEventFilterCalendar = false; showOverlay = false"
										>
											From {{ dateOption }}
										</li>
										<li (click)="eventsFilterPicker.open(); showEventFilterCalendar = false; showOverlay = false">Custom Option</li>
										<!-- to be reviewed  -->
										<!-- <li class="no-hover flex flex__align-items-center">
                                            <button class="button button__primary button__small margin-right__14px" (click)="getEvents({ addToURL: true, fromFilter: true }); showEventFilterCalendar = false">
                                                Apply
                                            </button>
                                            <button class="button__clear" (click)="selectedEventsDateOption = ''; clearEventFilters(activeTab, 'eventsDate'); showEventFilterCalendar = false">Clear</button>
                                        </li> -->
									</ul>
								</div>
							</div>

							<div class="dropdown margin-left__24px">
								<button
									class="button button__filter button--has-icon icon-right icon-left"
									[ngClass]="{ active: !!eventApp }"
									(click)="showOverlay = true; showEventsAppsDropdown = !showEventsAppsDropdown"
								>
									<img src="/assets/img/apps-icon-grey.svg" alt="apps filter icon" />
									<span>Apps</span>
									<img src="/assets/img/angle-arrow-down.svg" alt="arrow down icon" />
								</button>

								<div class="dropdown__menu with-padding large" [ngClass]="{ show: showEventsAppsDropdown }">
									<div class="input__search">
										<img src="/assets/img/search-icon.svg" alt="search icon" />
										<input type="search" placeholder="Search apps here" #eventsAppsFilter />
									</div>

									<div class="dropdown__menu__item" *ngFor="let app of eventsAppsFilter$ | async">
										<label [for]="app.uid">{{ app.name }}</label>
										<input type="checkbox" name="app" [value]="app.uid" [id]="app.uid" [checked]="app.uid === eventApp" (change)="updateAppFilter(app.uid, $event, 'events')" />
									</div>
									<div *ngIf="filteredApps?.length !== 0 && !!eventApp" class="flex flex__justify-end margin-top__10px">
										<button class="button button__white button__small" (click)="clearEventFilters(activeTab, 'eventsApp'); showEventsAppsDropdown = false">Clear</button>
									</div>
									<p *ngIf="filteredApps?.length === 0">No app to display</p>
								</div>
							</div>
						</div>
						<div class="flex">
							<button
								class="button button__white button__small margin-right__20px"
								(click)="clearEventFilters(activeTab); selectedEventsDateOption = ''"
								[disabled]="(eventsFilterDateRange.value.startDate == '' || eventsFilterDateRange.value.endDate == '') && eventApp == ''"
								[ngClass]="{ disabled: (eventsFilterDateRange.value.startDate == '' || eventsFilterDateRange.value.endDate == '') && eventApp == '' }"
							>
								Clear All
							</button>
						</div>
					</div>
				</div>

				<div [hidden]="activeTab !== 'event deliveries'">
					<div class="flex flex__align-items-center flex__justify-between">
						<div class="flex">
							<div class="dropdown">
								<button
									class="button button__filter without-margin button--has-icon icon-right icon-left"
									[ngClass]="{ active: (eventDeliveriesFilterDateRange.value.startDate !== '' && eventDeliveriesFilterDateRange.value.endDate !== '') || selectedEventsDelDateOption }"
									(click)="showOverlay = true; showEventDelFilterCalendar = !showEventDelFilterCalendar"
								>
									<img class="margin-left__0px" src="/assets/img/calendar-icon.svg" alt="calender icon" />
									<!-- to be reviewed  -->
									<!-- <span class="color__grey">Date</span>
                                    <span class="color__primary" *ngIf="selectedEventsDelDateOption">: {{ selectedEventsDelDateOption }}</span> -->
									<mat-date-range-input [formGroup]="eventDeliveriesFilterDateRange" [rangePicker]="eventDeliveriesFilterPicker">
										<input matStartDate formControlName="startDate" placeholder="Start date" />
										<input
											matEndDate
											formControlName="endDate"
											placeholder="End date"
											(dateChange)="
												selectedEventsDelDateOption = formatDate(eventDeliveriesFilterDateRange.value.startDate) + ' - ' + formatDate(eventDeliveriesFilterDateRange.value.endDate);
												getEventDeliveries({ addToURL: true, fromFilter: true })
											"
										/>
									</mat-date-range-input>
									<mat-date-range-picker #eventDeliveriesFilterPicker [disabled]="false"></mat-date-range-picker>
									<img class="margin-right__0px" src="/assets/img/angle-arrow-down.svg" alt="arrow down icon" />
								</button>
								<div [ngClass]="{ show: showEventDelFilterCalendar }" class="dropdown__menu large">
									<ul>
										<li
											[ngClass]="{ active: selectedEventsDelDateOption == dateOption }"
											*ngFor="let dateOption of dateOptions"
											(click)="getSelectedDate(dateOption, activeTab); showEventDelFilterCalendar = false"
										>
											From {{ dateOption }}
										</li>
										<li (click)="eventDeliveriesFilterPicker.open(); showEventDelFilterCalendar = false; showOverlay = false">Custom Option</li>
										<!-- to be reviewed  -->
										<!-- <li class="no-hover flex flex__align-items-center">
                                            <button
                                                class="button button__primary button__small margin-right__14px"
                                                (click)="getEventDeliveries({ addToURL: true, fromFilter: true }); showEventDelFilterCalendar = false"
                                            >
                                                Apply
                                            </button>
                                            <button class="button__clear" (click)="selectedEventsDelDateOption = ''; clearEventFilters(activeTab, 'eventsDelDate'); showEventDelFilterCalendar = false">
                                                Clear
                                            </button>
                                        </li> -->
									</ul>
								</div>
							</div>

							<div class="dropdown margin-left__24px">
								<button
									class="button button__filter button--has-icon icon-right icon-left"
									[ngClass]="{ active: eventDeliveryFilteredByStatus.length > 0 }"
									(click)="showOverlay = true; showEventDeliveriesStatusDropdown = !showEventDeliveriesStatusDropdown"
								>
									<img class="margin-left__0px" src="/assets/img/status-filter-icon.svg" alt="status filter icon" />
									<span>Status</span>
									<img class="margin-right__0px" src="/assets/img/angle-arrow-down.svg" alt="arrow down icon" />
								</button>

								<div class="dropdown__menu with-padding small" [ngClass]="{ show: showEventDeliveriesStatusDropdown }">
									<div class="dropdown__menu__item with-border" *ngFor="let status of eventDeliveryStatuses">
										<label [for]="status">{{ status || 'None' }}</label>
										<input
											type="checkbox"
											name="status"
											[value]="status"
											[id]="status"
											[checked]="checkIfEventDeliveryStatusFilterOptionIsSelected(status)"
											(change)="updateEventDevliveryStatusFilter(status, $event)"
										/>
									</div>

									<div class="flex flex__align-items-center margin-top__10px">
										<button
											class="button button__small button__primary font__12px margin-right__10px"
											(click)="showOverlay = false; showEventDeliveriesStatusDropdown = false; this.getEventDeliveries({ addToURL: true, fromFilter: true })"
										>
											Apply
										</button>
										<button class="button__clear" (click)="clearEventFilters(activeTab, 'eventsDelsStatus'); showEventDeliveriesStatusDropdown = false; showOverlay = false">Clear</button>
									</div>
								</div>
							</div>

							<div class="dropdown margin-left__24px">
								<button
									class="button button__filter button--has-icon icon-right icon-left"
									[ngClass]="{ active: !!eventDeliveriesApp }"
									(click)="showOverlay = true; showEventDeliveriesAppsDropdown = !showEventDeliveriesAppsDropdown"
								>
									<img class="margin-left__0px" src="/assets/img/apps-icon-grey.svg" alt="apps filter icon" />
									<span>Apps</span>
									<img class="margin-right__0px" src="/assets/img/angle-arrow-down.svg" alt="arrow down icon" />
								</button>

								<div class="dropdown__menu large with-padding" [ngClass]="{ show: showEventDeliveriesAppsDropdown }">
									<div class="input__search">
										<img src="/assets/img/search-icon.svg" alt="search icon" />
										<input type="search" placeholder="Search apps here" #eventDelsAppsFilter />
									</div>

									<div class="dropdown__menu__item with-border" *ngFor="let app of eventsDelAppsFilter$ | async">
										<label [for]="app.uid + 'eventDel'">{{ app.name }}</label>
										<input
											type="checkbox"
											name="app"
											[value]="app.uid"
											[id]="app.uid + 'eventDel'"
											[checked]="app.uid === eventDeliveriesApp"
											(change)="updateAppFilter(app.uid, $event, 'eventDels')"
										/>
									</div>
									<div *ngIf="filteredApps?.length !== 0 && !!eventDeliveriesApp" class="margin-top__10px">
										<button class="button button__white button__small" (click)="clearEventFilters(activeTab, 'eventsDelApp'); showEventDeliveriesAppsDropdown = false; showOverlay = false">
											Clear
										</button>
									</div>
									<p *ngIf="filteredApps?.length === 0">No app to display</p>
								</div>
							</div>

							<div class="button__filter active margin-left__24px" *ngIf="eventDeliveryFilteredByEventId !== ''">
								Event Filtered
								<button class="button__clear button--has-icon margin-left__8px" (click)="eventDeliveryFilteredByEventId = ''; getEventDeliveries()">
									<img src="../../../../assets/img/close-icon.svg" alt="close icon" />
								</button>
							</div>
							<button
								class="flex__justify-center button button__filter margin-left__24px"
								(click)="fetchRetryCount()"
								[ngClass]="{
									disabled:
										((eventDeliveriesFilterDateRange.value.startDate == '' || eventDeliveriesFilterDateRange.value.endDate == '') &&
											eventDeliveriesApp == '' &&
											eventDeliveryFilteredByEventId == '' &&
											!eventDeliveriesStatusFilterActive) ||
										fetchingCount
								}"
							>
								Batch Retry
							</button>
						</div>

						<div class="flex">
							<button
								class="button button__white button__small font__12px margin-right__20px"
								(click)="clearEventFilters(activeTab); selectedEventsDelDateOption = ''"
								[ngClass]="{
									disabled:
										(eventDeliveriesFilterDateRange.value.startDate == '' || eventDeliveriesFilterDateRange.value.endDate == '') &&
										eventDeliveriesApp == '' &&
										eventDeliveryFilteredByEventId == '' &&
										!eventDeliveriesStatusFilterActive
								}"
							>
								Clear All
							</button>
						</div>
					</div>
				</div>
				<div [hidden]="activeTab !== 'apps'">
					<div class="flex flex__align-items-center flex__justify-between">
						<div class="flex flex__align-items-center">
							<form class="input__search margin-bottom__0px">
								<img src="/assets/img/search-icon.svg" alt="search icon" />
								<input
									type="search"
									placeholder="Search apps"
									[(ngModel)]="appsSearchString"
									(change)="searchApps({ searchInput: $event, type: 'apps' })"
									[ngModelOptions]="{ standalone: true }"
								/>
								<button [class]="'enter-button' + (appsSearchString.length > 0 ? ' show' : '')" (click)="searchApps({ type: 'apps' })">
									<img src="/assets/img/enter-icon.png" alt="enter icon" />
								</button>
							</form>

							<!-- pending when backend is ready  -->
							<!-- <div class="dropdown margin-left__24px">
								<button
									class="button button__filter button--has-icon icon-right icon-left"
									[ngClass]="{ active: selectedAppStatus !== 'All' }"
									(click)="showOverlay = true; showEventDeliveriesStatusDropdown = !showEventDeliveriesStatusDropdown"
								>
									<img class="margin-left__0px" src="/assets/img/status-filter-icon.svg" alt="status filter icon" />
									<span>Status</span>
									<span class="color__grey">:</span>
									<span class="color__primary font__14px font__weight-500 margin-left__8px" *ngIf="selectedAppStatus">{{selectedAppStatus}}</span>
									<img class="margin-right__0px" src="/assets/img/angle-arrow-down.svg" alt="arrow down icon" />
								</button>

								<div class="dropdown__menu with-padding small" [ngClass]="{ show: showEventDeliveriesStatusDropdown }">
									<div class="dropdown__menu__item with-border" *ngFor="let status of appStatuses">
										<label [for]="status">{{ status || 'None' }}</label>
										<input
											type="checkbox"
											name="status"
											[value]="status"
											[id]="status"
											[checked]="selectedAppStatus == status"
											(change)="filterAppByStatus(status)"
										/>
									</div>

									<div class="flex flex__align-items-center margin-top__10px">
										<button class="button__clear" (click)="clearEventFilters(activeTab); showEventDeliveriesStatusDropdown = false; showOverlay = false">Clear</button>
									</div>
								</div>
							</div> -->
						</div>
						<button class="button button__primary button__small" (click)="showCreateAppModal = !showCreateAppModal">Create App</button>
					</div>
				</div>
			</div>

			<div class="flex">
				<div class="dashboard--logs--table">
					<div class="table table--container has-loader" [hidden]="activeTab !== 'events' || displayedEvents.length === 0">
						<convoy-loader *ngIf="isloadingEvents"></convoy-loader>

						<table id="table">
							<thead>
								<tr class="table--head">
									<th scope="col">Event Type</th>
									<th scope="col">App Name</th>
									<th scope="col">Created At</th>
									<th scope="col"></th>
								</tr>
							</thead>
							<tbody>
								<ng-container *ngFor="let eventGroup of displayedEvents; let i = index">
									<tr class="table--date-row">
										<td>
											<div>{{ eventGroup.date }}</div>
										</td>
										<td></td>
										<td></td>
										<td></td>
									</tr>
									<tr
										*ngFor="let event of eventGroup.events; let index = index"
										[ngClass]="{ active: event.uid === eventsDetailsItem?.uid, 'last-item': index === eventGroup.events.length - 1 }"
										[id]="'event' + index"
										(click)="eventsDetailsItem = event; getEventDeliveriesForSidebar(event.uid)"
									>
										<td>
											<div>
												<div class="tag tag--Neutral">{{ event.event_type }}</div>
											</div>
										</td>
										<td class="has-long-text">
											<div>{{ event.app_metadata.title }}</div>
										</td>
										<td>
											<div>{{ event.created_at | date: 'mediumTime' }}</div>
										</td>
										<td>
											<div>
												<button class="button button__clear button--has-icon icon-right" (click)="eventDeliveryFilteredByEventId = event.uid; openDeliveriesTab()">
													Deliveries
													<img src="../../../../assets/img/angle-arrow-right-primary.svg" alt="arrow right" />
												</button>
											</div>
										</td>
									</tr>
								</ng-container>
							</tbody>
						</table>

						<div class="table--load-more button--container center" *ngIf="events && events.pagination.totalPage > 1">
							<button
								class="button button__clear button--has-icon icon-left margin-top__20px margin-bottom__24px flex__justify-center"
								[disabled]="events.pagination.page === events.pagination.totalPage || isloadingMoreEvents"
								(click)="eventsPage = eventsPage + 1; getEvents()"
							>
								<img src="/assets/img/arrow-down-icon.svg" class="width-unset height-unset" [hidden]="isloadingMoreEvents" alt="arrow down icon" />
								<img src="/assets/img/rotate-icon.svg" class="loading-icon" [hidden]="!isloadingMoreEvents" alt="loading icon" />
								Load more
							</button>
						</div>
					</div>

					<div class="empty-state table--container" *ngIf="displayedEvents.length === 0 && activeTab === 'events'">
						<img src="/assets/img/empty-state-img.svg" alt="empty state" />
						<p>No event to show here</p>
					</div>

					<div class="table table--container has-loader" [hidden]="activeTab !== 'event deliveries' || displayedEventDeliveries.length === 0">
						<convoy-loader *ngIf="isloadingEventDeliveries"></convoy-loader>

						<table id="table">
							<thead>
								<tr class="table--head">
									<th scope="col">Status</th>
									<th scope="col">Event Type</th>
									<th scope="col">Attempts</th>
									<th scope="col">Created At</th>
									<th scope="col"></th>
								</tr>
							</thead>
							<tbody>
								<ng-container *ngFor="let eventDeliveriesGroup of displayedEventDeliveries; let i = index">
									<tr class="table--date-row">
										<td>
											<div>{{ eventDeliveriesGroup.date }}</div>
										</td>
										<td></td>
										<td></td>
										<td></td>
										<td></td>
									</tr>
									<tr
										*ngFor="let event of eventDeliveriesGroup.events; let index = index"
										[ngClass]="{ 'last-item': index === eventDeliveriesGroup.events.length - 1, active: event.uid === eventDelsDetailsItem?.uid }"
										[id]="'event' + index"
										(click)="eventDelsDetailsItem = event; getDelieveryAttempts(event.uid)"
									>
										<td>
											<div class="has-retry">
												<img *ngIf="event.metadata.num_trials > event.metadata.retry_limit" src="/assets/img/retry-icon.svg" alt="retry icon" title="manually retried" />
												<div [class]="'tag tag--' + event.status">{{ event.status }}</div>
											</div>
										</td>
										<td>
											<div>{{ event.event_metadata.name }}</div>
										</td>
										<td>
											<div>{{ event.metadata?.num_trials }}</div>
										</td>
										<td>
											<div>{{ event.created_at | date: 'mediumTime' }}</div>
										</td>
										<td>
											<div>
												<button
													[disabled]="event.status !== 'Failure' && event.status !== 'Success'"
													[class]="'button__retry button--has-icon icon-left '"
													(click)="
														event.status === 'Success'
															? forceRetryEvent({ e: $event, index: this.index, eventDeliveryId: event.uid })
															: retryEvent({ e: $event, index: this.index, eventDeliveryId: event.uid })
													"
												>
													<img src="/assets/img/refresh-icon-primary.svg" alt="refresh icon" />

													{{ event.status === 'Success' ? 'Force Retry' : 'Retry' }}
												</button>
											</div>
										</td>
									</tr>
								</ng-container>
							</tbody>
						</table>

						<div class="table--load-more button--container center" *ngIf="eventDeliveries && eventDeliveries.pagination.totalPage > 1">
							<button
								class="button button__clear button--has-icon icon-left margin-top__24px margin-bottom__24px flex__justify-center"
								[disabled]="eventDeliveries.pagination.page === eventDeliveries.pagination.totalPage || isloadingMoreEventDeliveries"
								(click)="loadMoreEventDeliveries()"
							>
								<img src="/assets/img/arrow-down-icon.svg" class="width-unset height-unset" [hidden]="isloadingMoreEventDeliveries" alt="arrow down icon" />
								<img src="/assets/img/rotate-icon.svg" class="loading-icon" [hidden]="!isloadingMoreEventDeliveries" alt="loading icon" />
								Load more
							</button>
						</div>
					</div>

					<div class="empty-state table--container" *ngIf="displayedEventDeliveries.length === 0 && activeTab === 'event deliveries'">
						<img src="/assets/img/empty-state-img.svg" alt="empty state" />
						<p>No event to show here</p>
					</div>

					<div class="table table--container has-loader" [hidden]="activeTab !== 'apps' || !apps || apps.content.length === 0">
						<convoy-loader *ngIf="isloadingApps"></convoy-loader>

						<table class="table">
							<thead>
								<tr class="table--head">
									<th scope="col">Status</th>
									<th scope="col">Name</th>
									<th scope="col">Created</th>
									<th scope="col">Updated</th>
									<th scope="col">Events</th>
									<th scope="col">Endpoints</th>
									<th scope="col"></th>
									<th scope="col"></th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let app of apps?.content" [ngClass]="{ active: app.uid === appsDetailsItem?.uid }" (click)="appsDetailsItem = app; getAppPortalToken({ redirect: false })">
									<td>
										<div class="has-retry">
											<div [class]="app.is_disabled ? 'tag no-margin' : 'tag tag--Success no-margin'">{{ app.is_disabled ? 'Disabled' : 'Enabled' }}</div>
										</div>
									</td>
									<td class="has-long-text">
										<div>{{ app.name }}</div>
									</td>
									<td>
										<div>{{ app.created_at | date }}</div>
									</td>
									<td>
										<div>{{ app.updated_at | date }}</div>
									</td>
									<td>
										<div>{{ app.events }}</div>
									</td>
									<td>
										<div>{{ app.endpoints.length }}</div>
									</td>
									<td>
										<div>
											<button [disabled]="app.events <= 0" title="view events" [class]="'button__retry button--has-icon icon-left'" (click)="loadEventsFromAppsTable(app.uid)">
												<img src="/assets/img/view-events-icon.svg" alt="view events icon" />
												Events
											</button>
										</div>
									</td>
									<td>
										<div class="dropdown">
											<button class="button__clear button--has-icon" (click)="currentAppId = app.uid; showOverlay = true">
												<img src="/assets/img/more-icon-vertical.svg" alt="more icon" />
											</button>
											<div [ngClass]="{ show: currentAppId == app.uid }" class="dropdown__menu dropdown__menu__nav small">
												<ul>
													<li (click)="openUpdateAppModal(app)">Update</li>
													<li (click)="showDeleteAppModal = !showDeleteAppModal; currentAppId = ''" class="danger">Delete</li>
												</ul>
											</div>
										</div>
									</td>
								</tr>
							</tbody>
						</table>

						<div class="table--load-more button--container center" *ngIf="apps?.pagination && apps.pagination.totalPage > 1">
							<button
								[class]="
									'button button__primary button__clear button--has-icon icon-left margin-top__20px margin-bottom__24px flex__justify-center' +
									(apps.pagination.page === apps.pagination.totalPage ? 'disabled' : '')
								"
								[disabled]="apps.pagination.page === apps.pagination.totalPage || isloadingMoreApps"
								(click)="appsPage = appsPage + 1; getApps()"
							>
								<img src="/assets/img/arrow-down-icon.svg" class="width-unset height-unset" alt="arrow down icon" [hidden]="isloadingMoreApps" />
								<img src="/assets/img/rotate-icon.svg" class="loading-icon" [hidden]="!isloadingMoreApps" alt="loading icon" />
								Load more
							</button>
						</div>
					</div>

					<div class="empty-state table--container" *ngIf="apps?.content?.length === 0 && activeTab === 'apps'">
						<img src="/assets/img/empty-state-img.svg" alt="empty state" />
						<p>No app to show here</p>
					</div>
				</div>

				<div class="dashboard--logs--details has-loader">
					<convoy-loader
						*ngIf="(activeTab === 'apps' && isloadingApps) || (activeTab === 'events' && isloadingEvents) || (activeTab === 'event deliveries' && isloadingEventDeliveries)"
					></convoy-loader>

					<ng-container *ngIf="activeTab === 'apps' && appsDetailsItem">
						<div class="flex flex__justify-between flex__align-items-center">
							<h3 class="text__capitalize">{{ appsDetailsItem?.name }}</h3>

							<!-- app enable/disable toggle  -->
							<label class="toggle">
								<span class="toggle-label">{{ appsDetailsItem?.is_disabled ? 'Disabled' : 'Enabled' }}</span>
								<input class="toggle-checkbox" type="checkbox" (change)="editAppStatus(appsDetailsItem)" [checked]="!appsDetailsItem?.is_disabled" />
								<div class="toggle-switch"></div>
							</label>
						</div>

						<ul class="dashboard--logs--details--meta">
							<li class="list-item-inline">
								<div class="list-item-inline--label">Support Email</div>
								<div [class]="'list-item-inline--item ' + (appsDetailsItem?.support_email ? '' : 'fint')">{{ appsDetailsItem?.support_email || '...no support email provided' }}</div>
							</li>
						</ul>
						<div [ngClass]="{ disabled: appsDetailsItem?.is_disabled }">
							<h3>App Portal</h3>
							<ul class="dashboard--logs--details--meta">
								<li class="list-item-inline">
									<div class="list-item-inline--label">App Page</div>
									<div class="list-item-inline--item link" (click)="getAppPortalToken({ redirect: true })">
										Open Link
										<img src="/assets/img/arrow-up-right.svg" alt="link out" />
									</div>
								</li>
								<li class="list-item-inline">
									<div class="list-item-inline--label">Embed into your platform</div>
									<a class="list-item-inline--item link" href="https://getconvoy.io/docs/app-portal" target="_blank">
										See Documentation
										<img src="/assets/img/arrow-up-right.svg" alt="link out" />
									</a>
								</li>
								<li class="list-item-inline">
									<div class="list-item-inline--label">Embed Iframe portal</div>
									<div class="list-item-inline--item"></div>
								</li>
								<div class="code">
									<div class="text">{{ appPortalLink }}</div>
									<div class="flex flex__justify-end">
										<button class="button__clear button--has-icon icon-left" (click)="copyKey(appPortalLink, 'secret')">
											<img src="/assets/img/copy.svg" alt="copy" />
											<small *ngIf="showSecretCopyText">Copied!</small>
										</button>
									</div>
								</div>
							</ul>

							<div class="flex flex__align-items-center flex__justify-between">
								<h3>App Event Endpoints</h3>
								<div class="flex flex__align-items-center">
									<button class="button__clear" (click)="showAddEndpointModal = !showAddEndpointModal">Add Endpoints</button>
									<div class="line margin-right__16px margin-left__16px border__left"></div>
									<button class="button__clear" [disabled]="appsDetailsItem?.endpoints.length == 0" (click)="setEventAppId()">Add Event</button>
								</div>
							</div>
							<ul class="dashboard--logs--details--endpoints">
								<ng-container *ngIf="appsDetailsItem?.endpoints">
									<li *ngFor="let endpoint of appsDetailsItem.endpoints">
										<div>
											<div class="flex">
												<h5>{{ endpoint.description }}</h5>
												<button
													class="margin-left__16px button__clear color-primary button--has-icon icon-right small-icon"
													(click)="showEndpointSecret = !showEndpointSecret; endpointSecretKey = endpoint.secret"
												>
													View Secret
													<img src="/assets/img/arrow-up-right.svg" alt="link out" />
												</button>
											</div>
											<p>
												<img src="/assets/img/link-icon.svg" alt="link icon" />
												{{ endpoint.target_url }}
											</p>
											<div class="events">
												<div class="tag" *ngFor="let event of endpoint.events">{{ event == '*' ? 'all events' : event }}</div>
											</div>
										</div>
										<div class="dashboard--logs--details--endpoints--inactive" *ngIf="endpoint.status == 'inactive'">
											<div class="icon">
												<img src="/assets/img/lock.svg" alt="lock icon" />
											</div>
											<p class="color__dark font__16px font__weight-600">Endpoint Disabled</p>
											<!-- pending till this is figured out by backend  -->
											<!-- <a class="color__primary font__14px font__weight-500 margin-bottom__10px">Click here to learn how to enable this endpoint</a> -->
										</div>
									</li>
								</ng-container>
							</ul>

							<div class="empty-state smaller-table table--container" *ngIf="appsDetailsItem?.endpoints?.length === 0">
								<img src="/assets/img/empty-state-img.svg" alt="empty state" />
								<p>No endpoint has been added for selected app yet</p>
							</div>
						</div>
					</ng-container>

					<ng-container *ngIf="activeTab === 'event deliveries' && eventDelsDetailsItem">
						<h3>Details</h3>
						<ul class="dashboard--logs--details--meta">
							<li class="list-item-inline">
								<div class="list-item-inline--label">IP Address</div>
								<div class="list-item-inline--item color">{{ eventDeliveryAtempt?.ip_address || '-' }}</div>
							</li>
							<li class="list-item-inline">
								<div class="list-item-inline--label">HTTP Status</div>
								<div class="list-item-inline--item">{{ eventDeliveryAtempt?.http_status || '-' }}</div>
							</li>
							<li class="list-item-inline">
								<div class="list-item-inline--label">API Version</div>
								<div class="list-item-inline--item color">{{ eventDeliveryAtempt?.api_version || '-' }}</div>
							</li>
							<li class="list-item-inline">
								<div class="list-item-inline--label">Endpoint</div>
								<div class="list-item-inline--item color" [title]="eventDelsDetailsItem.endpoint?.target_url">
									{{ eventDelsDetailsItem.endpoint?.target_url }}
								</div>
							</li>
							<li class="list-item-inline" *ngIf="eventDelsDetailsItem.metadata?.num_trials < eventDelsDetailsItem.metadata?.retry_limit && eventDelsDetailsItem.status !== 'Success'">
								<div class="list-item-inline--label">Next Retry</div>
								<div class="list-item-inline--item color">
									{{ eventDelsDetailsItem.metadata?.next_send_time | date: 'mediumTime' }}
								</div>
							</li>
							<li class="list-item-inline">
								<div class="list-item-inline--label">App Name</div>
								<div class="list-item-inline--item color">
									{{ eventDelsDetailsItem.app_metadata?.title }}
								</div>
							</li>
							<li class="list-item-inline" *ngIf="eventDelsDetailsItem.status == 'Success'">
								<div class="list-item-inline--label">Delivery Time</div>
								<div class="list-item-inline--item color">{{ eventDelsDetailsItem?.updated_at | date: 'medium' }}</div>
							</li>
						</ul>

						<ul class="tabs tabs__logs">
							<li *ngFor="let tab of eventDetailsTabs" [class]="eventDetailsActiveTab === tab.id ? 'active' : ''">
								<button (click)="eventDetailsActiveTab = tab.id">{{ tab.label }}</button>
							</li>
						</ul>

						<div class="dashboard--logs--details--req-res has-loader">
							<convoy-loader *ngIf="(eventDetailsActiveTab === 'response' || eventDetailsActiveTab === 'request') && isloadingDeliveryAttempt"></convoy-loader>

							<div [class]="'dashboard--logs--details--tabs-data ' + (eventDetailsActiveTab === 'data' ? 'show' : '')">
								<h3>Event</h3>
								<prism language="json" [code]="getCodeSnippetString('event_delivery')"></prism>
							</div>

							<div [class]="'dashboard--logs--details--tabs-data ' + (eventDetailsActiveTab === 'response' && !isloadingDeliveryAttempt ? 'show' : '')">
								<ng-container *ngIf="!eventDeliveryAtempt?.error">
									<h3>Header</h3>
									<prism language="json" [code]="getCodeSnippetString('res_head')"></prism>

									<h3>Body</h3>
									<prism language="json" [code]="getCodeSnippetString('res_body')"></prism>
								</ng-container>

								<ng-container *ngIf="eventDeliveryAtempt?.error">
									<h3>Error</h3>
									<prism language="json" [code]="getCodeSnippetString('error')"></prism>
								</ng-container>
							</div>

							<div [class]="'dashboard--logs--details--tabs-data ' + (eventDetailsActiveTab === 'request' && !isloadingDeliveryAttempt ? 'show' : '')">
								<h3>Header</h3>
								<prism language="json" [code]="getCodeSnippetString('req')"></prism>
							</div>
						</div>
					</ng-container>

					<ng-container *ngIf="activeTab === 'events' && eventsDetailsItem">
						<h3>Details</h3>
						<div class="dashboard--logs--details--req-res">
							<div class="dashboard--logs--details--tabs-data show">
								<h3>Event</h3>
								<prism language="json" [code]="getCodeSnippetString('event')"></prism>
							</div>
						</div>

						<h4>Deliveries Overview</h4>
						<ul class="dashboard--logs--details--endpoints inline">
							<li *ngFor="let delivery of sidebarEventDeliveries">
								<div [class]="'tag tag--' + delivery.status">{{ delivery.status }}</div>
								<div class="url" [title]="delivery.endpoint.target_url">
									{{ delivery.endpoint.target_url }}
								</div>
							</li>
						</ul>
					</ng-container>
				</div>
			</div>
		</section>
	</div>
</div>

<div
	class="overlay"
	*ngIf="showOverlay"
	(click)="
		currentAppId = '';
		showOverlay = false;
		showEventDeliveriesStatusDropdown = false;
		showEventDeliveriesAppsDropdown = false;
		showEventsAppsDropdown = false;
		showDateFilterDropdown = false;
		showEventDelFilterCalendar = false;
		showEventFilterCalendar = false;
		showEndpointSecret = false
	"
></div>
<!-- dark overlay  -->
<div
	class="_overlay"
	*ngIf="showBatchRetryModal || showCreateAppModal || showAddEndpointModal || showAddEventModal || showDeleteAppModal || showEndpointSecret"
	(click)="showCreateAppModal = false; showBatchRetryModal = false; showAddEndpointModal = false; showAddEventModal = false; showDeleteAppModal = false; showEndpointSecret = false"
></div>
<!-- create app, add new endpoint, add event modals  -->
<div class="modal modal__right" *ngIf="showCreateAppModal || showAddEndpointModal || showAddEventModal || showEndpointSecret">
	<!-- create app modal  -->
	<div class="modal--head" *ngIf="showCreateAppModal">
		<h2>{{ editAppMode ? 'Edit App' : 'Create App' }}</h2>
		<a (click)="showCreateAppModal = false; editAppMode = false; addNewAppForm.reset()">
			<img src="/assets/img/modal-close-icon.svg" alt="close icon" />
		</a>
	</div>
	<div class="modal--body" *ngIf="showCreateAppModal">
		<form [formGroup]="addNewAppForm">
			<div class="input">
				<input type="text" formControlName="name" required />
				<label for="">Enter App Name</label>
				<div class="input__error input__error__danger" *ngIf="addNewAppForm.controls.name.touched && addNewAppForm.controls.name.invalid">
					<img src="assets/img/input-error-icon.svg" alt="input error icon" />
					<span>App name is required</span>
				</div>
			</div>
			<div class="input">
				<input type="text" formControlName="support_email" required />
				<label class="input__label" for="">Support Email</label>
				<div class="input__error input__error__danger" *ngIf="addNewAppForm.controls.support_email.touched && addNewAppForm.controls.support_email.invalid">
					<img src="assets/img/input-error-icon.svg" alt="input error icon" />
					<span>Support email is required</span>
				</div>
				<div class="input__error input__error__secondary font__12px">
					<img src="/assets/img/info-icon.svg" alt="close icon" />
					We use this to send an email notifcation for when a failure happens
				</div>
			</div>
			<div *ngIf="!editAppMode" formArrayName="endpoints">
				<div *ngIf="endpoints.controls.length > 0" class="flex flex__align-items-center flex__justify-between">
					<h3>Endpoint</h3>
					<button (click)="addEndpoint()" class="button__clear button--has-icon icon-left">
						<img src="/assets/img/add-icon.svg" alt="close icon" />
						Add Endpoint
					</button>
				</div>
				<div *ngFor="let endpoint of endpoints.controls; let i = index">
					<div [formGroupName]="i">
						<div class="input">
							<input type="text" formControlName="description" required />
							<label for="">Description</label>
							<div class="input__error input__error__danger" *ngIf="getSingleEndpoint(i).description.touched && getSingleEndpoint(i).description.invalid">
								<img src="assets/img/input-error-icon.svg" alt="input error icon" />
								<span>Please provide a description</span>
							</div>
						</div>
						<div class="input">
							<input type="text" formControlName="url" required />
							<label for="">Enter Endpoint URL</label>
							<div class="input__error input__error__danger" *ngIf="getSingleEndpoint(i).url.touched && getSingleEndpoint(i).url.invalid">
								<img src="assets/img/input-error-icon.svg" alt="input error icon" />
								<span>Please provide a description</span>
							</div>
						</div>
						<div class="input multiple">
							<div class="input--multiple" [ngClass]="{ active: eventTags.length > 0 }">
								<div class="tag" *ngFor="let tag of eventTags">
									{{ tag }}
									<a (click)="removeEventTag(tag)">
										<img src="/assets/img/close-icon-black.svg" alt="close icon" />
									</a>
								</div>
								<input type="text" id="tagInput" formControlName="tag" (input)="addTag($event, i)" required />
							</div>
							<label [ngClass]="{ active: eventTags.length > 0 }" for="">Add Tag</label>
							<div class="input__error input__error__secondary font__12px">
								<img src="/assets/img/info-icon.svg" alt="close icon" />
								Add multiple tags by seperating them with commas
							</div>
							<div class="input__error input__error__danger" *ngIf="getSingleEndpoint(i).tag.touched && getSingleEndpoint(i).tag.invalid">
								<img src="assets/img/input-error-icon.svg" alt="input error icon" />
								<span>Please add at least one tag</span>
							</div>
						</div>
						<div class="flex flex__justify-end margin-bottom__16px">
							<button (click)="removeEndpoint(i)" class="button__clear color__danger button--has-icon icon-left">
								<img src="/assets/img/trash-icon.svg" alt="close icon" />
								Remove Endpoint
							</button>
						</div>
					</div>
				</div>
				<!-- to be reviewed -->
				<!-- <div class="flex flex__justify-end" >
                    <button *ngIf="endpoints.controls.length == 0" (click)="addEndpoint()" class="button__clear button--has-icon icon-left margin-top__20px">
                        <img src="/assets/img/add-icon.svg" alt="close icon" />
                        Add Endpoint
                    </button>
                </div> -->
			</div>
		</form>
	</div>
	<div class="modal--footer modal--footer__with-shadow" *ngIf="showCreateAppModal">
		<button class="button button__white" (click)="showCreateAppModal = false; editAppMode = false; addNewAppForm.reset()">Discard</button>
		<button class="button button__primary" [disabled]="isCreatingNewApp" (click)="createNewApp()">{{ editAppMode ? 'Edit App' : 'Create App' }}</button>
	</div>

	<!-- add endpoint modal  -->
	<div class="modal--head" *ngIf="showAddEndpointModal">
		<h2>Add Endpoint</h2>
		<a (click)="showAddEndpointModal = false">
			<img src="/assets/img/modal-close-icon.svg" alt="close icon" />
		</a>
	</div>
	<div class="modal--body" *ngIf="showAddEndpointModal">
		<form [formGroup]="addNewEndpointForm">
			<div class="input">
				<input type="text" formControlName="description" required />
				<label for="">Description</label>
				<div class="input__error input__error__danger" *ngIf="addNewEndpointForm.controls.description.touched && addNewEndpointForm.controls.description.invalid">
					<img src="assets/img/input-error-icon.svg" alt="input error icon" />
					<span>Please provide a description</span>
				</div>
			</div>
			<div class="input">
				<input type="text" formControlName="url" required />
				<label for="">Enter URL</label>
				<div class="input__error input__error__danger" *ngIf="addNewEndpointForm.controls.url.touched && addNewEndpointForm.controls.url.invalid">
					<img src="assets/img/input-error-icon.svg" alt="input error icon" />
					<span>Endpoint URL is required</span>
				</div>
			</div>

			<div class="input multiple">
				<div class="input--multiple" [ngClass]="{ active: eventTags.length > 0 }">
					<div class="tag" *ngFor="let tag of eventTags">
						{{ tag }}
						<a (click)="removeEventTag(tag)">
							<img src="/assets/img/close-icon-black.svg" alt="close icon" />
						</a>
					</div>
					<input type="text" id="tagInput" (input)="addTag()" required />
				</div>
				<label [ngClass]="{ active: eventTags.length > 0 }" for="">Events</label>
				<div class="input__error input__error__secondary font__12px">
					<img src="/assets/img/info-icon.svg" alt="close icon" />
					Add multiple events by seperating them with commas
				</div>
			</div>
		</form>
	</div>
	<div class="modal--footer modal--footer__with-shadow" *ngIf="showAddEndpointModal">
		<button class="button button__white" (click)="showAddEndpointModal = false">Discard</button>
		<button class="button button__primary" [disabled]="isCreatingNewEndpoint" (click)="addNewEndpoint()">{{ isCreatingNewEndpoint ? 'Adding Endpoint..' : 'Add Endpoint' }}</button>
	</div>

	<!-- add event modal  -->
	<div class="modal--head" *ngIf="showAddEventModal">
		<h2>Add Event</h2>
		<a (click)="showAddEventModal = false">
			<img src="/assets/img/modal-close-icon.svg" alt="close icon" />
		</a>
	</div>
	<div class="modal--body" *ngIf="showAddEventModal">
		<form [formGroup]="sendEventForm">
			<div class="input">
				<select formControlName="app_id" required>
					<option *ngFor="let app of apps?.content" [value]="app.uid">{{ app.name }}</option>
				</select>
				<label for="">App ID</label>
				<div class="input__error input__error__danger" *ngIf="sendEventForm.controls.app_id.touched && sendEventForm.controls.app_id.invalid">
					<img src="assets/img/input-error-icon.svg" alt="input error icon" />
					<span>App Id is required</span>
				</div>
			</div>
			<div class="input">
				<textarea formControlName="data" required cols="5"></textarea>
				<label for="">Data</label>
				<div class="input__error input__error__danger" *ngIf="sendEventForm.controls.data.touched && sendEventForm.controls.data.invalid">
					<img src="assets/img/input-error-icon.svg" alt="input error icon" />
					<span>Data is required</span>
				</div>
				<div class="input__error input__error__secondary font__12px">
					<img src="/assets/img/info-icon.svg" alt="close icon" />
					Please enter your data in the format it would be returned
				</div>
			</div>
			<div class="input">
				<input type="text" formControlName="event_type" required />
				<label for="">Event Type</label>
				<div class="input__error input__error__danger" *ngIf="sendEventForm.controls.event_type.touched && sendEventForm.controls.event_type.invalid">
					<img src="assets/img/input-error-icon.svg" alt="input error icon" />
					<span>Event type is required</span>
				</div>
			</div>
		</form>
	</div>
	<div class="modal--footer modal--footer__with-shadow" *ngIf="showAddEventModal">
		<button class="button button__white" (click)="showAddEventModal = false">Discard</button>
		<button class="button button__primary" [disabled]="isSendingNewEvent" (click)="sendNewEvent()">{{ isSendingNewEvent ? 'Adding Event..' : 'Add Event' }}</button>
	</div>

	<!-- endpoint secret modal  -->
	<div class="modal--head" *ngIf="showEndpointSecret">
		<h2>Endpoint Secret</h2>
		<a (click)="showEndpointSecret = false">
			<img src="/assets/img/modal-close-icon.svg" alt="close icon" />
		</a>
	</div>
	<div class="modal--body" *ngIf="showEndpointSecret">
		<div class="key">
			<span>{{ endpointSecretKey }}</span>
			<button (click)="copyKey(endpointSecretKey, 'secret')">
				<img src="/assets/img/copy.svg" alt="copy" />
				<small *ngIf="showSecretCopyText">Copied!</small>
			</button>
		</div>
	</div>
</div>

<!-- delete app modal  -->
<div class="modal modal__center" *ngIf="showDeleteAppModal">
	<div class="modal--body flex flex__column flex__justify-center flex__align-items-center delete">
		<img src="/assets/img/warning.gif" alt="warning" />
		<p class="title">Are you sure you want to delete {{ appsDetailsItem?.name }}?</p>
		<p class="subtext">This action is irrevesible</p>
		<button class="button button__deactivate" [disabled]="isDeletingApp" (click)="deleteApp()">{{ isDeletingApp ? 'Deleting App...' : 'Yes, Delete' }}</button>
		<button class="button__primary button__clear cancel" (click)="showDeleteAppModal = false">No, Cancel</button>
	</div>
</div>
<!-- batch retry modal  -->
<div class="modal modal__center" *ngIf="showBatchRetryModal">
	<div class="modal--body flex flex__column flex__justify-center flex__align-items-center delete">
		<img src="/assets/img/filter.gif" alt="filter icon" class="filter-img" />
		<div class="text-center font__20px font__weight-500 color__grey margin-bottom__8px">The filters applied will affect</div>
		<div class="text-center font__20px font__weight-600 color__black margin-bottom__32px">{{ batchRetryCount || 0 }} event{{ batchRetryCount > 1 ? 's' : '' }}</div>
		<button class="button button__primary" [disabled]="isRetyring || batchRetryCount == 0" (click)="batchRetryEvent()">{{ isRetyring ? 'Retrying Events...' : 'Yes, Apply' }}</button>
		<button class="button__primary button__clear margin-top__28px font__weight-600" (click)="showBatchRetryModal = false">No, Cancel</button>
	</div>
</div>
