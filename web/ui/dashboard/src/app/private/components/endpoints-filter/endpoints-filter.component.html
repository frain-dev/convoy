<div convoy-dropdown size="md" position="left" #endpointsFilterDropdown>
	<button dropdownTrigger convoy-button size="sm" fill="outline" class="px-10px !border-primary-400 whitespace-nowrap justify-between" [ngClass]="{ 'text-primary-100 !bg-primary-500': endpointId }">
		<div class="flex items-center gap-10px">
			<svg width="18" height="18" class="transition-all scale-75" [class]="endpointId ? 'stroke-new.primary-400' : 'stroke-new.gray-600'">
				<use xlink:href="#endpoints-icon"></use>
			</svg>
			<span class="text-grey-40">Endpoints</span>
		</div>
	</button>

	<div dropdownOptions>
		<div class="m-10px border border-primary-400 h-36px px-14px rounded-[10px] flex items-center bg-white-100">
			<img src="/assets/img/search-icon.svg" alt="search icon" class="mr-10px w-14px" />
			<input type="search" placeholder="Search endpoints" #endpoint class="w-full outline-none text-12" />
		</div>

		<ul class="min-h-[100px] max-h-[200px] overflow-auto pb-10px">
			<ng-container *ngIf="!loadingFilterEndpoints">
				<li class="!py-0 pr-10px relative" *ngFor="let endpoint of endpoints$ | async" convoy-list-item [hasBorder]="false">
					<label [for]="endpoint.uid + 'eventDel'" class="py-10px cursor-pointer px-10px text-12 block w-full capitalize text-new.gray-600 font-normal truncate">{{ endpoint.title }}</label>
					<input
						type="checkbox"
						class="
							peer
							w-20px
							h-18px
							border border-new.primary-50
							rounded-4px
							checked:border-new.primary-400
							checked:bg-new.primary-25 checked:bg-[url(assets/img/check-icon-primary.svg)] checked:bg-[length:12px] checked:bg-center checked:bg-no-repeat
							focus:bottom-2
							focus:border-new.primary-400
							checked:bg
							bg-white-100
						"
						name="endpoint"
						[value]="endpoint.uid"
						[id]="endpoint.uid + 'eventDel'"
						[checked]="endpoint.uid === endpointId"
						(change)="selectEndpoint($event, endpoint.uid)"
					/>
				</li>
			</ng-container>

			<!-- not in effect yet, unable to creat a loading state -->
			<ng-container *ngIf="loadingFilterEndpoints">
				<li class="!px-10px py-10px" convoy-list-item [hasBorder]="false">
					<convoy-skeleton-loader className="w-120px h-16px"></convoy-skeleton-loader>
					<convoy-skeleton-loader className="w-20px h-16px"></convoy-skeleton-loader>
				</li>
				<li class="!px-10px py-10px" convoy-list-item [hasBorder]="false">
					<convoy-skeleton-loader className="w-120px h-16px"></convoy-skeleton-loader>
					<convoy-skeleton-loader className="w-20px h-16px"></convoy-skeleton-loader>
				</li>
				<li class="!px-10px py-10px" convoy-list-item [hasBorder]="false">
					<convoy-skeleton-loader className="w-120px h-16px"></convoy-skeleton-loader>
					<convoy-skeleton-loader className="w-20px h-16px"></convoy-skeleton-loader>
				</li>
				<li class="!px-10px py-10px" convoy-list-item [hasBorder]="false">
					<convoy-skeleton-loader className="w-120px h-16px"></convoy-skeleton-loader>
					<convoy-skeleton-loader className="w-20px h-16px"></convoy-skeleton-loader>
				</li>
			</ng-container>
		</ul>

		<div class="px-10px py-8px flex justify-end gap-14px border-t border-t-new.primary-25">
			<button convoy-button size="sm" fill="outline" color="danger" class="text-10 !py-4px" convoy-dropdown-option (click)="clear()">Clear</button>
			<button convoy-button size="sm" convoy-dropdown-option class="text-10 !py-4px" (click)="set()">Apply</button>
		</div>
	</div>
</div>
