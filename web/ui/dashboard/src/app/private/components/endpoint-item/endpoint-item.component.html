<tr convoy-table-row *ngFor="let endpoint of endpoints; let index = index" [id]="'endpoint' + i" class="border-b border-b-new.primary-25" (click)="selectedEndpoint = endpoint">
	<!-- <tr convoy-table-row class="border-b border-b-new.primary-25" (click)="selectedEndpoint = endpoint"> -->
	<td convoy-table-cell class="w-[450px]">
		<div class="truncate max-w-[440px] pl-16px">{{ endpoint.title }}</div>
	</td>
	<td convoy-table-cell class="w-100px">
		<convoy-tag *ngIf="endpoint.status" [color]="endpoint.status | statuscolor" className="ml-4px">{{ endpoint.status }}</convoy-tag>
	</td>
	<td convoy-table-cell class="relative">
		<div convoy-tag color="gray" class="mr-8px w-[260px] !gap-16px truncate flex items-center">
			{{ endpoint.uid }}
			<convoy-copy-button size="sm" [notificationText]="endpoint.title + ' ID has been copied to clipboard'" [text]="endpoint.uid"></convoy-copy-button>
		</div>
	</td>

	<td convoy-table-cell colspan="2"></td>
	<td convoy-table-cell>
		<div class="w-full flex items-center justify-end">
			<button convoy-button size="xs" [routerLink]="['../events']" [relativeTo]="route" [queryParams]="{ endpointId: endpoint.uid }" texture="light">
				<img src="/assets/img/view-events-icon.svg" class="w-14px mr-10px" alt="view events icon" />
				View Events
			</button>

			<div convoy-dropdown position="right">
				<button dropdownTrigger convoy-button size="xs" fill="clear" class="ml-40px pr-24px">
					<svg width="21" height="20">
						<use xlink:href="#more-icon"></use>
					</svg>
				</button>

				<ul dropdownOptions class="p-10px">
					<li class="mb-4px rounded-8px py-4px px-6px hover:bg-new.primary-25 duration-300 transition-all">
						<button convoy-dropdown-option convoy-button color="grey" class="w-full !justify-start" fill="text" (click)="secretDialog.showModal()">
							<svg width="16" height="16" class="mr-8px">
								<use xlink:href="#shield-icon"></use>
							</svg>
							View Secret
						</button>
					</li>
					<li class="mb-4px rounded-8px py-4px px-6px hover:bg-new.primary-25 duration-300 transition-all">
						<button convoy-dropdown-option convoy-button color="grey" class="w-full !justify-start" fill="text" (click)="toggleEndpoint()" [disabled]="isTogglingEndpoint">
							<svg width="14" height="14" class="stroke-new.gray-600 mr-8px">
								<use [attr.xlink:href]="selectedEndpoint?.status === 'paused' ? '#play-icon' : '#pause-icon'"></use>
							</svg>
							{{ selectedEndpoint?.status === 'paused' ? 'Unpause' : 'Pause' }}
						</button>
					</li>
					<li class="mb-4px rounded-8px py-4px px-6px hover:bg-new.primary-25 duration-300 transition-all">
						<button convoy-dropdown-option convoy-button color="grey" fill="text" class="w-full !justify-start" [routerLink]="'./' + selectedEndpoint?.uid">
							<svg width="17" height="16" class="fill-new.gray-600 mr-8px">
								<use xlink:href="#edit-icon"></use>
							</svg>
							Edit
						</button>
					</li>

					<li class="mb-4px rounded-8px py-4px px-6px hover:bg-new.primary-25 duration-300 transition-all">
						<button convoy-dropdown-option convoy-button color="danger" class="w-full !justify-start" fill="text" (click)="deleteDialog.showModal()">
							<svg width="14" height="14" class="fill-transparent stroke-new.error-400 mr-8px">
								<use xlink:href="#delete-icon2"></use>
							</svg>
							Delete
						</button>
					</li>

					<li *ngIf="privateService.getProjectDetails?.type === 'outgoing'" class="mb-4px rounded-8px py-4px px-6px hover:bg-new.primary-25 duration-300 transition-all">
						<button convoy-dropdown-option convoy-button color="grey" class="w-full !justify-start" fill="text" (click)="sendTestEvent()" [disabled]="isSendingTestEvent">
							<svg width="16" height="17" class="mr-8px">
								<use xlink:href="#send-icon"></use>
							</svg>
							Send Test Event
						</button>
					</li>
				</ul>
			</div>
		</div>
	</td>
</tr>

<!-- endpoint secret  -->
<dialog #secretDialog convoy-dialog position="center">
	<convoy-endpoint-secret [endpointDetails]="selectedEndpoint" (closeSecretModal)="secretDialog.close()" (expireCurrentSecret)="getEndpoints.emit()"></convoy-endpoint-secret>
</dialog>

<!-- delete modal  -->
<dialog #deleteDialog convoy-dialog position="center" size="sm">
	<app-delete-modal [isLoading]="isDeletingEndpoint" [deleteText]="'delete “' + selectedEndpoint?.title + '”'" (closeModal)="deleteDialog.close()" (deleteData)="deleteEndpoint()"></app-delete-modal>
</dialog>
