<convoy-loader *ngIf="isloadingOrganisations"></convoy-loader>

<ng-container *ngIf="!isloadingOrganisations && organisations.length > 0 && !noData">
	<convoy-page>
		<h3 class="mb-2 font-semibold">Projects</h3>
		<p class="text-grey-40 text-14 font-medium mb-24px">All your project's summary at a glance</p>

		<div class="grid grid-cols-3 gap-6" *ngIf="isLoadingProjects">
			<div *ngFor="let index of projectsLoaderIndex" class="rounded-8px bg-white-100 block border border-grey-10">
				<div class="px-6 py-4 flex items-center justify-between border-b border-b-grey-10">
					<div class="flex items-center">
						<div class="bg-primary-500 w-6 h-6 rounded-[50px] mr-2 flex items-center justify-center">
							<svg width="16" height="16" fill="#477db3" stroke="#477db3">
								<use xlink:href="#top-right-icon"></use>
							</svg>
						</div>
						<div class="bg-grey-20 rounded-[24px] animate-pulse h-4 w-[140px]"></div>
					</div>

					<div class="bg-grey-20 rounded-[24px] animate-pulse h-4 w-16"></div>
				</div>

				<div class="flex items-center p-0">
					<div class="py-2 px-6 w-2/5">
						<div class="bg-grey-20 rounded-[24px] animate-pulse h-4 w-18"></div>
					</div>
					<div class="py-2 px-6 w-3/5 flex items-center justify-between border-l border-l-grey-10">
						<div class="bg-grey-20 rounded-[24px] animate-pulse h-4 w-16"></div>
						<div class="bg-grey-20 rounded-[24px] animate-pulse h-4 w-10"></div>
					</div>
				</div>
			</div>
		</div>

		<div class="grid grid-cols-3 gap-6" *ngIf="!isLoadingProjects">
			<a *ngFor="let project of projects" [routerLink]="'/projects/' + project.uid" class="rounded-8px bg-white-100 block border border-grey-10">
				<div class="px-6 py-4 flex items-center justify-between border-b border-b-grey-10">
					<div class="flex items-center">
						<div class="bg-primary-500 w-6 h-6 rounded-[50px] mr-2 flex items-center justify-center">
							<svg width="16" height="16" fill="#477db3" stroke="#477db3">
								<use xlink:href="#top-right-icon"></use>
							</svg>
						</div>
						<h4 class="cursor-pointer">{{ project.name }}</h4>
					</div>

					<div class="bg-primary-500 rounded-8px px-2 pt-[1px] text-10 font-medium text-primary-100 uppercase">{{ project.type || '-' }}</div>
				</div>

				<div class="flex items-center p-0">
					<div class="py-2 px-6 text-12 font-medium w-2/5">
						<span class="text-black mr-2">{{ project.statistics.messages_sent }}</span>
						<span class="text-grey-40">Events Sent</span>
					</div>
					<div class="py-2 px-6 w-3/5 flex items-center justify-between border-l border-l-grey-10">
						<div class="text-12 font-medium">
							<span class="text-black mr-2">{{ project.statistics.total_apps }}</span>
							<span class="text-grey-40">Apps</span>
						</div>
						<svg width="20" height="20" fill="#477db3">
							<use xlink:href="#arrow-right-icon"></use>
						</svg>
					</div>
				</div>
			</a>
			<a routerLink="./new" class="rounded-8px bg-white-100 border border-dashed border-primary-100 flex items-center justify-center py-8">
				<svg width="22" height="22" class="mr-2" fill="#477db3">
					<use xlink:href="#plus-icon"></use>
				</svg>
				<span class="text-primary-100 font-medium text-16">Create new project</span>
			</a>
		</div>
	</convoy-page>
</ng-container>

<convoy-page *ngIf="organisations.length == 0">
	<div class="bg-white-100 border border-grey-10 h-[550px] rounded-[10px] flex flex-col items-center justify-center">
		<img src="/assets/img/org-empty-img.svg" alt="add group empty" class="h-20 mb-4" />
		<h1 class="font-semibold mb-2">You have no organisation yet</h1>
		<p class="text-14 text-grey-100 font-medium w-full max-w-[384px] text-center mb-4">Create an organisation to get started with sending/receiving webhooks</p>
		<convoy-button (click)="showOrganisationModal = true">Create Organisation</convoy-button>
	</div>
</convoy-page>

<convoy-page *ngIf="noData && !isLoadingProjects">
	<div class="bg-white-100 border border-grey-10 h-[550px] rounded-[10px] flex flex-col items-center justify-center">
		<img src="/assets/img/group-empty-img.svg" alt="add group empty" class="h-20 mb-4" />
		<h1 class="font-semibold mb-2">You have no project yet</h1>
		<p class="text-14 text-grey-100 font-medium w-full max-w-[384px] text-center mb-4">Create a project to start sending/receiving webhooks</p>
		<convoy-button routerLink="./new">Create Project</convoy-button>
	</div>
</convoy-page>

<convoy-modal title="Add an organisation" *ngIf="showOrganisationModal" (closeModal)="showOrganisationModal = false">
	<div modalBody>
		<app-create-organisation (closeModal)="setOrganisation()"></app-create-organisation>
	</div>
</convoy-modal>
