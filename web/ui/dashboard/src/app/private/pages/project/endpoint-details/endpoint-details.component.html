<div class="text-12 font-medium flex items-center mb-24px uppercase">
	<a routerLink="/projects" class="font-medium cursor-pointer">Projects</a>
	<svg width="16" height="16" class="mx-4px fill-dark-grey">
		<use xlink:href="#arrow-right-icon"></use>
	</svg>
	{{ privateService.activeProjectDetails?.name }}
	<svg width="16" height="16" class="mx-4px fill-dark-grey">
		<use xlink:href="#arrow-right-icon"></use>
	</svg>
	<a class="cursor-pointer font-medium" (click)="goBack()">Endpoints</a>
	<svg width="16" height="16" class="mx-4px fill-dark-grey">
		<use xlink:href="#arrow-right-icon"></use>
	</svg>
	<span class="font-medium text-primary-100">{{ endpointDetails?.title || 'Endpoint' }}</span>
</div>

<convoy-card className="p-32px mb-20px">
	<div class="flex justify-between items-center mb-24px">
		<h3 class="font-medium">{{ endpointDetails?.title }}</h3>
		<div class="flex">
			<div class="flex items-center">
				<convoy-button size="sm" type="text">
					<svg width="16" height="16" class="mr-8px fill-primary-100">
						<use xlink:href="#edit-icon"></use>
					</svg>
					Edit
				</convoy-button>
				<div class="h-22px w-[1px] mx-16px border-l border-l-grey-10"></div>
				<convoy-button size="sm" type="text" color="danger">
					<svg width="16" height="16" class="mr-8px fill-danger-100">
						<use xlink:href="#delete-icon"></use>
					</svg>
					Delete
				</convoy-button>
			</div>
		</div>
	</div>

	<!-- app details overview  -->
	<div *ngIf="isLoadingEndpointDetails">
		<div class="flex items-center flex-wrap justify-between mb-32px">
			<div>
				<p class="text-grey-40 text-12 font-light">DATE CREATED</p>
				<convoy-skeleton-loader className="mt-10px w-120px h-20px"></convoy-skeleton-loader>
			</div>
			<div>
				<p class="text-grey-40 text-12 font-light">SUPPORT EMAIL</p>
				<convoy-skeleton-loader className="mt-10px w-120px h-20px"></convoy-skeleton-loader>
			</div>
			<div>
				<p class="text-grey-40 text-12 font-light">UPDATED</p>
				<convoy-skeleton-loader className="mt-10px w-120px h-20px"></convoy-skeleton-loader>
			</div>
			<div>
				<p class="text-grey-40 text-12 font-light">EVENTS</p>
				<convoy-skeleton-loader className="mt-10px w-120px h-20px"></convoy-skeleton-loader>
			</div>
			<div>
				<p class="text-grey-40 text-12 font-light">SECRET</p>
				<convoy-skeleton-loader className="mt-10px w-120px h-20px"></convoy-skeleton-loader>
			</div>
		</div>
		<div>
			<p class="text-grey-40 text-12 font-light">URL</p>
			<convoy-skeleton-loader className="mt-10px w-320px h-20px"></convoy-skeleton-loader>
		</div>
	</div>
	<div *ngIf="!isLoadingEndpointDetails && endpointDetails">
		<div class="flex items-center flex-wrap justify-between mb-32px">
			<div>
				<p class="text-grey-40 text-12 font-light">DATE CREATED</p>
				<p class="text-black text-14 font-normal">{{ endpointDetails?.created_at | date: 'mediumDate' }}</p>
			</div>
			<div>
				<p class="text-grey-40 text-12 font-light">SUPPORT EMAIL</p>
				<p class="text-black text-14 font-normal">{{ endpointDetails?.support_email || '...no support email provided' }}</p>
			</div>
			<div>
				<p class="text-grey-40 text-12 font-light">UPDATED</p>
				<p class="text-black text-14 font-normal">{{ endpointDetails?.updated_at | date: 'mediumDate' }}</p>
			</div>
			<div>
				<p class="text-grey-40 text-12 font-light">EVENTS</p>
				<p class="text-black text-14 font-normal">{{ endpointDetails?.events | date: 'mediumDate' }}</p>
			</div>
			<div>
				<p class="text-grey-40 text-12 font-light">SECRET</p>
				<p class="text-black text-14 font-normal"></p>
			</div>
		</div>
		<div>
			<p class="text-grey-40 text-12 font-light">URL</p>
			<p class="text-black text-14 font-normal">{{ endpointDetails?.target_url }}</p>
		</div>
	</div>
</convoy-card>

<ng-container *ngIf="isCliAvailable">
	<!-- app api keys and devices list  -->
	<convoy-card className="mt-24px rounded-bl-[0] rounded-br-[0]">
		<div class="flex items-center justify-center">
			<ul class="flex flex-row m-auto w-full mt-12px">
				<li *ngFor="let tab of tabs" class="mr-24px !list-none first-of-type:ml-24px last-of-type:mr-0">
					<button class="pb-16px pt-10px flex items-center" [class]="activeTab === tab ? 'active' : ''" (click)="toggleActiveTab(tab)">
						<span class="text-14 text-left capitalize text-grey-60 tracking-[0.02em] mobile:min-w-[80px]">{{ tab }}</span>
					</button>
				</li>

				<!-- <div class="text-grey-40 text-14 font-medium whitespace-nowrap ml-auto pr-14px">
					<convoy-button size="sm" (click)="cliKeys.generateKeyModal = true" className="mt-6px">
						<svg width="18" height="18" class="fill-white-100">
							<use xlink:href="#plus-icon"></use>
						</svg>
					</convoy-button>
				</div> -->
			</ul>
		</div>
	</convoy-card>

	<ng-container *ngIf="activeTab === 'CLI Keys'">
		<convoy-cli-keys></convoy-cli-keys>
	</ng-container>
	<ng-container *ngIf="activeTab === 'devices'">
		<convoy-devices></convoy-devices>
	</ng-container>
</ng-container>

<!-- send event form  -->
<send-event *ngIf="showAddEventModal &&  endpointDetails" [endpointId]="endpointDetails.uid" (onAction)="$event.action == 'cancel' ? (showAddEventModal = false) : getEndpointDetails(endpointDetails.uid); showAddEventModal = false"></send-event>

<!-- endpoint secret  -->
<!-- <convoy-modal *ngIf="showEndpointSecret" title="Endpoint Secret" (closeModal)="showEndpointSecret = false">
	<div modalBody>
		<div class="flex items-center justify-between w-full h-50px bg-[#F7F9FC] border border-grey-10 rounded-[6px] px-16px mb-12px last-of-type:mb-8px">
			<span class="text-16 text-grey-60 font-normal whitespace-nowrap w-250px overflow-hidden text-ellipsis">{{ endpointSecret?.value || '' }}</span>
			<convoy-copy-button [text]="endpointSecret?.value || ''"></convoy-copy-button>
		</div>
		<convoy-button size="xs" type="text" color="danger" *ngIf="!showExpireSecret" (clickItem)="showExpireSecret = true">Expire Secret</convoy-button>

		<ng-container *ngIf="showExpireSecret">
			<form [formGroup]="expireSecretForm" class="mt-24px">
				<convoy-select
					label="Expiry duration"
					name="expiration"
					formControlName="expiration"
					[options]="expirationDates"
					errorMessage="Please select an expiry duration"
					[required]="true"
					(selectedOption)="expireSecretForm.patchValue({ expiration: $event })"
				></convoy-select>
			</form>
		</ng-container>

		<div class="flex justify-end mt-38px mb-140px" *ngIf="showExpireSecret">
			<convoy-button type="outline" className="mr-16px transition-all duration-300 hover:text-danger-100 hover:border-danger-100" (clickItem)="showEndpointSecret = false" *ngIf="showExpireSecret">Cancel</convoy-button>
			<convoy-button color="danger" className="mr-16px" *ngIf="showExpireSecret" (clickItem)="expireSecret()">Expire Secret</convoy-button>
			<convoy-button (clickItem)="showExpireSecret = false" *ngIf="!showExpireSecret">Done</convoy-button>
		</div>
	</div>
</convoy-modal> -->

<!-- delete modal  -->
<!-- <app-delete-modal *ngIf="showDeleteModal" [isLoading]="isDeletingEndpoint" [deleteText]="'delete “' + selectedEndpoint?.description + '”'" (closeModal)="showDeleteModal = false" (deleteData)="deleteEndpoint()"></app-delete-modal> -->
