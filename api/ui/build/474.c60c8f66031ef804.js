"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[474],{3117:(M,C,l)=>{l.d(C,{A:()=>e});var i=l(7073),n=l(4151);const d=["convoy-card",""],b=["*"];let e=(()=>{class g{constructor(){this.hover="false",this.color="default"}ngOnInit(){}get classes(){return`${{default:"bg-[#fff] border border-grey-10",danger:"bg-danger-500 border border-danger-200"}[this.color]} ${"true"===this.hover?"focus:shadow-sm hover:shadow-sm focus-visible:shadow-sm hover:border-grey-20 focus:border-grey-20 focus-visible:border-grey-20 outline-none":""} block`}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275cmp=n.Xpm({type:g,selectors:[["","convoy-card",""]],hostAttrs:[1,"rounded-8px"],hostVars:2,hostBindings:function(h,c){2&h&&n.Tol(c.classes)},inputs:{hover:"hover",color:"color"},standalone:!0,features:[n.jDz],attrs:d,ngContentSelectors:b,decls:1,vars:0,template:function(h,c){1&h&&(n.F$t(),n.Hsn(0))},dependencies:[i.ez],encapsulation:2}),g})()},2065:(M,C,l)=>{l.d(C,{s:()=>T});var i=l(7073),n=l(4151),d=l(1354);function b(s,v){if(1&s&&n._UZ(0,"img",6),2&s){const _=n.oxw();n.Q6J("src",_.imgSrc,n.LSH)}}function e(s,v){if(1&s&&(n.TgZ(0,"h2",7),n._uU(1),n.qZA()),2&s){const _=n.oxw();n.xp6(1),n.Oqu(_.heading)}}function g(s,v){if(1&s&&(n.TgZ(0,"p",8),n._uU(1),n.qZA()),2&s){const _=n.oxw();n.xp6(1),n.Oqu(_.description)}}function x(s,v){if(1&s){const _=n.EpF();n.TgZ(0,"button",9),n.NdJ("click",function(){n.CHM(_);const I=n.oxw();return n.KtG(I.onAction.emit())}),n._uU(1),n.qZA()}if(2&s){const _=n.oxw();n.xp6(1),n.Oqu(_.buttonText)}}const h=[[["","emptyStateCTA",""]]],c=["[emptyStateCTA]"];let T=(()=>{class s{constructor(){this.onAction=new n.vpe}ngOnInit(){}}return s.\u0275fac=function(_){return new(_||s)},s.\u0275cmp=n.Xpm({type:s,selectors:[["convoy-empty-state"],["","convoy-empty-state",""]],inputs:{imgSrc:"imgSrc",heading:"heading",description:"description",buttonText:"buttonText"},outputs:{onAction:"onAction"},standalone:!0,features:[n.jDz],ngContentSelectors:c,decls:7,vars:4,consts:[[1,"flex","flex-col","items-center","justify-center"],["alt","empty state","class","mb-46px max-h-[156px]",3,"src",4,"ngIf"],["class","font-semibold mb-14px text-center",4,"ngIf"],["class","text-14 text-grey-60 w-full max-w-[600px] text-center mt-8px",4,"ngIf"],["convoy-button","","class","mt-22px",3,"click",4,"ngIf"],[1,"empty:hidden"],["alt","empty state",1,"mb-46px","max-h-[156px]",3,"src"],[1,"font-semibold","mb-14px","text-center"],[1,"text-14","text-grey-60","w-full","max-w-[600px]","text-center","mt-8px"],["convoy-button","",1,"mt-22px",3,"click"]],template:function(_,y){1&_&&(n.F$t(h),n.TgZ(0,"div",0),n.YNc(1,b,1,1,"img",1),n.YNc(2,e,2,1,"h2",2),n.YNc(3,g,2,1,"p",3),n.YNc(4,x,2,1,"button",4),n.TgZ(5,"div",5),n.Hsn(6),n.qZA()()),2&_&&(n.xp6(1),n.Q6J("ngIf",y.imgSrc),n.xp6(1),n.Q6J("ngIf",y.heading),n.xp6(1),n.Q6J("ngIf",y.description),n.xp6(1),n.Q6J("ngIf",y.buttonText))},dependencies:[i.ez,i.O5,d.r],encapsulation:2}),s})()},9767:(M,C,l)=>{l.d(C,{A:()=>e,Bh:()=>g,R4:()=>x,ac:()=>b,xh:()=>h});var i=l(7073),n=l(4151);const d=["*"];let b=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275dir=n.lG2({type:c,selectors:[["convoy-table"],["","convoy-table",""]],hostAttrs:["id","table",1,"w-full","h-fit","text-grey-80"],standalone:!0}),c})(),e=(()=>{class c{constructor(){this.forDate=!1}ngOnInit(){}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["convoy-table-cell"],["","convoy-table-cell",""]],hostAttrs:[1,"p-0"],inputs:{forDate:"forDate"},standalone:!0,features:[n.jDz],ngContentSelectors:d,decls:2,vars:2,consts:[[1,"flex","flex-row","items-center"]],template:function(s,v){1&s&&(n.F$t(),n.TgZ(0,"div",0),n.Hsn(1),n.qZA()),2&s&&n.Tol(v.forDate?"pt-16px pl-16px pb-8px !text-12 text-grey-40":"pt-12px pb-12px whitespace-nowrap text-14")},dependencies:[i.ez],encapsulation:2}),c})(),g=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["convoy-table-head"],["","convoy-table-head",""]],hostAttrs:[1,"bg-primary-500"],inputs:{class:["className","class"]},standalone:!0,features:[n.jDz],ngContentSelectors:d,decls:2,vars:0,template:function(s,v){1&s&&(n.F$t(),n.TgZ(0,"tr"),n.Hsn(1),n.qZA())},dependencies:[i.ez],encapsulation:2}),c})(),x=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275dir=n.lG2({type:c,selectors:[["convoy-table-head-cell"],["","convoy-table-head-cell",""]],hostAttrs:["scope","col",1,"text-left","whitespace-nowrap","pt-10px","pb-10px","font-medium","text-12","uppercase"],inputs:{class:["className","class"]},standalone:!0}),c})(),h=(()=>{class c{constructor(){this.forDate=!1,this.active=!1}ngOnInit(){}get getClassNames(){return`${this.forDate?"border-t border-grey-10 ":"hover:bg-primary-500 transition-all duration-300"} ${this.active?"bg-primary-500":""}`}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275dir=n.lG2({type:c,selectors:[["convoy-table-row"],["","convoy-table-row",""]],hostAttrs:[1,"cursor-pointer"],hostVars:2,hostBindings:function(s,v){2&s&&n.Tol(v.getClassNames)},inputs:{forDate:"forDate",active:"active"},standalone:!0}),c})()},5454:(M,C,l)=>{l.d(C,{z:()=>e});var i=l(7073),n=l(4151),d=l(1354),b=l(385);let e=(()=>{class g{constructor(){this.closeModal=new n.vpe,this.deleteData=new n.vpe,this.isLoading=!1}ngOnInit(){}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275cmp=n.Xpm({type:g,selectors:[["app-delete-modal"]],inputs:{isLoading:"isLoading",deleteText:"deleteText",deleteButtonText:"deleteButtonText"},outputs:{closeModal:"closeModal",deleteData:"deleteData"},standalone:!0,features:[n.jDz],decls:11,vars:3,consts:[["convoy-modal","","position","center","size","sm",3,"closeModal"],[1,"flex","flex-col","justify-center","items-center","px-20px","py-30px"],["src","/assets/img/warning.gif","alt","warning",1,"h-[126px]","w-[126px]"],[1,"text-16","font-semibold","text-black","mb-8px","text-center"],[1,"text-14","font-medium","text-grey-40","mb-20px"],["convoy-button","","color","danger",1,"mb-24px",3,"disabled","click"],["convoy-button","","fill","text",1,"font-semibold",3,"click"]],template:function(h,c){1&h&&(n.TgZ(0,"div",0),n.NdJ("closeModal",function(){return c.closeModal.emit()}),n.TgZ(1,"div",1),n._UZ(2,"img",2),n.TgZ(3,"p",3),n._uU(4),n.qZA(),n.TgZ(5,"p",4),n._uU(6,"This action is irrevesible."),n.qZA(),n.TgZ(7,"button",5),n.NdJ("click",function(){return c.deleteData.emit()}),n._uU(8),n.qZA(),n.TgZ(9,"button",6),n.NdJ("click",function(){return c.closeModal.emit()}),n._uU(10,"No, Cancel"),n.qZA()()()),2&h&&(n.xp6(4),n.hij("Are you sure you want to ",c.deleteText,"?"),n.xp6(3),n.Q6J("disabled",c.isLoading),n.xp6(1),n.Oqu(c.deleteButtonText?"Yes, "+c.deleteButtonText:"Yes, Delete"))},dependencies:[i.ez,b.zS,d.r]}),g})()},4600:(M,C,l)=>{l.d(C,{X:()=>T});var i=l(4151),n=l(7073),d=l(9767),b=l(545);function e(s,v){if(1&s&&(i.TgZ(0,"th",6),i._uU(1),i.qZA()),2&s){const _=v.$implicit;i.Tol(0===v.index?"pl-16px uppercase":"uppercase"),i.xp6(1),i.Oqu(_)}}function g(s,v){1&s&&i._UZ(0,"td",8),2&s&&i.Q6J("forDate",!0)}function x(s,v){if(1&s&&(i.TgZ(0,"tr",7)(1,"td",8),i._UZ(2,"convoy-skeleton-loader",9),i.qZA(),i.YNc(3,g,1,1,"td",10),i.qZA()),2&s){const _=i.oxw();i.Q6J("forDate",!0),i.xp6(1),i.Q6J("forDate",!0),i.xp6(2),i.Q6J("ngForOf",_.tableHead.slice(1))}}function h(s,v){1&s&&(i.TgZ(0,"td",15),i._UZ(1,"convoy-skeleton-loader",16),i.qZA())}function c(s,v){if(1&s&&(i.TgZ(0,"tr",11)(1,"td",12),i._UZ(2,"convoy-skeleton-loader",13),i.qZA(),i.YNc(3,h,2,0,"td",14),i.qZA()),2&s){const _=i.oxw();i.xp6(3),i.Q6J("ngForOf",_.tableHead.slice(1))}}let T=(()=>{class s{constructor(){this.withDate=!0,this.loaderIndex=[0,1,2,3,4]}ngOnInit(){}}return s.\u0275fac=function(_){return new(_||s)},s.\u0275cmp=i.Xpm({type:s,selectors:[["convoy-table-loader"]],inputs:{tableHead:"tableHead",withDate:"withDate"},decls:7,vars:3,consts:[[1,"min-h-[60vh]","border-none"],["convoy-table",""],["convoy-table-head",""],["convoy-table-head-cell","",3,"class",4,"ngFor","ngForOf"],["convoy-table-row","",3,"forDate",4,"ngIf"],["convoy-table-row","",4,"ngFor","ngForOf"],["convoy-table-head-cell",""],["convoy-table-row","",3,"forDate"],["convoy-table-cell","",3,"forDate"],["className","w-160px h-20px"],["convoy-table-cell","",3,"forDate",4,"ngFor","ngForOf"],["convoy-table-row",""],["convoy-table-cell","",1,"pl-16px"],["className","w-120px h-20px"],["convoy-table-cell","",4,"ngFor","ngForOf"],["convoy-table-cell",""],["className","w-100px h-20px"]],template:function(_,y){1&_&&(i.TgZ(0,"div",0)(1,"table",1)(2,"thead",2),i.YNc(3,e,2,3,"th",3),i.qZA(),i.TgZ(4,"tbody"),i.YNc(5,x,4,3,"tr",4),i.YNc(6,c,4,1,"tr",5),i.qZA()()()),2&_&&(i.xp6(3),i.Q6J("ngForOf",y.tableHead),i.xp6(2),i.Q6J("ngIf",y.withDate),i.xp6(1),i.Q6J("ngForOf",y.loaderIndex))},dependencies:[n.sg,n.O5,d.ac,d.R4,d.A,d.xh,d.Bh,b.t]}),s})()},8461:(M,C,l)=>{l.d(C,{_:()=>e});var i=l(7073),n=l(9767),d=l(545),b=l(4151);let e=(()=>{class g{}return g.\u0275fac=function(h){return new(h||g)},g.\u0275mod=b.oAB({type:g}),g.\u0275inj=b.cJS({imports:[i.ez,n.A,n.Bh,d.t]}),g})()},5474:(M,C,l)=>{l.r(C),l.d(C,{TeamsModule:()=>V});var i=l(7073),n=l(9369),d=l(6907),b=l(7888),e=l(4151),g=l(4330),x=l(7205),h=l(3755),c=l(6440);let T=(()=>{class r{constructor(t,o){this.http=t,this.privateService=o}getTeamMembers(t){var o=this;return new Promise(function(){var a=(0,n.Z)(function*(m,p){try{return m(yield o.http.request({url:"/members",method:"get",level:"org",query:t}))}catch(f){return p(f)}});return function(m,p){return a.apply(this,arguments)}}())}getPendingTeamMembers(t){var o=this;return new Promise(function(){var a=(0,n.Z)(function*(m,p){try{return m(yield o.http.request({url:"/invites/pending",method:"get",level:"org",query:t}))}catch(f){return p(f)}});return function(m,p){return a.apply(this,arguments)}}())}resendPendingInvite(t){var o=this;return new Promise(function(){var a=(0,n.Z)(function*(m,p){try{return m(yield o.http.request({url:`/invites/${t}/resend`,method:"post",body:null,level:"org"}))}catch(f){return p(f)}});return function(m,p){return a.apply(this,arguments)}}())}cancelPendingInvite(t){var o=this;return new Promise(function(){var a=(0,n.Z)(function*(m,p){try{return m(yield o.http.request({url:`/invites/${t}/cancel`,method:"post",body:null,level:"org"}))}catch(f){return p(f)}});return function(m,p){return a.apply(this,arguments)}}())}inviteUserToOrganisation(t){var o=this;return new Promise(function(){var a=(0,n.Z)(function*(m,p){try{return m(yield o.http.request({url:"/invites",body:t,method:"post",level:"org"}))}catch(f){return p(f)}});return function(m,p){return a.apply(this,arguments)}}())}deactivateTeamMember(t){var o=this;return new Promise(function(){var a=(0,n.Z)(function*(m,p){try{return m(yield o.http.request({url:`/members/${t.memberId}`,method:"delete",level:"org"}))}catch(f){return p(f)}});return function(m,p){return a.apply(this,arguments)}}())}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(h.O),e.LFG(c.i))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var s=l(4600),v=l(5454),_=l(2895),y=l(385),I=l(1354),A=l(130),O=l(2065),D=l(3117),Z=l(9767),F=l(1616),w=l(2187);function q(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(a){e.CHM(t);const m=e.oxw();return e.KtG(m.searchTeam({searchInput:a}))}),e._UZ(1,"img",22),e.qZA()}}function S(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"li",23)(1,"button",24),e.NdJ("click",function(){const m=e.CHM(t).$implicit,p=e.oxw();return p.toggleFilter(m),e.KtG(p.dropdownComponent.show=!1)}),e._uU(2),e.qZA()()}if(2&r){const t=u.$implicit,o=e.oxw();e.Q6J("active",o.selectedFilterOption==t?"true":"false"),e.xp6(2),e.hij("",t," Invites")}}function N(r,u){if(1&r&&(e.ynx(0),e.TgZ(1,"div",25),e._UZ(2,"convoy-table-loader",26),e.qZA(),e.BQk()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("withDate",!1)("tableHead",t.tableHead)}}const U=function(r){return{"pl-20px":r}};function Q(r,u){if(1&r&&(e.TgZ(0,"th",39),e._uU(1),e.qZA()),2&r){const t=u.$implicit;e.Q6J("ngClass",e.VKq(2,U,0===u.index)),e.xp6(1),e.Oqu(t)}}function B(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"tr",40)(1,"td",41),e._UZ(2,"convoy-badge",42),e.qZA(),e.TgZ(3,"td",43),e._uU(4),e.qZA(),e.TgZ(5,"td",43),e._uU(6,"All projects"),e.qZA(),e.TgZ(7,"td",43)(8,"div",44)(9,"button",45),e._UZ(10,"img",46),e.qZA(),e.TgZ(11,"ul",14)(12,"li")(13,"button",47),e.NdJ("click",function(){const m=e.CHM(t).$implicit,p=e.oxw(2);return p.showDeactivateModal=!p.showDeactivateModal,p.selectedMember=m,p.currentId="",e.KtG(p.showOverlay=!1)}),e._uU(14,"Deactivate team member"),e.qZA()()()()()()}if(2&r){const t=u.$implicit;e.Q6J("id","team"+u.index),e.xp6(2),e.Q6J("text",(null==t||null==t.user_metadata?null:t.user_metadata.first_name)+" "+(null==t||null==t.user_metadata?null:t.user_metadata.last_name)),e.xp6(2),e.hij(" ","super_user"===t.role.type?"Super user":t.role.type," ")}}const P=function(r){return{page:r}};function L(r,u){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"div",27)(3,"table",28)(4,"thead",29),e.YNc(5,Q,2,4,"th",30),e.qZA(),e.TgZ(6,"tbody"),e.YNc(7,B,15,3,"tr",31),e.qZA()()()(),e.TgZ(8,"div",32)(9,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.fetchTeamMembers({page:a.teams.pagination.prev}))}),e.O4$(),e.TgZ(10,"svg",34),e._UZ(11,"use",35),e.qZA(),e._uU(12," Previous "),e.qZA(),e.kcU(),e.TgZ(13,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.fetchTeamMembers({page:a.teams.pagination.next}))}),e._uU(14," Next "),e.O4$(),e.TgZ(15,"svg",37),e._UZ(16,"use",38),e.qZA()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.tableHead),e.xp6(2),e.Q6J("ngForOf",null==t.teams?null:t.teams.content),e.xp6(2),e.Q6J("queryParams",e.VKq(6,P,t.teams.pagination.prev))("disabled",0===t.teams.pagination.prev),e.xp6(4),e.Q6J("queryParams",e.VKq(8,P,t.teams.pagination.next))("disabled",0===t.teams.pagination.next)}}function H(r,u){if(1&r&&(e.TgZ(0,"th",39),e._uU(1),e.qZA()),2&r){const t=u.$implicit,o=u.index,a=e.oxw(2);e.Q6J("ngClass",e.VKq(2,U,0===o)),e.xp6(1),e.Oqu("pending"===a.selectedFilterOption&&"Name"===t?"Email":t)}}function K(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"tr",50)(1,"td",41),e._uU(2),e.qZA(),e.TgZ(3,"td",43),e._uU(4),e.qZA(),e.TgZ(5,"td",43),e._uU(6,"All projects"),e.qZA(),e.TgZ(7,"td",43)(8,"div",51)(9,"button",45),e._UZ(10,"img",46),e.qZA(),e.TgZ(11,"ul",14)(12,"li",52)(13,"button",53),e.NdJ("click",function(){const m=e.CHM(t).$implicit,p=e.oxw(2);return p.resendInvite(m.uid),e.KtG(p.currentId="")}),e._uU(14,"Resend Invite"),e.qZA()(),e.TgZ(15,"li")(16,"button",47),e.NdJ("click",function(){const m=e.CHM(t).$implicit,p=e.oxw(2);return p.showCancelInviteModal=!0,p.selectedMember=m,e.KtG(p.showPendingInvitesDropdown=!1)}),e._uU(17,"Cancel Invite"),e.qZA()()()()()()}if(2&r){const t=u.$implicit;e.Q6J("id","pendingInvite"+u.index),e.xp6(2),e.hij(" ",t.invitee_email," "),e.xp6(2),e.Oqu("super_user"===t.role.type?"Super user":t.role.type)}}const E=function(r){return{pendingInvitePage:r}};function k(r,u){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",48)(2,"table",28)(3,"thead",29),e.YNc(4,H,2,4,"th",30),e.qZA(),e.TgZ(5,"tbody"),e.YNc(6,K,18,3,"tr",49),e.qZA()()(),e.TgZ(7,"div",32)(8,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.fetchPendingTeamMembers({page:a.pendingInvites.pagination.prev}))}),e.O4$(),e.TgZ(9,"svg",34),e._UZ(10,"use",35),e.qZA(),e._uU(11," Previous "),e.qZA(),e.kcU(),e.TgZ(12,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.fetchPendingTeamMembers({page:a.pendingInvites.pagination.next}))}),e._uU(13," Next "),e.O4$(),e.TgZ(14,"svg",34),e._UZ(15,"use",38),e.qZA()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.tableHead),e.xp6(2),e.Q6J("ngForOf",null==t.pendingInvites?null:t.pendingInvites.content),e.xp6(2),e.Q6J("queryParams",e.VKq(6,E,t.pendingInvites.pagination.prev))("disabled",0===t.pendingInvites.pagination.prev),e.xp6(4),e.Q6J("queryParams",e.VKq(8,E,t.pendingInvites.pagination.next))("disabled",0===t.pendingInvites.pagination.next)}}function Y(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div",54)(1,"div",55),e.NdJ("onAction",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openCreateTeamModal())}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("buttonText",t.searchString?"":"Add team member")("heading",t.searchString?"You have no one with the name "+t.searchString+" on your team":"active"===t.selectedFilterOption?"You have no one on your team yet":"You have no pending invites")("description",t.searchString?"":"You can invite team members to join your organization and assign them roles to projects")}}function z(r,u){1&r&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Please enter a valid email"),e.qZA())}function R(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div",56),e.NdJ("closeModal",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goToTeams())}),e.TgZ(1,"div",57)(2,"h2",58),e._uU(3,"Add Team Member"),e.qZA(),e.TgZ(4,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goToTeams())}),e._UZ(5,"img",60),e.qZA()(),e.TgZ(6,"form",61),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.inviteUser())}),e.TgZ(7,"convoy-input-field")(8,"label",62),e._uU(9,"Email"),e.qZA(),e._UZ(10,"input",63),e.YNc(11,z,2,0,"convoy-input-error",17),e.qZA(),e.TgZ(12,"div",64)(13,"button",65),e._uU(14,"Discard"),e.qZA(),e.TgZ(15,"button",66),e._uU(16),e.qZA()()()()}if(2&r){const t=e.oxw();let o;e.xp6(6),e.Q6J("formGroup",t.inviteUserForm),e.xp6(5),e.Q6J("ngIf",(null==(o=t.inviteUserForm.get("invitee_email"))?null:o.touched)&&(null==(o=t.inviteUserForm.get("invitee_email"))?null:o.invalid)),e.xp6(4),e.Q6J("disabled",t.invitingUser),e.xp6(1),e.hij(" ",t.invitingUser?"Inviting User..":"Send Invite"," ")}}function G(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"app-delete-modal",67),e.NdJ("closeModal",function(){e.CHM(t);const a=e.oxw();return a.showDeactivateModal=!1,e.KtG(a.showCancelInviteModal=!1)})("deleteData",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showCancelInviteModal?a.cancelInvite():a.deactivateMember())}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("isLoading",t.deactivatingUser||t.cancelingInvite)("deleteText",t.showCancelInviteModal?"cancel this invite":"deactivate \u201c"+(null==t.selectedMember||null==t.selectedMember.user_metadata?null:t.selectedMember.user_metadata.first_name)+" "+(null==t.selectedMember||null==t.selectedMember.user_metadata?null:t.selectedMember.user_metadata.last_name)+"\u201d")("deleteButtonText",t.showCancelInviteModal?"Cancel Invite":"Deactivate")}}const j=function(){return{standalone:!0}};let J=(()=>{class r{constructor(t,o,a,m,p){this.generalService=t,this.router=o,this.route=a,this.teamService=m,this.formBuilder=p,this.tableHead=["Name","Role","Projects",""],this.filterOptions=["active","pending"],this.showInviteTeamMemberModal=this.router.url.split("/")[2]?.includes("new"),this.showDeactivateModal=!1,this.showCancelInviteModal=!1,this.cancelingInvite=!1,this.isFetchingTeamMembers=!1,this.isFetchingPendingInvites=!1,this.deactivatingUser=!1,this.selectedFilterOption="active",this.showOverlay=!1,this.noData=!1,this.noInvitesData=!1,this.showFilterDropdown=!1,this.invitingUser=!1,this.showPendingInvitesDropdown=!1,this.inviteUserForm=this.formBuilder.group({invitee_email:["",d.kI.compose([d.kI.required,d.kI.email])],role:this.formBuilder.group({type:["super_user",d.kI.required]})})}ngOnInit(){this.toggleFilter(this.route.snapshot.queryParams?.inviteType??"active")}fetchTeamMembers(t){var o=this;return(0,n.Z)(function*(){o.isFetchingTeamMembers=!0;const a=t?.page||o.route.snapshot.queryParams.page||1;try{const m=yield o.teamService.getTeamMembers({page:a,q:t?.searchString});o.teams=m.data,o.noData=0===m.data.content.length,o.isFetchingTeamMembers=!1}catch{o.isFetchingTeamMembers=!1}})()}toggleFilter(t){this.selectedFilterOption=t,"active"===this.selectedFilterOption?this.fetchTeamMembers():this.fetchPendingTeamMembers(),this.router.url.split("/")[2]||this.addFilterToUrl()}fetchPendingTeamMembers(t){var o=this;return(0,n.Z)(function*(){o.isFetchingPendingInvites=!0;const a=t?.page||o.route.snapshot.queryParams.pendingInvites||1;try{const m=yield o.teamService.getPendingTeamMembers({page:a});o.pendingInvites=m.data,o.noInvitesData=!m.data.content,o.isFetchingPendingInvites=!1}catch{o.isFetchingPendingInvites=!1}})()}searchTeam(t){this.fetchTeamMembers({searchString:t?.searchInput?.target?.value||this.searchString})}deactivateMember(){var t=this;return(0,n.Z)(function*(){if(!t.selectedMember)return;t.deactivatingUser=!0;const o={memberId:t.selectedMember?.uid};try{const a=yield t.teamService.deactivateTeamMember(o);t.showDeactivateModal=!1,t.generalService.showNotification({style:"success",message:a.message}),t.fetchTeamMembers(),t.deactivatingUser=!1}catch{t.deactivatingUser=!1}})()}addFilterToUrl(){const t={};t.inviteType=this.selectedFilterOption,this.router.navigate([],{queryParams:Object.assign({},t)})}inviteUser(){var t=this;return(0,n.Z)(function*(){if(t.inviteUserForm.invalid)return t.inviteUserForm.markAsTouched();t.invitingUser=!0;try{const o=yield t.teamService.inviteUserToOrganisation(t.inviteUserForm.value);t.generalService.showNotification({message:o.message,style:"success"}),t.inviteUserForm.reset(),t.invitingUser=!1,t.router.navigate(["/team"],{queryParams:{inviteType:"pending"}})}catch{t.invitingUser=!1}})()}resendInvite(t){var o=this;return(0,n.Z)(function*(){try{const a=yield o.teamService.resendPendingInvite(t);o.generalService.showNotification({message:a.message,style:"success"}),o.fetchPendingTeamMembers()}catch{}})()}cancelInvite(){var t=this;return(0,n.Z)(function*(){if(t.selectedMember){t.cancelingInvite=!0;try{const o=yield t.teamService.cancelPendingInvite(t.selectedMember.uid);t.generalService.showNotification({message:o.message,style:"success"}),t.fetchPendingTeamMembers(),t.currentId="",t.showCancelInviteModal=!1,t.cancelingInvite=!1}catch{t.cancelingInvite=!1}}})()}goToTeams(){this.router.navigateByUrl("/team")}openCreateTeamModal(){this.router.navigateByUrl("/team/new")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.m),e.Y36(x.F0),e.Y36(x.gz),e.Y36(T),e.Y36(d.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-teams"]],viewQuery:function(t,o){if(1&t&&e.Gf(b.J,5),2&t){let a;e.iGM(a=e.CRH())&&(o.dropdownComponent=a.first)}},decls:29,vars:12,consts:[["convoy-page","",1,"pb-2"],[1,"flex","justify-between","items-center"],[1,"mb-2","font-semibold"],[1,"text-grey-40","text-14","font-medium","mb-24px"],[1,"flex","flex-row","items-center"],[1,"border","border-primary-400","h-36px","px-14px","py-0","max-w-[350px]","w-full","rounded-[10px]","flex","items-center","bg-white-100"],["src","/assets/img/search-icon.svg","alt","search icon",1,"mr-10px"],["type","search","placeholder","Search team member",1,"w-full","text-grey-40","text-14","outline-none",3,"ngModel","ngModelOptions","ngModelChange","change"],["convoy-button","","fill","clear","class","transition-all duration-200 !p-0",3,"click",4,"ngIf"],["convoy-dropdown","","size","sm"],["dropdownTrigger","","convoy-button","","size","sm","fill","outline","color","grey",1,"px-10px","border","border-primary-400","mx-16px","min-w-[180px]","whitespace-nowrap","justify-between","h-36px"],[1,"text-grey-40","text-12","mr-4px"],[1,"text-primary-100","text-12","capitalize"],["src","/assets/img/angle-arrow-down.svg","alt","arrow down icon",1,"w-[16px]","ml-8px"],["dropdownOptions",""],["class","px-20px","convoy-list-item","","convoy-dropdown-option","",3,"active",4,"ngFor","ngForOf"],["convoy-button","","size","sm",1,"min-w-[150px]","h-36px",3,"click"],[4,"ngIf"],["convoy-card","","class","py-100px",4,"ngIf"],["convoy-modal","",3,"closeModal",4,"ngIf"],[3,"isLoading","deleteText","deleteButtonText","closeModal","deleteData",4,"ngIf"],["convoy-button","","fill","clear",1,"transition-all","duration-200","!p-0",3,"click"],["src","/assets/img/enter-icon.png","alt","enter icon",1,"w-16px"],["convoy-list-item","","convoy-dropdown-option","",1,"px-20px",3,"active"],["convoy-button","","fill","text",1,"w-full","text-12","text-black","!justify-start","capitalize",3,"click"],["convoy-card",""],[3,"withDate","tableHead"],[1,"min-h-[70vh]"],["convoy-table",""],["convoy-table-head",""],["convoy-table-head-cell","",3,"ngClass",4,"ngFor","ngForOf"],["convoy-table-row","","class","border border-primary-500",3,"id",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-16px"],["convoy-button","","fill","outline","size","sm","routerLink","./",1,"pl-4px","pr-16px","py-4px","border-primary-300",3,"queryParams","disabled","click"],["width","24","height","24",1,"mr-8px","fill-primary-100"],[0,"xlink","href","#arrow-left-icon"],["convoy-button","","fill","outline","size","sm","routerLink","./",1,"pr-4px","pl-16px","py-4px","border-primary-300","ml-16px",3,"queryParams","disabled","click"],["width","24","height","24",1,"ml-8px","fill-primary-100"],[0,"xlink","href","#arrow-right-icon"],["convoy-table-head-cell","",3,"ngClass"],["convoy-table-row","",1,"border","border-primary-500",3,"id"],["convoy-table-cell","",1,"pl-20px"],["texture","dark",3,"text"],["convoy-table-cell",""],["convoy-dropdown","","size","lg"],["dropdownTrigger","","convoy-button","","size","sm","fill","clear"],["src","/assets/img/nav-bar-more-primary.svg","alt","more icon"],["convoy-dropdown-option","","convoy-button","","fill","clear","color","danger",1,"w-full",3,"click"],["convoy-card","",1,"min-h-[70vh]"],["convoy-table-row","",3,"id",4,"ngFor","ngForOf"],["convoy-table-row","",3,"id"],["convoy-dropdown",""],[1,"border-b","border-b-grey-10"],["convoy-dropdown-option","","convoy-button","","fill","clear","color","grey",1,"w-full",3,"click"],["convoy-card","",1,"py-100px"],["convoy-empty-state","","imgSrc","/assets/img/teams-empty-state.png",3,"buttonText","heading","description","onAction"],["convoy-modal","",3,"closeModal"],["convoy-modal-header",""],[1,"font-semibold","capitalize"],["convoy-button","","texture","light","size","sm",1,"px-8px","!py-10px",3,"click"],["src","/assets/img/modal-close-icon.svg","alt","close icon"],[1,"p-20px",3,"formGroup","ngSubmit"],["for","email","convoy-label","","required","true"],["type","email","id","email","convoy-input","","autocomplete","email","formControlName","invitee_email","placeholder","Enter member email"],[1,"flex","justify-end","pt-24px","pb-40px"],["convoy-button","","fill","outline","type","button","routerLink","/team"],["convoy-button","",1,"ml-16px",3,"disabled"],[3,"isLoading","deleteText","deleteButtonText","closeModal","deleteData"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h3",2),e._uU(4,"Teams"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"View and manage your team members."),e.qZA()(),e.TgZ(7,"div",4)(8,"form",5),e._UZ(9,"img",6),e.TgZ(10,"input",7),e.NdJ("ngModelChange",function(m){return o.searchString=m})("change",function(m){return o.searchTeam({searchInput:m})}),e.qZA(),e.YNc(11,q,2,0,"button",8),e.qZA(),e.TgZ(12,"div",9)(13,"button",10)(14,"span",11),e._uU(15,"Filter By:"),e.qZA(),e.TgZ(16,"span",12),e._uU(17),e.qZA(),e._UZ(18,"img",13),e.qZA(),e.TgZ(19,"ul",14),e.YNc(20,S,3,2,"li",15),e.qZA()(),e.TgZ(21,"button",16),e.NdJ("click",function(){return o.openCreateTeamModal(),o.currentId=""}),e._uU(22,"Add team member"),e.qZA()()(),e.YNc(23,N,3,2,"ng-container",17),e.YNc(24,L,17,10,"ng-container",17),e.YNc(25,k,16,10,"ng-container",17),e.YNc(26,Y,2,3,"div",18),e.qZA(),e.YNc(27,R,17,4,"div",19),e.YNc(28,G,1,3,"app-delete-modal",20)),2&t&&(e.xp6(10),e.Q6J("ngModel",o.searchString)("ngModelOptions",e.DdM(11,j)),e.xp6(1),e.Q6J("ngIf",o.searchString&&o.searchString.length>0),e.xp6(6),e.hij("",o.selectedFilterOption," Invites"),e.xp6(3),e.Q6J("ngForOf",o.filterOptions),e.xp6(3),e.Q6J("ngIf","active"===o.selectedFilterOption&&o.isFetchingTeamMembers||"pending"===o.selectedFilterOption&&o.isFetchingPendingInvites),e.xp6(1),e.Q6J("ngIf","active"===o.selectedFilterOption&&!o.isFetchingTeamMembers&&!o.noData),e.xp6(1),e.Q6J("ngIf","pending"===o.selectedFilterOption&&!o.isFetchingPendingInvites&&!o.noInvitesData),e.xp6(1),e.Q6J("ngIf",("active"===o.selectedFilterOption&&o.noData||"pending"===o.selectedFilterOption&&o.noInvitesData)&&(!o.isFetchingTeamMembers||!o.isFetchingPendingInvites)),e.xp6(1),e.Q6J("ngIf",o.showInviteTeamMemberModal),e.xp6(1),e.Q6J("ngIf",o.showDeactivateModal||o.showCancelInviteModal))},dependencies:[i.mk,i.sg,i.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,s.X,d.sg,d.u,v.z,_.i,y.zS,y.Rb,b.J,I.r,A.F,O.s,D.A,Z.ac,Z.Bh,Z.R4,Z.A,Z.xh,x.rH,F.G,w.uZ,w.wo,w.Vd,w._n,b.o]}),r})();var $=l(8461);const W=[{path:"",component:J},{path:"new",component:J}];let V=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[i.ez,d.u5,$._,d.UX,v.z,y.zS,y.Rb,b.J,I.r,A.F,O.s,D.A,Z.Bh,Z.A,x.Bz.forChild(W),F.G,w.wo,w._n]}),r})()}}]);
//# sourceMappingURL=474.c60c8f66031ef804.js.map