"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[738],{2516:(E,Z,a)=>{a.d(Z,{R:()=>p});var f=a(9264),l=a(9861),T=a(18),e=a(3927);function p(r,_,u,o){return(0,T.m)(u)&&(o=u,u=void 0),o?p(r,_,u).pipe((0,e.U)(i=>(0,l.k)(i)?o(...i):o(i))):new f.y(i=>{g(r,_,function c(x){i.next(arguments.length>1?Array.prototype.slice.call(arguments):x)},i,u)})}function g(r,_,u,o,i){let c;if(function b(r){return r&&"function"==typeof r.addEventListener&&"function"==typeof r.removeEventListener}(r)){const x=r;r.addEventListener(_,u,i),c=()=>x.removeEventListener(_,u,i)}else if(function m(r){return r&&"function"==typeof r.on&&"function"==typeof r.off}(r)){const x=r;r.on(_,u),c=()=>x.off(_,u)}else if(function h(r){return r&&"function"==typeof r.addListener&&"function"==typeof r.removeListener}(r)){const x=r;r.addListener(_,u),c=()=>x.removeListener(_,u)}else{if(!r||!r.length)throw new TypeError("Invalid event target");for(let x=0,C=r.length;x<C;x++)g(r[x],_,u,o,i)}o.add(c)}},3940:(E,Z,a)=>{a.d(Z,{b:()=>m});var f=a(1003),l=a(8109);class T extends l.w{constructor(o,i){super()}schedule(o,i=0){return this}}let D=(()=>{class u{constructor(i,c=u.now){this.SchedulerAction=i,this.now=c}schedule(i,c=0,x){return new this.SchedulerAction(this,i).schedule(x,c)}}return u.now=()=>Date.now(),u})();class p extends D{constructor(o,i=D.now){super(o,()=>p.delegate&&p.delegate!==this?p.delegate.now():i()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(o,i=0,c){return p.delegate&&p.delegate!==this?p.delegate.schedule(o,i,c):super.schedule(o,i,c)}flush(o){const{actions:i}=this;if(this.active)return void i.push(o);let c;this.active=!0;do{if(c=o.execute(o.state,o.delay))break}while(o=i.shift());if(this.active=!1,c){for(;o=i.shift();)o.unsubscribe();throw c}}}const h=new p(class e extends T{constructor(o,i){super(o,i),this.scheduler=o,this.work=i,this.pending=!1}schedule(o,i=0){if(this.closed)return this;this.state=o;const c=this.id,x=this.scheduler;return null!=c&&(this.id=this.recycleAsyncId(x,c,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(x,this.id,i),this}requestAsyncId(o,i,c=0){return setInterval(o.flush.bind(o,this),c)}recycleAsyncId(o,i,c=0){if(null!==c&&this.delay===c&&!1===this.pending)return i;clearInterval(i)}execute(o,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const c=this._execute(o,i);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(o,i){let x,c=!1;try{this.work(o)}catch(C){c=!0,x=!!C&&C||new Error(C)}if(c)return this.unsubscribe(),x}_unsubscribe(){const o=this.id,i=this.scheduler,c=i.actions,x=c.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==x&&c.splice(x,1),null!=o&&(this.id=this.recycleAsyncId(i,o,null)),this.delay=null}});function m(u,o=h){return i=>i.lift(new b(u,o))}class b{constructor(o,i){this.dueTime=o,this.scheduler=i}call(o,i){return i.subscribe(new r(o,this.dueTime,this.scheduler))}}class r extends f.L{constructor(o,i,c){super(o),this.dueTime=i,this.scheduler=c,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(o){this.clearDebounce(),this.lastValue=o,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(_,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:o}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(o)}}clearDebounce(){const o=this.debouncedSubscription;null!==o&&(this.remove(o),o.unsubscribe(),this.debouncedSubscription=null)}}function _(u){u.debouncedNext()}},3720:(E,Z,a)=>{a.d(Z,{x:()=>l});var f=a(1003);function l(D,p){return g=>g.lift(new T(D,p))}class T{constructor(p,g){this.compare=p,this.keySelector=g}call(p,g){return g.subscribe(new e(p,this.compare,this.keySelector))}}class e extends f.L{constructor(p,g,h){super(p),this.keySelector=h,this.hasKey=!1,"function"==typeof g&&(this.compare=g)}compare(p,g){return p===g}_next(p){let g;try{const{keySelector:m}=this;g=m?m(p):p}catch(m){return this.destination.error(m)}let h=!1;if(this.hasKey)try{const{compare:m}=this;h=m(this.key,g)}catch(m){return this.destination.error(m)}else this.hasKey=!0;h||(this.key=g,this.destination.next(p))}}},3117:(E,Z,a)=>{a.d(Z,{A:()=>D});var f=a(7073),l=a(4151);const T=["convoy-card",""],e=["*"];let D=(()=>{class p{constructor(){this.hover="false",this.color="default"}ngOnInit(){}get classes(){return`${{default:"bg-[#fff] border border-grey-10",danger:"bg-danger-500 border border-danger-200"}[this.color]} ${"true"===this.hover?"focus:shadow-sm hover:shadow-sm focus-visible:shadow-sm hover:border-grey-20 focus:border-grey-20 focus-visible:border-grey-20 outline-none":""} block`}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275cmp=l.Xpm({type:p,selectors:[["","convoy-card",""]],hostAttrs:[1,"rounded-8px"],hostVars:2,hostBindings:function(h,m){2&h&&l.Tol(m.classes)},inputs:{hover:"hover",color:"color"},standalone:!0,features:[l.jDz],attrs:T,ngContentSelectors:e,decls:1,vars:0,template:function(h,m){1&h&&(l.F$t(),l.Hsn(0))},dependencies:[f.ez],encapsulation:2}),p})()},1549:(E,Z,a)=>{a.d(Z,{K:()=>g});var f=a(7073),l=a(4151),T=a(1354),e=a(4330);const D=["convoy-copy-button",""],p=["*"];let g=(()=>{class h{constructor(b){this.generalService=b,this.size="sm",this.copy=new l.vpe,this.textCopied=!1}ngOnInit(){}copyText(b){if(b.stopPropagation(),!this.textToCopy)return;const r=this.textToCopy,_=document.createElement("textarea");_.value=r,document.body.appendChild(_),_.select(),document.execCommand("copy"),this.textCopied=!0,this.copy.emit(),setTimeout(()=>{this.textCopied=!1},2e3),document.body.removeChild(_),this.notificationText&&this.generalService.showNotification({message:this.notificationText,style:"info"})}}return h.\u0275fac=function(b){return new(b||h)(l.Y36(e.m))},h.\u0275cmp=l.Xpm({type:h,selectors:[["","convoy-copy-button",""],["convoy-copy-button"]],inputs:{textToCopy:["text","textToCopy"],notificationText:"notificationText",size:"size",class:["className","class"]},outputs:{copy:"copyText"},standalone:!0,features:[l.jDz],attrs:D,ngContentSelectors:p,decls:5,vars:6,consts:[["convoy-button","","fill","text","type","button","size","sm",1,"relative",3,"click"],["width","14","height","14"],[0,"xlink","href","#copy-alt"]],template:function(b,r){1&b&&(l.F$t(),l.TgZ(0,"div")(1,"button",0),l.NdJ("click",function(u){return r.copyText(u)}),l.O4$(),l.TgZ(2,"svg",1),l._UZ(3,"use",2),l.qZA(),l.Hsn(4),l.qZA()()),2&b&&(l.Tol(r.class),l.xp6(2),l.Tol("sm"===r.size?"fill-grey-40":"fill-primary-100"),l.uIk("height","sm"===r.size?"14":"16")("width","sm"===r.size?"14":"16"))},dependencies:[f.ez,T.r]}),h})()},4268:(E,Z,a)=>{a.r(Z),a.d(Z,{EventsModule:()=>le});var f=a(7073),l=a(9369),T=a(8542),e=a(4151),D=a(6907),p=a(878),g=a(6440),h=a(7205),m=a(3445),b=a(7888),r=a(1354),_=a(1616),u=a(3117);const o=function(n){return{height:n}};function i(n,d){if(1&n&&(e.TgZ(0,"div",5),e._UZ(1,"div",6),e.qZA()),2&n){const t=d.$implicit;e.xp6(1),e.Q6J("ngStyle",e.VKq(1,o,t+"px"))}}function c(n,d){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,i,2,3,"div",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.loaderSizes)}}const x=function(n){return{"before:hidden":n}};function C(n,d){if(1&n&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"h3",21),e._uU(5),e.qZA(),e.TgZ(6,"p",22),e._uU(7),e.ALo(8,"number"),e.qZA()()()()()),2&n){const t=d.$implicit;e.xp6(2),e.Tol(t.data>0?"bg-primary-100 bg-opacity-70 rounded-tl-8px rounded-tr-8px":"bg-grey-10 rounded-4px group-hover:bg-grey-40"),e.Q6J("ngStyle",e.VKq(8,o,t.size)),e.xp6(1),e.Q6J("ngClass",e.VKq(10,x,0===t.data)),e.xp6(2),e.Oqu(t.label),e.xp6(2),e.hij("Events: ",e.lcZ(8,6,t.data),"")}}function z(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7),e.YNc(2,C,9,12,"div",8),e.qZA(),e.TgZ(3,"div",9)(4,"div",10),e._uU(5),e.qZA(),e.TgZ(6,"div",10),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()(),e.TgZ(10,"div",11)(11,"button",12),e.NdJ("click",function(){e.CHM(t);const v=e.oxw();return e.KtG(v.prevPage())}),e.O4$(),e.TgZ(12,"svg",13),e._UZ(13,"use",14),e.qZA()(),e.kcU(),e.TgZ(14,"button",15),e.NdJ("click",function(){e.CHM(t);const v=e.oxw();return e.KtG(v.nextPage())}),e.O4$(),e.TgZ(15,"svg",13),e._UZ(16,"use",16),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.paginatedData),e.xp6(3),e.Oqu(t.paginatedData[0].label),e.xp6(2),e.Oqu(t.paginatedData[15].label),e.xp6(2),e.Oqu(t.paginatedData[t.paginatedData.length-1].label),e.xp6(1),e.Tol(1===t.pages?"hidden":"flex"),e.xp6(1),e.Q6J("disabled",1===t.pageNumber),e.xp6(3),e.Q6J("disabled",t.pageNumber===t.pages)}}let A=(()=>{class n{constructor(){this.isLoading=!1,this.pageSize=31,this.pageNumber=1,this.pages=1,this.paginatedData=[{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"},{label:"",data:0,size:"4px"}]}ngOnInit(){this.generateLoaderHeight()}ngOnChanges(t){this.isLoading=t?.isLoading?.currentValue,this.chartData=t?.chartData?.currentValue,t?.isLoading?.previousValue!==t?.isLoading?.currentValue&&(this.pageNumber=1),this.chartData&&this.paginateChartData()}paginateChartData(){this.pages=Math.ceil(this.chartData?.length/this.pageSize),this.paginate()}prevPage(){1!==this.pageNumber&&(this.pageNumber--,this.paginate())}nextPage(){this.pageNumber!==this.pages&&(this.pageNumber++,this.paginate())}paginate(){const t=this.chartData.slice((this.pageNumber-1)*this.pageSize,this.pageNumber*this.pageSize),s=t.map(y=>y.data),v=Math.max(...s);t.map((y,w)=>{this.paginatedData[this.paginatedData.length-1-w]={...y,size:`${Math.round(100/v*y.data)||4}px`}})}generateLoaderHeight(){this.loaderSizes=Array.from({length:30},()=>Math.floor(100*Math.random()))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["convoy-chart"]],inputs:{chartData:"chartData",isLoading:"isLoading"},standalone:!0,features:[e.TTD,e.jDz],decls:3,vars:2,consts:[[1,"w-full"],["class","flex justify-between h-100px",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-between","h-100px"],["class","loader mr-2px last-of-type:mr-0 flex items-end relative w-full h-full",4,"ngFor","ngForOf"],[1,"loader","mr-2px","last-of-type:mr-0","flex","items-end","relative","w-full","h-full"],[1,"min-h-[4px]","w-full","bg-grey-10","rounded-4px","animate-pulse","hover:cursor-pointer","transition-all","duration-300",3,"ngStyle"],[1,"flex","gap-x-1","justify-end"],["class","mr-2px last-of-type:mr-0 w-full group",4,"ngFor","ngForOf"],[1,"line","flex","items-center","justify-between","mt-14px","border-t","border-grey-10","pt-4px"],[1,"text-grey-40","text-10"],[1,"flex","items-center","justify-end","mt-16px"],["convoy-button","","fill","outline","size","sm",1,"px-4px","py-4px","border-primary-300",3,"disabled","click"],["width","24","height","24",1,"fill-primary-100"],[0,"xlink","href","#arrow-left-icon"],["convoy-button","","fill","outline","size","sm",1,"px-4px","py-4px","border-primary-300","ml-16px",3,"disabled","click"],[0,"xlink","href","#arrow-right-icon"],[1,"mr-2px","last-of-type:mr-0","w-full","group"],[1,"flex","items-end","h-100px","hover:cursor-pointer"],[1,"min-h-[4px]","w-full","transition-all","duration-300","relative",3,"ngStyle"],[1,"absolute","opacity-0","group-hover:opacity-100","group-focus-within:opacity-100","group-focus:opacity-100","group-hover:pointer-events-auto","group-focus-within:pointer-events-auto","group-focus:pointer-events-auto","pointer-events-none","transition-all","duration-300","bg-white-100","shadow-[0px_8px_8px_rgba(50,50,71,0.08),0px_8px_16px_rgba(50,50,71,0.06)]","rounded-12px","w-120px","px-14px","py-8px","bottom-[calc(100%+8px)]","left-1/2","-translate-x-1/2","z-10","before:content-['']","before:left-1/2","before:-translate-x-1/2","before:border-[3px]","before:border-white-100","before:absolute","before:-bottom-[20px]","before:rounded-12px","before:shadow-[0px_2.66667px_2.66667px_rgba(50,50,71,0.06),0px_2.66667px_5.33333px_rgba(50,50,71,0.06)]","before:h-12px","before:w-12px","before:bg-primary-100","after:content-['']","after:absolute","after:-bottom-[20px]","after:left-1/2","after:-translate-x-1/2","after:border-[12px]","after:border-t-white-100","after:border-b-transparent","after:border-x-transparent","after:outline-1","after:outline-grey-20",3,"ngClass"],[1,"font-semibold","text-12"],[1,"text-12"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,c,2,1,"div",1),e.YNc(2,z,17,8,"ng-container",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",s.isLoading),e.xp6(1),e.Q6J("ngIf",!s.isLoading))},dependencies:[f.ez,f.mk,f.sg,f.O5,f.PC,f.JJ,r.r]}),n})();var S=a(545),I=a(7542),U=a(7500),L=a(1549),P=a(455),k=a(493);function M(n,d){1&n&&(e.TgZ(0,"div",2),e._UZ(1,"convoy-loader",3),e.qZA()),2&n&&(e.xp6(1),e.Q6J("isTransparent",!0))}function O(n,d){if(1&n&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ","incoming"===(null==t.privateService.activeProjectDetails?null:t.privateService.activeProjectDetails.type)?'Start receiving webhooks by adding your webhook URL into your webhook sender platform "'+(null==t.lastestSource?null:t.lastestSource.name)+'"':"You have not sent any webhook events yet. Learn how to do that in our docs"," ")}}function J(n,d){if(1&n&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ","incoming"===(null==t.privateService.activeProjectDetails?null:t.privateService.activeProjectDetails.type)?"You need to create an endpoint subscribe it to an event source (sender of your webhooks) to start receiving events":"You need to create an endpoint and subscribe it to listen to events"," ")}}function F(n,d){1&n&&(e.ynx(0),e.TgZ(1,"div",14),e._UZ(2,"img",15),e.TgZ(3,"p",16),e._uU(4,"Waiting on your first web-hook event"),e.qZA(),e._UZ(5,"img",17),e.qZA(),e.TgZ(6,"a",18),e._uU(7,"Don't See Your Events Yet?"),e.qZA(),e.BQk())}const N=function(n){return[n]};function Q(n,d){if(1&n&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div",28),e.ALo(3,"statuscolor"),e._uU(4),e.qZA()(),e.TgZ(5,"div",29),e._uU(6),e.qZA(),e.TgZ(7,"div",30),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div",30),e._uU(11),e.ALo(12,"date"),e.qZA()()),2&n){const t=d.$implicit;e.Q6J("routerLink",e.VKq(14,N,"./event-deliveries/"+t.uid)),e.xp6(2),e.Q6J("type",e.lcZ(3,6,t.status)),e.xp6(2),e.Oqu(null==t?null:t.status),e.xp6(2),e.Oqu(null==t||null==t.endpoint_metadata?null:t.endpoint_metadata.title),e.xp6(2),e.Oqu(e.xi3(9,8,t.created_at,"mediumTime")),e.xp6(3),e.Oqu(e.xi3(12,11,t.updated_at,"mediumTime"))}}function q(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"div",20)(3,"div",21),e._uU(4,"Status"),e.qZA(),e.TgZ(5,"div",22),e._uU(6,"Subscription"),e.qZA(),e.TgZ(7,"div",23),e._uU(8,"Event Time"),e.qZA(),e.TgZ(9,"div",23),e._uU(10,"Retry Time"),e.qZA()(),e.YNc(11,Q,13,16,"div",24),e.qZA(),e.TgZ(12,"button",25),e.NdJ("click",function(){e.CHM(t);const v=e.oxw(4);return e.KtG(v.continueToDashboard())}),e._uU(13,"Continue to Dashboard"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(4);e.xp6(11),e.Q6J("ngForOf",t.lastestEventDeliveries)}}function j(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"div",11)(2,"span",12),e._uU(3),e.qZA(),e._UZ(4,"convoy-copy-button",13),e.qZA(),e.YNc(5,F,8,0,"ng-container",1),e.YNc(6,q,14,1,"ng-container",1),e.BQk()),2&n){const t=e.oxw(3);e.xp6(3),e.Oqu(null==t.lastestSource?null:t.lastestSource.url),e.xp6(1),e.Q6J("text",(null==t.lastestSource?null:t.lastestSource.url)||""),e.xp6(1),e.Q6J("ngIf",0===t.lastestEventDeliveries.length),e.xp6(1),e.Q6J("ngIf",t.lastestEventDeliveries.length>0)}}function Y(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const v=e.oxw(3);return e.KtG(v.router.navigateByUrl("/projects/"+(null==v.privateService.activeProjectDetails?null:v.privateService.activeProjectDetails.uid)+"/setup"))}),e._uU(1,"Complete project setup"),e.qZA()}}function B(n,d){1&n&&(e.TgZ(0,"a",32),e._uU(1," Go to documentation "),e.O4$(),e.TgZ(2,"svg",33),e._UZ(3,"use",34),e.qZA()())}function K(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"div",4),e._UZ(2,"img",5),e.TgZ(3,"h3",6),e._uU(4),e.qZA(),e.YNc(5,O,2,1,"p",7),e.YNc(6,J,2,1,"p",7),e.YNc(7,j,7,4,"ng-container",1),e.YNc(8,Y,2,0,"button",8),e.YNc(9,B,4,0,"a",9),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu("incoming"===(null==t.privateService.activeProjectDetails?null:t.privateService.activeProjectDetails.type)?"You have no incoming events.":"You have no outgoing events yet"),e.xp6(1),e.Q6J("ngIf",t.isProjectConfigurationComplete),e.xp6(1),e.Q6J("ngIf",!t.isProjectConfigurationComplete),e.xp6(1),e.Q6J("ngIf","incoming"===(null==t.privateService.activeProjectDetails?null:t.privateService.activeProjectDetails.type)&&t.isProjectConfigurationComplete),e.xp6(1),e.Q6J("ngIf",!t.isProjectConfigurationComplete),e.xp6(1),e.Q6J("ngIf","outgoing"===(null==t.privateService.activeProjectDetails?null:t.privateService.activeProjectDetails.type)&&t.isProjectConfigurationComplete)}}function R(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"li",58)(1,"button",59),e.NdJ("click",function(){const y=e.CHM(t).$implicit,w=e.oxw(3);return w.dashboardFrequency=y,e.KtG(w.fetchDashboardData())}),e._uU(2),e.qZA()()}if(2&n){const t=d.$implicit,s=e.oxw(3);e.Q6J("active",s.dashboardFrequency==t?"true":"false")("hasBorder",!0),e.xp6(2),e.hij(" ",t," ")}}function V(n,d){1&n&&(e.TgZ(0,"div"),e._UZ(1,"convoy-skeleton-loader",60)(2,"convoy-skeleton-loader",61),e.qZA())}function $(n,d){1&n&&(e.TgZ(0,"span",64),e._uU(1,"s"),e.qZA())}function H(n,d){if(1&n&&(e.TgZ(0,"div")(1,"div",62),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"div",63)(5,"span",64),e._uU(6,"Event"),e.qZA(),e.YNc(7,$,2,0,"span",65),e._uU(8),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,3,t.dashboardData.events_sent)),e.xp6(5),e.Q6J("ngIf",t.dashboardData.events_sent>1),e.xp6(1),e.hij(" ","incoming"===(null==t.privateService.activeProjectDetails?null:t.privateService.activeProjectDetails.type)?"Ingested":"Sent"," ")}}function W(n,d){1&n&&(e.TgZ(0,"div"),e._UZ(1,"convoy-skeleton-loader",60)(2,"convoy-skeleton-loader",66),e.qZA())}function G(n,d){1&n&&(e.TgZ(0,"span",64),e._uU(1,"s"),e.qZA())}function X(n,d){if(1&n&&(e.TgZ(0,"div")(1,"div",62),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"div",63)(5,"span",64),e._uU(6,"Endpoint"),e.qZA(),e.YNc(7,G,2,0,"span",65),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,t.dashboardData.apps)),e.xp6(5),e.Q6J("ngIf",t.dashboardData.apps>1)}}function ee(n,d){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",35)(2,"a",36),e._uU(3,"Projects"),e.qZA(),e.O4$(),e.TgZ(4,"svg",37),e._UZ(5,"use",38),e.qZA(),e._uU(6),e.TgZ(7,"svg",37),e._UZ(8,"use",38),e.qZA(),e.kcU(),e.TgZ(9,"span",39),e._uU(10,"Events"),e.qZA()(),e.TgZ(11,"div",40)(12,"convoy-date-picker",41),e.NdJ("selectedDateRange",function(v){e.CHM(t);const y=e.oxw(2);return e.KtG(y.getSelectedDateRange(v))})("clearDates",function(){e.CHM(t);const v=e.oxw(2);return e.KtG(v.getSelectedDateRange())}),e.qZA(),e.TgZ(13,"div",42)(14,"button",43)(15,"span",44),e._uU(16,"Filter By:"),e.qZA(),e.TgZ(17,"span",45),e._uU(18),e.qZA(),e._UZ(19,"img",46),e.qZA(),e.TgZ(20,"ul",47),e.YNc(21,R,3,3,"li",48),e.qZA()()(),e.TgZ(22,"div",49)(23,"ul",50)(24,"li",51),e._UZ(25,"img",52),e.YNc(26,V,3,0,"div",1),e.YNc(27,H,9,5,"div",1),e.qZA(),e.TgZ(28,"li",53),e._UZ(29,"img",54),e.YNc(30,W,3,0,"div",1),e.YNc(31,X,8,4,"div",1),e.qZA()(),e.TgZ(32,"div",55),e._UZ(33,"convoy-chart",56),e.qZA()(),e.TgZ(34,"app-event-deliveries",57),e.NdJ("pushEventDeliveries",function(v){e.CHM(t);const y=e.oxw(2);return e.KtG(y.eventDeliveries=v)}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(6),e.hij(" ",null==t.privateService.activeProjectDetails?null:t.privateService.activeProjectDetails.name," "),e.xp6(12),e.Oqu(t.dashboardFrequency),e.xp6(3),e.Q6J("ngForOf",t.filterOptions),e.xp6(5),e.Q6J("ngIf",t.isloadingDashboardData),e.xp6(1),e.Q6J("ngIf",!t.isloadingDashboardData),e.xp6(3),e.Q6J("ngIf",t.isloadingDashboardData),e.xp6(1),e.Q6J("ngIf",!t.isloadingDashboardData),e.xp6(2),e.Q6J("chartData",t.chartData)("isLoading",t.isloadingDashboardData)}}function te(n,d){if(1&n&&(e.ynx(0),e.YNc(1,K,10,6,"ng-container",1),e.YNc(2,ee,35,9,"ng-container",1),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.hasEvents),e.xp6(1),e.Q6J("ngIf",t.hasEvents)}}let ne=(()=>{class n{constructor(t,s,v,y){this.formBuilder=t,this.eventsService=s,this.privateService=v,this.router=y,this.dateOptions=["Last Year","Last Month","Last Week","Yesterday"],this.isloadingDashboardData=!1,this.showFilterDropdown=!1,this.selectedDateOption="",this.dashboardFrequency="daily",this.filterOptions=["daily","weekly","monthly","yearly"],this.dashboardData={apps:0,events_sent:0},this.statsDateRange=this.formBuilder.group({startDate:[{value:new Date((new Date).setDate((new Date).getDate()-30)),disabled:!0}],endDate:[{value:new Date,disabled:!0}]}),this.hasEvents=!1,this.showAddEventModal=!1,this.lastestEventDeliveries=[],this.eventDelTableHead=["Status","Event Type","Event Time","Next Attempt"],this.isProjectConfigurationComplete=!1,this.isPageLoading=!1}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.isloadingDashboardData=!0,t.isPageLoading=!0,yield t.getProjectStats(),t.isProjectConfigurationComplete?(yield t.checkEventsOnFirstLoad(),"incoming"===t.privateService.activeProjectDetails?.type&&!t.hasEvents&&(t.eventDelievryIntervalTime=setInterval(()=>{t.getLatestEvent()},2e3)),t.isPageLoading=!1,t.isloadingDashboardData=!1):(t.isloadingDashboardData=!1,t.isPageLoading=!1)})()}ngOnDestroy(){clearInterval(this.eventDelievryIntervalTime)}getLatestSource(){var t=this;return(0,l.Z)(function*(){try{const s=yield t.privateService.getSources();return void(t.lastestSource=s.data.content[s.data.content.length-1])}catch(s){return s}})()}getLatestEvent(){var t=this;return(0,l.Z)(function*(){try{const s=yield t.eventsService.getEventDeliveries();return void(t.lastestEventDeliveries=s.data.content)}catch(s){return t.isloadingDashboardData=!1,t.isPageLoading=!1,s}})()}checkEventsOnFirstLoad(){var t=this;return(0,l.Z)(function*(){if(t.hasEvents)return clearInterval(t.eventDelievryIntervalTime),t.isPageLoading=!1,void(yield t.fetchDashboardData());"incoming"===t.privateService.activeProjectDetails?.type&&t.isProjectConfigurationComplete&&(yield t.getLatestSource())})()}continueToDashboard(){this.fetchDashboardData(),this.privateService.getProjectStat({refresh:!0}),this.hasEvents=!0,clearInterval(this.eventDelievryIntervalTime)}fetchDashboardData(){var t=this;return(0,l.Z)(function*(){try{const{startDate:s,endDate:v}=t.setDateForFilter(t.statsDateRange.value),y=yield t.eventsService.dashboardSummary({startDate:s||"",endDate:v||"",type:t.dashboardFrequency});return t.dashboardData=y.data,t.initConvoyChart(y),void(t.isloadingDashboardData=!1)}catch{return t.isloadingDashboardData=!1,void(t.isPageLoading=!1)}})()}getSelectedDateRange(t){this.statsDateRange.patchValue({startDate:t?.startDate||new Date((new Date).setDate((new Date).getDate()-30)),endDate:t?.endDate||new Date}),this.fetchDashboardData()}setDateForFilter(t){return t.endDate||t.startDate?{startDate:t.startDate?`${(0,T.Z)(t.startDate,"yyyy-MM-dd")}${t?.startTime||"T00:00:00"}`:"",endDate:t.endDate?`${(0,T.Z)(t.endDate,"yyyy-MM-dd")}${t?.endTime||"T23:59:59"}`:""}:{startDate:"",endDate:""}}initConvoyChart(t){let s=[];const v=t.data.event_data.reverse(),y=this.getDateLabelFormat();v.forEach(w=>{s.push({label:(0,T.Z)(new Date(w.data.date),y),data:w.count||0})}),this.chartData=s}getDateLabelFormat(){let t="";switch(this.dashboardFrequency){case"daily":t="do, MMM, yyyy";break;case"weekly":t="yyyy-MM";break;case"monthly":t="MMM, yyyy";break;case"yearly":t="yyyy"}return t}getProjectStats(){var t=this;return(0,l.Z)(function*(){try{const s=yield t.privateService.getProjectStat();return t.isProjectConfigurationComplete=s.data?.total_subscriptions>0,void(t.hasEvents=s.data?.messages_sent>0)}catch(s){return s}})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D.qu),e.Y36(p.n),e.Y36(g.i),e.Y36(h.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-events"]],decls:2,vars:2,consts:[["class","h-[705px]",4,"ngIf"],[4,"ngIf"],[1,"h-[705px]"],[3,"isTransparent"],["convoy-card","",1,"flex","items-center","justify-center","flex-col","py-82px","h-full","text-center","px-40px"],["src","/assets/img/events-empty-state-image.svg","alt","events empty state image",1,"mb-48px"],[1,"mb-10px","text-16","font-bold"],["class","text-14 text-grey-40 max-w-[428px]",4,"ngIf"],["convoy-button","","class","mt-48px",3,"click",4,"ngIf"],["href","https://getconvoy.io/docs/getting-started/sending-webhook-example","convoy-button","","target","_blank","referrerpolicy","no-referrer","fill","outline","class","mt-48px",4,"ngIf"],[1,"text-14","text-grey-40","max-w-[428px]"],[1,"flex","items-center","justify-between","w-full","h-50px","border","border-grey-10","bg-[#F7F9FC]","rounded-[6px]","px-16px","mb-32px","max-w-[500px]","mt-42px"],[1,"text-14","text-grey-40","font-normal","whitespace-nowrap","w-[440px]","overflow-hidden","text-ellipsis"],["notificationText","Source URL copied to clipboard",3,"text"],["convoy-card","",1,"flex","justify-between","py-10px","px-40px","max-w-[446px]","w-full","items-center"],["src","/assets/img/time-icon.svg","alt","timer icon",1,"mr-20px","w-38px"],[1,"mr-12px","text-14","text-grey-80"],["src","/assets/img/Loader.png","alt","loader icon",1,"opacity-50","w-50px"],["href","https://getconvoy.io/docs/getting-started/receiving-webhook-example","target","_blank","referrerpolicy","no-referrer","convoy-button","","fill","clear",1,"mt-48px","font-medium"],["convoy-card","",1,"w-full","max-w-[500px]"],[1,"flex","w-full","border-b","border-b-grey-10","text-grey-40","text-14","p-10px"],[1,"w-1/5","text-left"],[1,"w-1/3","text-left","ml-2px"],[1,"w-1/5","text-left","ml-2px"],["class","flex text-left text-14 p-10px cursor-pointer hover:bg-grey-10",3,"routerLink",4,"ngFor","ngForOf"],["convoy-button","",1,"mt-48px","font-medium",3,"click"],[1,"flex","text-left","text-14","p-10px","cursor-pointer","hover:bg-grey-10",3,"routerLink"],[1,"w-1/5"],["convoy-tag","",3,"type"],[1,"w-1/3","ml-2px","max-w-[159px]","whitespace-nowrap","overflow-hidden","text-ellipsis"],[1,"w-1/5","ml-2px"],["convoy-button","",1,"mt-48px",3,"click"],["href","https://getconvoy.io/docs/getting-started/sending-webhook-example","convoy-button","","target","_blank","referrerpolicy","no-referrer","fill","outline",1,"mt-48px"],[1,"ml-8px","fill-primary-100","w-20px","h-20px"],[0,"xlink","href","#external-link-icon"],[1,"text-12","font-medium","flex","items-center","uppercase"],["routerLink","/projects",1,"font-medium","cursor-pointer"],["width","16","height","16",1,"mx-4px"],[0,"xlink","href","#arrow-right-icon"],[1,"text-primary-100","font-medium"],[1,"py-24px","flex","items-center"],[3,"selectedDateRange","clearDates"],["convoy-dropdown","","size","sm","position","left"],["dropdownTrigger","","convoy-button","","size","sm","fill","outline",1,"px-10px","!border-primary-400","ml-16px"],[1,"text-grey-60","mr-4px"],[1,"text-primary-100","capitalize"],["src","/assets/img/angle-arrow-down.svg","alt","arrow down icon",1,"w-14px","h-14px","ml-10px"],["dropdownOptions",""],["convoy-dropdown-option","","convoy-list-item","","class","text-14 px-20px",3,"active","hasBorder",4,"ngFor","ngForOf"],["convoy-card","",1,"relative","mb-22px"],[1,"flex","flex-wrap","items-center","min-h-[76px]","metrics"],[1,"bg-[url(/assets/img/message-icon-transparent.svg)]","bg-[length:30px_30px]","bg-no-repeat","flex","items-center","px-30px","py-16px","border-r","border-grey-10","[background-position-x:185px]","[background-position-y:46px]","min-w-[220px]"],["src","/assets/img/message-icon.svg","alt","message icon",1,"mr-30px"],[1,"bg-[url(/assets/img/apps-icon-transparent.svg)]","bg-[length:30px_30px]","bg-no-repeat","flex","items-center","px-30px","py-16px","border-r","border-grey-10","[background-position-x:185px]","[background-position-y:46px]","min-w-[220px]"],["src","/assets/img/apps-icon.svg","alt","apps icon",1,"mr-30px"],[1,"border-t","border-grey-10","p-16px"],[3,"chartData","isLoading"],[3,"pushEventDeliveries"],["convoy-dropdown-option","","convoy-list-item","",1,"text-14","px-20px",3,"active","hasBorder"],["convoy-button","","color","grey","fill","text",1,"capitalize","text-left","w-full","!justify-start",3,"click"],["className","w-60px h-16px mb-10px"],["className","w-120px h-16px"],[1,"text-16","font-medium"],[1,"text-grey-40","text-14"],[1,"font-normal"],["class","font-normal",4,"ngIf"],["className","w-100px h-16px"]],template:function(t,s){1&t&&(e.YNc(0,M,2,1,"div",0),e.YNc(1,te,3,2,"ng-container",1)),2&t&&(e.Q6J("ngIf",s.isPageLoading),e.xp6(1),e.Q6J("ngIf",!s.isPageLoading))},dependencies:[f.sg,f.O5,h.rH,h.yS,m.P,b.J,r.r,_.G,u.A,A,S.t,I.R,U.L,b.o,L.K,P.Z,f.JJ,f.uU,k.k]}),n})();var oe=a(117),ie=a(2065),ae=a(385),re=a(4341),se=a(3579);const ce=[{path:"",component:ne}];let le=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[f.uU],imports:[f.ez,D.UX,h.Bz.forChild(ce),oe.M,b.J,r.r,_.G,u.A,A,S.t,ie.s,ae.zS,re.q,U.L,L.K,P.Z,se.K]}),n})()}}]);
//# sourceMappingURL=738.363abff3b9dcdbc3.js.map