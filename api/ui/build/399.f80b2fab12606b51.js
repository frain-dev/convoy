"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[399],{1549:(F,y,r)=>{r.d(y,{K:()=>D});var p=r(7073),c=r(4151),m=r(1354),x=r(4330);const E=["convoy-copy-button",""],T=["*"];let D=(()=>{class _{constructor(d){this.generalService=d,this.size="sm",this.copy=new c.vpe,this.textCopied=!1}ngOnInit(){}copyText(d){if(d.stopPropagation(),!this.textToCopy)return;const u=this.textToCopy,h=document.createElement("textarea");h.value=u,document.body.appendChild(h),h.select(),document.execCommand("copy"),this.textCopied=!0,this.copy.emit(),setTimeout(()=>{this.textCopied=!1},2e3),document.body.removeChild(h),this.notificationText&&this.generalService.showNotification({message:this.notificationText,style:"info"})}}return _.\u0275fac=function(d){return new(d||_)(c.Y36(x.m))},_.\u0275cmp=c.Xpm({type:_,selectors:[["","convoy-copy-button",""],["convoy-copy-button"]],inputs:{textToCopy:["text","textToCopy"],notificationText:"notificationText",size:"size",class:["className","class"]},outputs:{copy:"copyText"},standalone:!0,features:[c.jDz],attrs:E,ngContentSelectors:T,decls:5,vars:6,consts:[["convoy-button","","fill","text","type","button","size","sm",1,"relative",3,"click"],["width","14","height","14"],[0,"xlink","href","#copy-alt"]],template:function(d,u){1&d&&(c.F$t(),c.TgZ(0,"div")(1,"button",0),c.NdJ("click",function(b){return u.copyText(b)}),c.O4$(),c.TgZ(2,"svg",1),c._UZ(3,"use",2),c.qZA(),c.Hsn(4),c.qZA()()),2&d&&(c.Tol(u.class),c.xp6(2),c.Tol("sm"===u.size?"fill-grey-40":"fill-primary-100"),c.uIk("height","sm"===u.size?"14":"16")("width","sm"===u.size?"14":"16"))},dependencies:[p.ez,m.r]}),_})()},399:(F,y,r)=>{r.r(y),r.d(y,{EventLogsComponent:()=>he});var p=r(9369),c=r(7073),m=r(7205),x=r(3117),E=r(1354),T=r(2065),D=r(8461),_=r(455),g=r(9767),d=r(8542),u=r(876),h=r(7500),b=r(3579),L=r(3852),w=r(4341),f=r(6907),U=r(7888),R=r(385),I=r(4430),A=r(1549),e=r(4151),J=r(3755);let N=(()=>{class i{constructor(t){this.http=t}getRetryCount(t){var n=this;return new Promise(function(){var o=(0,p.Z)(function*(s,l){try{return s(yield n.http.request({url:"/events/countbatchreplayevents",method:"get",level:"org_project",query:t}))}catch(v){return l(v)}});return function(s,l){return o.apply(this,arguments)}}())}retryEvent(t){var n=this;return new Promise(function(){var o=(0,p.Z)(function*(s,l){try{return s(yield n.http.request({url:`/events/${t.eventId}/replay`,method:"put",level:"org_project"}))}catch(v){return l(v)}});return function(s,l){return o.apply(this,arguments)}}())}batchRetryEvent(t){var n=this;return new Promise(function(){var o=(0,p.Z)(function*(s,l){try{return s(yield n.http.request({url:"/events/batchreplay",method:"post",body:null,level:"org_project",query:t}))}catch(v){return l(v)}});return function(s,l){return o.apply(this,arguments)}}())}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(J.O))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var k=r(4330),Q=r(6440),O=r(878),M=r(493),q=r(3185),Y=r(4600);const P=["timeFilter"],j=["datePicker"];function H(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",31)(1,"label",32),e._uU(2),e.qZA(),e.TgZ(3,"input",33),e.NdJ("change",function(o){const l=e.CHM(t).$implicit,v=e.oxw();return e.KtG(v.updateSourceFilter(l.uid,o))}),e.qZA()()}if(2&i){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("for",t.uid),e.xp6(1),e.Oqu(t.name),e.xp6(1),e.Q6J("value",t.uid)("id",t.uid)("checked",t.uid===n.eventSource)}}function $(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clearEventFilters("eventsSource"))}),e._uU(2,"Clear"),e.qZA()()}}function z(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.clearEventFilters(),e.KtG(o.selectedEventsDateOption="")}),e._uU(1," Clear Filters "),e.qZA()}}function B(i,a){1&i&&(e.TgZ(0,"div",37),e._UZ(1,"convoy-empty-state",38),e.qZA())}function K(i,a){if(1&i&&e._UZ(0,"convoy-table-loader",51),2&i){const t=e.oxw(2);e.Q6J("tableHead",t.eventLogsTableHead)}}function G(i,a){if(1&i&&(e.TgZ(0,"th",57),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Tol(0===a.index?"pl-20px":""),e.xp6(1),e.Oqu(t)}}const V=function(i){return{"underline text-primary-100":i}};function W(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr",61),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(4);return l.eventsDetailsItem=s,e.KtG(l.getEventDeliveriesForSidebar(s.uid))}),e.TgZ(1,"td",62)(2,"convoy-tag",63),e._uU(3),e.qZA(),e._UZ(4,"convoy-copy-button",64),e.qZA(),e.TgZ(5,"td",65)(6,"span",66)(7,"span",67),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.viewSource((null==s||null==s.source_metadata?null:s.source_metadata.uid)||""))}),e._uU(8),e.qZA()()(),e.TgZ(9,"td",68),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",65)(13,"button",69),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.viewEventDeliveries(s.uid))}),e._uU(14," Deliveries "),e._UZ(15,"img",70),e.qZA()()()}if(2&i){const t=a.$implicit,n=e.oxw(4);e.Q6J("active",t.uid===(null==n.eventsDetailsItem?null:n.eventsDetailsItem.uid)),e.xp6(3),e.Oqu(t.uid),e.xp6(1),e.Q6J("text",t.uid),e.xp6(3),e.Q6J("ngClass",e.VKq(9,V,!n.portalToken||!t.source_metadata.name)),e.xp6(1),e.hij(" ",t.source_metadata.name||"Rest API"," "),e.xp6(2),e.Oqu(e.xi3(11,6,t.created_at,"mediumTime"))}}function X(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"tr",58)(2,"td",59),e._uU(3),e.qZA(),e._UZ(4,"td",59)(5,"td",59),e.qZA(),e.YNc(6,W,16,11,"tr",60),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("forDate",!0),e.xp6(1),e.Q6J("forDate",!0),e.xp6(1),e.Oqu(t.date),e.xp6(1),e.Q6J("forDate",!0),e.xp6(1),e.Q6J("forDate",!0),e.xp6(1),e.Q6J("ngForOf",t.content)}}function ee(i,a){if(1&i&&(e.TgZ(0,"div",52)(1,"table",53)(2,"thead",54),e.YNc(3,G,2,3,"th",55),e.qZA(),e.TgZ(4,"tbody"),e.YNc(5,X,7,6,"ng-container",56),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.eventLogsTableHead),e.xp6(2),e.Q6J("ngForOf",t.displayedEvents)}}function te(i,a){1&i&&e._UZ(0,"convoy-empty-state",71)}function ne(i,a){1&i&&(e.ynx(0),e._UZ(1,"div",72)(2,"div",73),e.BQk())}function oe(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",74)(2,"h3",75),e._uU(3,"Details"),e.qZA(),e.TgZ(4,"button",76),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.retryEvent({eventId:o.eventsDetailsItem.uid}))}),e._UZ(5,"img",77),e._uU(6," Replay "),e.qZA()(),e._UZ(7,"prism",78)(8,"div",79)(9,"prism",80),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(7),e.Q6J("code",t.getCodeSnippetString("res_data")),e.xp6(2),e.Q6J("code",t.getCodeSnippetString("header"))}}function ie(i,a){1&i&&(e.TgZ(0,"h3",81),e._uU(1,"Deliveries Overview"),e.qZA())}function se(i,a){1&i&&(e.TgZ(0,"div")(1,"div",82),e._UZ(2,"div",83)(3,"div",84),e.qZA(),e.TgZ(4,"div",82),e._UZ(5,"div",83)(6,"div",84),e.qZA(),e.TgZ(7,"div",82),e._UZ(8,"div",83)(9,"div",84),e.qZA()())}function re(i,a){1&i&&(e.TgZ(0,"div",85),e._uU(1,"...no event deliveries for this event"),e.qZA())}function ae(i,a){1&i&&(e.O4$(),e.TgZ(0,"svg",93),e._UZ(1,"use",94),e.qZA())}const le=function(i){return[i]};function ce(i,a){if(1&i&&(e.TgZ(0,"li",88)(1,"div",89)(2,"div",90),e.ALo(3,"statuscolor"),e._uU(4),e.qZA(),e.YNc(5,ae,2,0,"svg",91),e.qZA(),e.TgZ(6,"div",92),e._uU(7),e.qZA()()),2&i){const t=a.$implicit,n=e.oxw(3);e.Q6J("title",(null==t||null==t.endpoint_metadata?null:t.endpoint_metadata.target_url)||"")("routerLink",e.VKq(9,le,"../events/event-deliveries/"+t.uid))("relativeTo",n.route),e.xp6(2),e.Q6J("type",e.lcZ(3,7,t.status)),e.xp6(2),e.Oqu(t.status),e.xp6(1),e.Q6J("ngIf",t.device_id),e.xp6(2),e.hij(" ",null!=t&&t.device_id?null==t||null==t.device_metadata?null:t.device_metadata.host_name:null==t||null==t.endpoint_metadata?null:t.endpoint_metadata.target_url," ")}}function ve(i,a){if(1&i&&(e.TgZ(0,"ul",86),e.YNc(1,ce,8,11,"li",87),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.sidebarEventDeliveries)}}function pe(i,a){1&i&&e._UZ(0,"convoy-empty-state",95)}function de(i,a){if(1&i&&(e.TgZ(0,"div",39)(1,"div",40),e.YNc(2,K,1,1,"convoy-table-loader",41),e.YNc(3,ee,6,2,"div",42),e.YNc(4,te,1,0,"convoy-empty-state",43),e.qZA(),e.TgZ(5,"div",44)(6,"div",45),e.YNc(7,ne,3,0,"ng-container",46),e.YNc(8,oe,10,2,"ng-container",46),e.YNc(9,ie,2,0,"h3",47),e.YNc(10,se,10,0,"div",46),e.YNc(11,re,2,0,"div",48),e.YNc(12,ve,2,1,"ul",49),e.YNc(13,pe,1,0,"convoy-empty-state",50),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isloadingEvents),e.xp6(1),e.Q6J("ngIf",!t.isloadingEvents&&t.displayedEvents&&t.displayedEvents.length>0),e.xp6(1),e.Q6J("ngIf",!(t.isloadingEvents||t.displayedEvents&&0!==(null==t.displayedEvents?null:t.displayedEvents.length))),e.xp6(3),e.Q6J("ngIf",t.isloadingEvents),e.xp6(1),e.Q6J("ngIf",t.displayedEvents&&t.displayedEvents.length>0),e.xp6(1),e.Q6J("ngIf",!!(t.isloadingEvents||t.displayedEvents&&0!==(null==t.displayedEvents?null:t.displayedEvents.length))),e.xp6(1),e.Q6J("ngIf",t.isLoadingSidebarDeliveries),e.xp6(1),e.Q6J("ngIf",!t.isLoadingSidebarDeliveries&&0==t.sidebarEventDeliveries.length&&t.displayedEvents&&(null==t.displayedEvents?null:t.displayedEvents.length)),e.xp6(1),e.Q6J("ngIf",t.sidebarEventDeliveries.length>0),e.xp6(1),e.Q6J("ngIf",!(t.isloadingEvents||t.displayedEvents&&0!==(null==t.displayedEvents?null:t.displayedEvents.length)))}}function ue(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"convoy-pagination",96),e.NdJ("paginate",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.paginateEvents(o))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("pagination",null==t.events?null:t.events.pagination)}}function ge(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",97)(1,"div",98),e._UZ(2,"img",99),e.TgZ(3,"div",100),e._uU(4,"The filters applied will affect"),e.qZA(),e.TgZ(5,"div",101),e._uU(6),e.qZA(),e.TgZ(7,"button",102),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.batchRetryEvent())}),e._uU(8),e.qZA(),e.TgZ(9,"button",103),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showBatchRetryModal=!1)}),e._uU(10,"No, Cancel"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(6),e.AsE("",t.batchRetryCount||0," event",t.batchRetryCount>1?"s":"",""),e.xp6(1),e.Q6J("disabled",t.isRetrying||0==t.batchRetryCount),e.xp6(1),e.Oqu(t.isRetrying?"Retrying Events...":"Yes, Apply")}}const C=function(i){return{"text-primary-100 !bg-primary-500":i}},me=function(){return{standalone:!0}},_e=function(i){return{"bg-primary-500":i}};let he=(()=>{class i{constructor(t,n,o,s,l,v,Z){this.eventsLogService=t,this.generalService=n,this.route=o,this.router=s,this.privateService=l,this.eventsService=v,this._location=Z,this.eventsDateFilterFromURL={startDate:"",endDate:""},this.eventLogsTableHead=["Event ID","Source Name","Time",""],this.dateOptions=["Last Year","Last Month","Last Week","Yesterday"],this.showEventFilterCalendar=!1,this.isloadingEvents=!1,this.selectedEventsDateOption="",this.eventDetailsTabs=[{id:"data",label:"Event"},{id:"response",label:"Response"},{id:"request",label:"Request"}],this.displayedEvents=[],this.eventDetailsActiveTab="data",this.sidebarEventDeliveries=[],this.eventsTimeFilterData={startTime:"T00:00:00",endTime:"T23:59:59"},this.portalToken=this.route.snapshot.params?.token,this.filterSources=[],this.isLoadingSidebarDeliveries=!0,this.showBatchRetryModal=!1,this.fetchingCount=!1,this.isRetrying=!1}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.getFiltersFromURL(),t.getEvents(),t.portalToken||t.getSourcesForFilter()})()}clearEventFilters(t){const n=Object.assign({},this.route.snapshot.queryParams);let o=[];switch(this.datePicker.clearDate(),this.timeFilter.filterStartHour=0,this.timeFilter.filterStartMinute=0,this.timeFilter.filterEndHour=23,this.timeFilter.filterEndMinute=59,t){case"eventsEndpoint":o=["eventsEndpoint"];break;case"eventsDate":o=["eventsStartDate","eventsEndDate"];break;case"eventsSearch":o=["eventsSearch"];break;case"eventsSource":o=["eventsSource"];break;default:o=["eventsStartDate","eventsEndDate","eventsEndpoint","eventsSearch","eventsSource"]}this.eventsDateFilterFromURL={startDate:"",endDate:""},this.eventsTimeFilterData={startTime:"T00:00:00",endTime:"T23:59:59"},this.eventEndpoint=void 0,this.eventSource=void 0,this.eventsSearchString=void 0,this.timeFilter.clearFilter(),o.forEach(s=>n.hasOwnProperty(s)?delete n[s]:null),this.router.navigate([],{relativeTo:this.route,queryParams:n})}getSourcesForFilter(){var t=this;return(0,p.Z)(function*(){try{const n=(yield t.privateService.getSources()).data.content;t.filterSources=n}catch{}})()}updateEndpointFilter(t,n){this.eventEndpoint=n.target.checked?t:void 0,this.getEvents({addToURL:!0})}updateSourceFilter(t,n){this.eventSource=n.target.checked?t:void 0,this.getEvents({addToURL:!0})}getSelectedDateRange(t){this.eventsDateFilterFromURL={...t},this.getEvents({addToURL:!0})}getCodeSnippetString(t){return"res_data"===t?this.eventsDetailsItem?.data?JSON.stringify(this.eventsDetailsItem?.data||this.eventsDetailsItem?.metadata?.data,null,4).replaceAll(/"([^"]+)":/g,"$1:"):"No event data was sent":"header"===t?this.eventsDetailsItem?.headers?JSON.stringify(this.eventsDetailsItem?.headers,null,4).replaceAll(/"([^"]+)":/g,"$1:"):"No event header was sent":""}setDateForFilter(t){return t.endDate||t.startDate?{startDate:t.startDate?`${(0,d.Z)(t.startDate,"yyyy-MM-dd")}${t?.startTime||"T00:00:00"}`:"",endDate:t.endDate?`${(0,d.Z)(t.endDate,"yyyy-MM-dd")}${t?.endTime||"T23:59:59"}`:""}:{startDate:"",endDate:""}}setTimeFilterData(t){const n={startTime:"",endTime:""};if(t.startDate){const o=new Date(t.startDate).getHours(),s=new Date(t.startDate).getMinutes();this.timeFilter.filterStartHour=o,this.timeFilter.filterStartMinute=s,n.startTime=`T${o<10?"0"+o:o}:${s<10?"0"+s:s}:00`}else n.startTime="T00:00:00";if(t.endDate){const o=new Date(t.endDate).getHours(),s=new Date(t.endDate).getMinutes();this.timeFilter.filterEndHour=o,this.timeFilter.filterEndMinute=s,n.endTime=`T${o<10?"0"+o:o}:${s<10?"0"+s:s}:59`}else n.endTime="T23:59:59";return n}getFiltersFromURL(){const t=this.route.snapshot.queryParams;if(0==Object.keys(t).length)return;this.eventsDateFilterFromURL={startDate:t.eventsStartDate?new Date(t.eventsStartDate):"",endDate:t.eventsEndDate?new Date(t.eventsEndDate):""},this.portalToken||(this.eventEndpoint=t.eventsEndpoint??void 0),this.eventsSearchString=t.eventsSearch??void 0;const n=this.setTimeFilterData({startDate:t?.eventsStartDate,endDate:t?.eventsEndDate});this.eventsTimeFilterData={...n}}addFilterToURL(t){const n=this.route.snapshot.queryParams,o={},{startDate:s,endDate:l}=this.setDateForFilter({...this.eventsDateFilterFromURL,...this.eventsTimeFilterData});s&&(o.eventsStartDate=s),l&&(o.eventsEndDate=l),this.eventEndpoint&&(o.eventsEndpoint=this.eventEndpoint),o.eventsSource=this.eventSource,o.eventsSearch=this.eventsSearchString;const v=Object.assign({},n,o,t),Z=Object.fromEntries(Object.entries(v).filter(([ye,S])=>""!==S&&null!=S)),fe=new URLSearchParams(Z).toString();this._location.go(`${location.pathname}?${fe}`)}getEvents(t,n){var o=this;return(0,p.Z)(function*(){o.isloadingEvents=!0,t?.endpointId&&(o.eventEndpoint=t.endpointId),t?.addToURL&&o.addFilterToURL(),n||(n={next_page_cursor:String(Number.MAX_SAFE_INTEGER)},delete o.eventsDetailsItem,o.sidebarEventDeliveries=[]),o.eventsSearchString&&(o.displayedEvents=[]);const{startDate:s,endDate:l}=o.setDateForFilter({...o.eventsDateFilterFromURL,...o.eventsTimeFilterData});try{const v=yield o.eventsService.getEvents({startDate:s,endDate:l,endpointId:o.eventEndpoint||"",sourceId:o.eventSource||"",query:o.eventsSearchString||"",...n});return o.events=v.data,o.displayedEvents=yield o.generalService.setContentDisplayed(v.data.content),o.eventsDetailsItem=o.events?.content[0],o.eventsDetailsItem?.uid?o.getEventDeliveriesForSidebar(o.eventsDetailsItem.uid):o.isLoadingSidebarDeliveries=!1,o.isloadingEvents=!1,v}catch(v){return o.isloadingEvents=!1,v}})()}getEventDeliveriesForSidebar(t){var n=this;return(0,p.Z)(function*(){n.isLoadingSidebarDeliveries=!0,n.sidebarEventDeliveries=[];try{const o=yield n.eventsService.getEventDeliveries({eventId:t});return n.sidebarEventDeliveries=o.data.content,void(n.isLoadingSidebarDeliveries=!1)}catch(o){return n.isLoadingSidebarDeliveries=!1,o}})()}fetchRetryCount(){var t=this;return(0,p.Z)(function*(){const{startDate:n,endDate:o}=t.setDateForFilter(t.eventsDateFilterFromURL),s=t.route.snapshot.queryParams.page||1;t.fetchingCount=!0;try{const l=yield t.eventsLogService.getRetryCount({page:s,startDate:n,endDate:o,endpointId:t.eventEndpoint||"",sourceId:t.eventSource||""});t.batchRetryCount=l.data.num,t.fetchingCount=!1,t.showBatchRetryModal=!0}catch{t.fetchingCount=!1}})()}retryEvent(t){var n=this;return(0,p.Z)(function*(){try{const o=yield n.eventsLogService.retryEvent({eventId:t.eventId});n.generalService.showNotification({message:o.message,style:"success"}),n.getEvents()}catch(o){return o}})()}batchRetryEvent(){var t=this;return(0,p.Z)(function*(){const{startDate:n,endDate:o}=t.setDateForFilter(t.eventsDateFilterFromURL),s=t.route.snapshot.queryParams.page||1;t.isRetrying=!0;try{const l=yield t.eventsLogService.batchRetryEvent({page:s||1,startDate:n,endDate:o,endpointId:t.eventEndpoint||"",sourceId:t.eventSource||""});t.generalService.showNotification({message:l.message,style:"success"}),t.getEvents(),t.showBatchRetryModal=!1,t.isRetrying=!1}catch(l){return t.isRetrying=!1,l}})()}viewEndpoint(t){!t||this.portalToken||this.router.navigate(["/projects/"+this.privateService.activeProjectDetails?.uid+"/endpoints/"+t])}viewSource(t){!t||this.portalToken||this.router.navigate(["/projects/"+this.privateService.activeProjectDetails?.uid+"/sources/"],{queryParams:{id:t}})}viewEventDeliveries(t){this.router.navigate(["/projects/"+this.privateService.activeProjectDetails?.uid+"/events"],{queryParams:{eventId:t}})}paginateEvents(t){this.addFilterToURL(t),this.getEvents({},t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N),e.Y36(k.m),e.Y36(m.gz),e.Y36(m.F0),e.Y36(Q.i),e.Y36(O.n),e.Y36(c.Ye))},i.\u0275cmp=e.Xpm({type:i,selectors:[["convoy-event-logs"]],viewQuery:function(t,n){if(1&t&&(e.Gf(P,7),e.Gf(j,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.timeFilter=o.first),e.iGM(o=e.CRH())&&(n.datePicker=o.first)}},standalone:!0,features:[e.jDz],decls:40,vars:23,consts:[[1,"text-12","font-medium","flex","items-center","uppercase"],["routerLink","/projects",1,"font-medium","cursor-pointer"],["width","16","height","16",1,"mx-4px"],[0,"xlink","href","#arrow-right-icon"],[1,"text-primary-100","font-medium"],[1,"flex","py-24px","items-center","justify-between"],[1,"flex"],[1,"border","border-primary-400","h-36px","px-14px","py-0","max-w-[350px]","w-full","rounded-[10px]","flex","items-center","bg-transparent",3,"ngClass"],["src","/assets/img/search-icon.svg","alt","search icon",1,"mr-10px"],["type","search","placeholder","Search events",1,"w-full","text-grey-40","text-14","outline-none","bg-transparent",3,"ngModel","ngModelOptions","ngClass","ngModelChange","change"],["src","/assets/img/enter-icon.png","alt","enter icon",1,"w-16px"],[1,"ml-14px",3,"dateRangeValue","selectedDateRange","clearDates"],["datePicker",""],[1,"ml-14px",3,"applyFilter"],["timeFilter",""],["convoy-dropdown","","size","lg","position","left",3,"hidden"],["sourcesDropdown",""],["dropdownTrigger","","convoy-button","","size","sm","fill","outline",1,"px-10px","!border-primary-400","ml-16px","min-w-[130px]","whitespace-nowrap","justify-between","h-36px",3,"ngClass"],["src","/assets/img/apps-icon-grey.svg","alt","apps filter icon",1,"w-14px","mr-10px"],[1,"text-grey-40","w-full"],["src","/assets/img/angle-arrow-down.svg","alt","arrow down icon",1,"ml-10px","mr-0px","w-14px"],["dropdownOptions",""],[1,"min-h-[100px]","py-10px"],["class","py-4px px-20px flex items-center justify-between border-b border-grey-10","convoy-list-item","","convoy-dropdown-option","",4,"ngFor","ngForOf"],["class","p-10px pb-20px",4,"ngIf"],["convoy-button","","size","sm","fill","outline",1,"ml-14px","px-10px","border-primary-400","h-36px","whitespace-nowrap",3,"disabled","click"],["convoy-button","","fill","outline","size","sm",3,"click",4,"ngIf"],["class","py-200px","convoy-card","",4,"ngIf","ngIfElse"],["eventsList",""],[3,"pagination","paginate",4,"ngIf"],["convoy-modal","","position","center","size","sm",4,"ngIf"],["convoy-list-item","","convoy-dropdown-option","",1,"py-4px","px-20px","flex","items-center","justify-between","border-b","border-grey-10"],[1,"text-12","block","w-full",3,"for"],["type","checkbox","name","source",3,"value","id","checked","change"],[1,"p-10px","pb-20px"],["convoy-dropdown-option","","convoy-button","","size","sm",3,"click"],["convoy-button","","fill","outline","size","sm",3,"click"],["convoy-card","",1,"py-200px"],["imgSrc","/assets/img/events-empty-state-image.svg","description","You currently do not have any event logs",1,"min-h-[70vh]"],["convoy-card","",1,"flex"],[1,"min-w-[605px]","w-full","h-full","overflow-hidden","relative"],["id","events_loader_loader",3,"tableHead",4,"ngIf"],["class","min-h-[70vh] overflow-y-auto overflow-x-auto w-full min-w-[485px]","id","events-table-container",4,"ngIf"],["type","table","imgSrc","/assets/img/empty-state.svg","className","min-h-[70vh]","description","No event to show here",4,"ngIf"],[1,"max-w-[450px]","w-full","max-h-[calc(100vh","-","950px)]","min-h-[707px]","overflow-auto","relative","border-l","border-grey-10"],[1,"p-16px"],[4,"ngIf"],["class","text-16 font-bold mb-16px mt-26px",4,"ngIf"],["class","mt-30px italic w-full text-grey-20",4,"ngIf"],["class","-ml-10px",4,"ngIf"],["type","table","imgSrc","/assets/img/empty-state.svg","className","min-h-[70vh]","description","No event details to show here",4,"ngIf"],["id","events_loader_loader",3,"tableHead"],["id","events-table-container",1,"min-h-[70vh]","overflow-y-auto","overflow-x-auto","w-full","min-w-[485px]"],["convoy-table",""],["convoy-table-head",""],["convoy-table-head-cell","",3,"class",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["convoy-table-head-cell",""],["convoy-table-row","",3,"forDate"],["convoy-table-cell","",3,"forDate"],["convoy-table-row","","class","group",3,"active","click",4,"ngFor","ngForOf"],["convoy-table-row","",1,"group",3,"active","click"],["convoy-table-cell","",1,"w-130px","pl-16px","pr-30px","relative"],["type","grey","className","max-w-[100px] overflow-hidden overflow-ellipsis mr-8px"],["notificationText","Event ID has been copied to clipboard","className","absolute translate-x-0 translate-y-[-50%] top-[50] hidden group-hover:block",3,"text"],["convoy-table-cell",""],[1,"max-w-[200px]"],[1,"overflow-hidden","overflow-ellipsis",3,"ngClass","click"],["convoy-table-cell","",1,""],["convoy-button","","fill","clear","size","sm",1,"pr-0",3,"click"],["src","assets/img/angle-arrow-right-primary.svg","alt","arrow right",1,"ml-16px","h-16px"],["type","table","imgSrc","/assets/img/empty-state.svg","className","min-h-[70vh]","description","No event to show here"],[1,"bg-grey-10","rounded-8px","animate-pulse","h-150px","w-full","mr-40px","mb-20px"],[1,"bg-grey-10","rounded-8px","animate-pulse","h-150px","w-full","mr-40px"],[1,"flex","items-center","justify-between","mb-16px"],[1,"text-16","font-bold"],["convoy-button","","size","xs","texture","light",3,"click"],["src","assets/img/refresh-icon-primary.svg","alt","refresh icon",1,"mr-10px"],["language","json","title","Event",3,"code"],[1,"mb-20px"],["language","json","title","Header",3,"code"],[1,"text-16","font-bold","mb-16px","mt-26px"],[1,"flex","mb-20px"],[1,"bg-grey-10","rounded-[24px]","animate-pulse","h-4","w-[60px]","mr-40px"],[1,"bg-grey-10","rounded-[24px]","animate-pulse","h-4","w-[200px]"],[1,"mt-30px","italic","w-full","text-grey-20"],[1,"-ml-10px"],["convoy-list-item","","class","cursor-pointer flex !justify-start mb-10px hover:bg-primary-500 p-10px rounded-4px transition-colors",3,"title","routerLink","relativeTo",4,"ngFor","ngForOf"],["convoy-list-item","",1,"cursor-pointer","flex","!justify-start","mb-10px","hover:bg-primary-500","p-10px","rounded-4px","transition-colors",3,"title","routerLink","relativeTo"],[1,"flex","items-center"],["convoy-tag","","className","mr-20px",3,"type"],["width","16","height","14","class","mr-4px",4,"ngIf"],[1,"text-14","whitespace-nowrap","overflow-ellipsis","max-w-[300px]","overflow-hidden","text-grey-40"],["width","16","height","14",1,"mr-4px"],[0,"xlink","href","#cli-icon"],["type","table","imgSrc","/assets/img/empty-state.svg","className","min-h-[70vh]","description","No event details to show here"],[3,"pagination","paginate"],["convoy-modal","","position","center","size","sm"],[1,"text-center","py-30px"],["src","/assets/img/filter.gif","alt","filter icon",1,"w-50px","m-auto","mb-16px"],[1,"text-center","text-16","font-medium","text-grey-60","mb-8px"],[1,"text-center","text-16","font-semibold","mb-32px"],["convoy-button","",1,"m-auto",3,"disabled","click"],["convoy-button","","fill","clear",1,"font-semibold","m-auto",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"a",1),e._uU(2,"Projects"),e.qZA(),e.O4$(),e.TgZ(3,"svg",2),e._UZ(4,"use",3),e.qZA(),e._uU(5),e.TgZ(6,"svg",2),e._UZ(7,"use",3),e.qZA(),e.kcU(),e.TgZ(8,"span",4),e._uU(9,"Events Log"),e.qZA()(),e.TgZ(10,"div",5)(11,"div",6)(12,"form",7),e._UZ(13,"img",8),e.TgZ(14,"input",9),e.NdJ("ngModelChange",function(s){return n.eventsSearchString=s})("change",function(){return n.getEvents({addToURL:!0})}),e.qZA(),e.TgZ(15,"button"),e._UZ(16,"img",10),e.qZA()(),e.TgZ(17,"convoy-date-picker",11,12),e.NdJ("selectedDateRange",function(s){return n.getSelectedDateRange(s)})("clearDates",function(){return n.clearEventFilters("eventsDate")}),e.qZA(),e.TgZ(19,"convoy-time-picker",13,14),e.NdJ("applyFilter",function(s){return n.eventsTimeFilterData=s,n.getEvents({addToURL:!0})}),e.qZA(),e.TgZ(21,"div",15,16)(23,"button",17),e._UZ(24,"img",18),e.TgZ(25,"span",19),e._uU(26,"All Sources"),e.qZA(),e._UZ(27,"img",20),e.qZA(),e.ynx(28,21),e.TgZ(29,"ul",22),e.YNc(30,H,4,5,"li",23),e.qZA(),e.YNc(31,$,3,0,"div",24),e.BQk(),e.qZA(),e.TgZ(32,"button",25),e.NdJ("click",function(){return n.fetchRetryCount(),n.showBatchRetryModal=!0}),e._uU(33," Batch Replay "),e.qZA()(),e.YNc(34,z,2,0,"button",26),e.qZA(),e.YNc(35,B,2,0,"div",27),e.YNc(36,de,14,10,"ng-template",null,28,e.W1O),e.YNc(38,ue,1,1,"convoy-pagination",29),e.YNc(39,ge,11,4,"div",30)),2&t){const o=e.MAs(37);e.xp6(5),e.hij(" ",null==n.privateService.activeProjectDetails?null:n.privateService.activeProjectDetails.name," "),e.xp6(7),e.Q6J("ngClass",e.VKq(16,C,null!=n.eventsSearchString&&""!=n.eventsSearchString)),e.xp6(2),e.Q6J("ngModel",n.eventsSearchString)("ngModelOptions",e.DdM(18,me))("ngClass",e.VKq(19,_e,null!=n.eventsSearchString&&""!=n.eventsSearchString)),e.xp6(3),e.Q6J("dateRangeValue",n.eventsDateFilterFromURL),e.xp6(4),e.Q6J("hidden",n.portalToken),e.xp6(2),e.Q6J("ngClass",e.VKq(21,C,!!n.eventSource)),e.xp6(7),e.Q6J("ngForOf",n.filterSources),e.xp6(1),e.Q6J("ngIf",!!n.eventSource),e.xp6(1),e.Q6J("disabled",!(""!=n.eventsDateFilterFromURL.startDate&&""!=n.eventsDateFilterFromURL.endDate||0!=(null==n.eventEndpoint?null:n.eventEndpoint.length)&&null!=n.eventEndpoint||"T00:00:00"!=n.eventsTimeFilterData.startTime||"T23:59:59"!=n.eventsTimeFilterData.endTime||0!=(null==n.eventSource?null:n.eventSource.length)&&null!=n.eventSource)),e.xp6(2),e.Q6J("ngIf",!!(""!=n.eventsDateFilterFromURL.startDate&&""!=n.eventsDateFilterFromURL.endDate||0!=(null==n.eventEndpoint?null:n.eventEndpoint.length)&&null!=n.eventEndpoint||0!=(null==n.eventsSearchString?null:n.eventsSearchString.length)&&null!=n.eventsSearchString||"T00:00:00"!=n.eventsTimeFilterData.startTime||"T23:59:59"!=n.eventsTimeFilterData.endTime||0!=(null==n.eventSource?null:n.eventSource.length)&&null!=n.eventSource)),e.xp6(1),e.Q6J("ngIf",!(n.isloadingEvents||n.displayedEvents&&0!==(null==n.displayedEvents?null:n.displayedEvents.length)))("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",(null==n.events||null==n.events.pagination?null:n.events.pagination.has_next_page)||(null==n.events||null==n.events.pagination?null:n.events.pagination.has_prev_page)),e.xp6(1),e.Q6J("ngIf",n.showBatchRetryModal)}},dependencies:[c.ez,c.mk,c.sg,c.O5,c.uU,m.Bz,m.rH,m.yS,f.u5,f._Y,f.Fj,f.JJ,f.JL,f.On,f.F,b.K,M.k,L.F,q.U,w.q,x.A,E.r,T.s,_.Z,D._,Y.X,g.ac,g.Bh,g.xh,g.R4,g.A,u.e,h.L,U.J,R.zS,I.Q,A.K]}),i})()}}]);
//# sourceMappingURL=399.f80b2fab12606b51.js.map