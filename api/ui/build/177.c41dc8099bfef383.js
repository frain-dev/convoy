"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[177],{493:(Z,h,a)=>{a.d(h,{k:()=>e});var r=a(4151);let e=(()=>{class d{transform(y){let u="grey";switch(y){case"default":case"offline":u="grey";break;case"active":case"Success":case"success":case"online":u="success";break;case"Pending":u="warning";break;case"Failed":case"Failure":case"disabled":u="danger"}return u}}return d.\u0275fac=function(y){return new(y||d)},d.\u0275pipe=r.Yjl({name:"statuscolor",type:d,pure:!0}),d})()},5454:(Z,h,a)=>{a.d(h,{z:()=>y});var r=a(7073),e=a(4151),d=a(1354),x=a(385);let y=(()=>{class u{constructor(){this.closeModal=new e.vpe,this.deleteData=new e.vpe,this.isLoading=!1}ngOnInit(){}}return u.\u0275fac=function(v){return new(v||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-delete-modal"]],inputs:{isLoading:"isLoading",deleteText:"deleteText",deleteButtonText:"deleteButtonText"},outputs:{closeModal:"closeModal",deleteData:"deleteData"},standalone:!0,features:[e.jDz],decls:11,vars:3,consts:[["convoy-modal","","position","center","size","sm",3,"closeModal"],[1,"flex","flex-col","justify-center","items-center","px-20px","py-30px"],["src","/assets/img/warning.gif","alt","warning",1,"h-[126px]","w-[126px]"],[1,"text-16","font-semibold","text-black","mb-8px","text-center"],[1,"text-14","font-medium","text-grey-40","mb-20px"],["convoy-button","","color","danger",1,"mb-24px",3,"disabled","click"],["convoy-button","","fill","text",1,"font-semibold",3,"click"]],template:function(v,g){1&v&&(e.TgZ(0,"div",0),e.NdJ("closeModal",function(){return g.closeModal.emit()}),e.TgZ(1,"div",1),e._UZ(2,"img",2),e.TgZ(3,"p",3),e._uU(4),e.qZA(),e.TgZ(5,"p",4),e._uU(6,"This action is irrevesible."),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return g.deleteData.emit()}),e._uU(8),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return g.closeModal.emit()}),e._uU(10,"No, Cancel"),e.qZA()()()),2&v&&(e.xp6(4),e.hij("Are you sure you want to ",g.deleteText,"?"),e.xp6(3),e.Q6J("disabled",g.isLoading),e.xp6(1),e.Oqu(g.deleteButtonText?"Yes, "+g.deleteButtonText:"Yes, Delete"))},dependencies:[r.ez,x.zS,d.r]}),u})()},372:(Z,h,a)=>{a.d(h,{J:()=>u});var r=a(4151),e=a(7073),d=a(385),x=a(1549),y=a(1354);let u=(()=>{class i{constructor(){this.closeModal=new r.vpe}ngOnInit(){}}return i.\u0275fac=function(g){return new(g||i)},i.\u0275cmp=r.Xpm({type:i,selectors:[["convoy-token-modal"]],inputs:{title:"title",description:"description",token:"token",notificationText:"notificationText"},outputs:{closeModal:"closeModal"},standalone:!0,features:[r.jDz],decls:13,vars:5,consts:[["convoy-modal","","position","center"],[1,"flex","flex-col","items-center","justify-center","py-60px","px-30px"],["src","/assets/img/success.gif","alt","success",1,"h-150px","w-150px"],[1,"font-semibold","mt-16px"],[1,"text-14","text-grey-60","font-normal","text-center","mb-60px","mt-8px","max-w-[270px]","m-auto"],[1,"flex","items-center","justify-between","w-full","h-50px","border","border-grey-10","bg-[#F7F9FC]","rounded-[6px]","px-16px","mb-32px"],[1,"text-16","text-grey-60","font-normal","whitespace-nowrap","w-250px","overflow-hidden","text-ellipsis"],[3,"text","notificationText"],["convoy-button","","size","sm","type","button",1,"px-40px",3,"click"]],template:function(g,f){1&g&&(r.TgZ(0,"div",0)(1,"div",1),r._UZ(2,"img",2),r.TgZ(3,"h2",3),r._uU(4),r.qZA(),r.TgZ(5,"p",4),r._uU(6),r.qZA(),r.TgZ(7,"div",5)(8,"span",6),r._uU(9),r.qZA(),r._UZ(10,"convoy-copy-button",7),r.qZA(),r.TgZ(11,"button",8),r.NdJ("click",function(){return f.closeModal.emit()}),r._uU(12,"Done"),r.qZA()()()),2&g&&(r.xp6(4),r.Oqu(f.title),r.xp6(2),r.Oqu(f.description),r.xp6(3),r.Oqu(f.token),r.xp6(1),r.Q6J("text",f.token)("notificationText",f.notificationText))},dependencies:[e.ez,d.zS,x.K,y.r]}),i})()},177:(Z,h,a)=>{a.r(h),a.d(h,{AccountModule:()=>pe});var r=a(7073),e=a(4151),d=a(7205),x=a(2895),y=a(3117),u=a(9369),i=a(6907),v=a(8542),g=a(3755);let f=(()=>{class o{constructor(t){this.http=t}logout(){var t=this;return(0,u.Z)(function*(){try{return yield t.http.request({url:"/auth/logout",method:"post",body:null})}catch(n){return n}})()}editBasicInfo(t){var n=this;return new Promise(function(){var s=(0,u.Z)(function*(c,p){try{return c(yield n.http.request({url:`/users/${t.userId}/profile`,body:t.body,method:"put"}))}catch(m){return p(m)}});return function(c,p){return s.apply(this,arguments)}}())}changePassword(t){var n=this;return new Promise(function(){var s=(0,u.Z)(function*(c,p){try{return c(yield n.http.request({url:`/users/${t.userId}/password`,body:t.body,method:"put"}))}catch(m){return p(m)}});return function(c,p){return s.apply(this,arguments)}}())}fetchPersonalKeys(t){var n=this;return new Promise(function(){var s=(0,u.Z)(function*(c,p){try{return c(yield n.http.request({url:`/users/${t.userId}/security/personal_api_keys`,method:"get",query:{keyType:"personal_key",page:t.page}}))}catch(m){return p(m)}});return function(c,p){return s.apply(this,arguments)}}())}generatePersonalKey(t,n){var s=this;return new Promise(function(){var c=(0,u.Z)(function*(p,m){try{return p(yield s.http.request({url:`/users/${t}/security/personal_api_keys`,method:"post",body:n}))}catch(A){return m(A)}});return function(p,m){return c.apply(this,arguments)}}())}revokeKey(t){var n=this;return new Promise(function(){var s=(0,u.Z)(function*(c,p){try{return c(yield n.http.request({url:`/users/${t.userId}/security/personal_api_keys/${t.keyId}/revoke`,method:"put",body:null}))}catch(m){return p(m)}});return function(c,p){return s.apply(this,arguments)}}())}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.O))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var w=a(4330),T=a(1354),P=a(2065),b=a(5454),k=a(372),C=a(545),K=a(455),S=a(5456),_=a(2187),I=a(493);function F(o,l){1&o&&(e.TgZ(0,"div",12)(1,"div")(2,"div",13),e._UZ(3,"convoy-skeleton-loader",14)(4,"convoy-skeleton-loader",15),e.qZA(),e._UZ(5,"convoy-skeleton-loader",16),e.qZA(),e._UZ(6,"convoy-skeleton-loader",16),e.qZA())}function N(o,l){if(1&o&&(e.ynx(0),e.YNc(1,F,7,0,"div",11),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.loaderIndex)}}function M(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"h3",18),e._uU(2,"Personal Access Tokens"),e.qZA(),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.showCreateNewTokenForm=!0)}),e.O4$(),e.TgZ(4,"svg",20),e._UZ(5,"use",21),e.qZA(),e._uU(6," Create New Token "),e.qZA()()}}function q(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("Expires At: (",e.xi3(2,1,t.expires_at,"mediumDate"),")")}}function J(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw(2);return c.selectedKey=s,e.KtG(c.showRevokeKeyModal=!0)}),e.O4$(),e.TgZ(1,"svg",30),e._UZ(2,"use",31),e.qZA(),e._uU(3," Revoke "),e.qZA()}}function O(o,l){if(1&o&&(e.TgZ(0,"div",23)(1,"div")(2,"div",24)(3,"p",25),e._uU(4),e.qZA(),e.TgZ(5,"convoy-tag",26),e.ALo(6,"statuscolor"),e._uU(7),e.qZA()(),e.TgZ(8,"p",27),e.YNc(9,q,3,4,"span",0),e.qZA()(),e.YNc(10,J,4,0,"button",28),e.qZA()),2&o){const t=l.$implicit,n=e.oxw(2);e.xp6(4),e.Oqu(t.name),e.xp6(1),e.Q6J("type",e.lcZ(6,5,n.getKeyStatus(t.expires_at))),e.xp6(2),e.Oqu(n.getKeyStatus(t.expires_at)),e.xp6(2),e.Q6J("ngIf",t.expires_at),e.xp6(1),e.Q6J("ngIf","active"===n.getKeyStatus(t.expires_at))}}function D(o,l){if(1&o&&(e.ynx(0),e.YNc(1,O,11,7,"div",22),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.personalAccessKeys?null:t.personalAccessKeys.content)}}function Y(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32),e.NdJ("onAction",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.showCreateNewTokenForm=!0)}),e.qZA(),e.BQk()}}function B(o,l){1&o&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Please enter a name for your token"),e.qZA())}function Q(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"h3",33),e._uU(2,"Generate Token"),e.qZA(),e.TgZ(3,"form",34),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.generateNewKey())}),e.TgZ(4,"convoy-input-field")(5,"label",35),e._uU(6,"Token Name"),e.qZA(),e._UZ(7,"input",36),e.YNc(8,B,2,0,"convoy-input-error",0),e.qZA(),e.TgZ(9,"convoy-select",37),e.NdJ("selectedOption",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.generateKeyForm.patchValue({expiration:s}))}),e.qZA(),e.TgZ(10,"div",38)(11,"button",39),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.showCreateNewTokenForm=!1)}),e._uU(12,"Discard"),e.qZA(),e.TgZ(13,"button",40),e._uU(14,"Generate Key"),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw();let n;e.xp6(3),e.Q6J("formGroup",t.generateKeyForm),e.xp6(5),e.Q6J("ngIf",(null==(n=t.generateKeyForm.get("name"))?null:n.touched)&&(null==(n=t.generateKeyForm.get("name"))?null:n.invalid)),e.xp6(1),e.Q6J("options",t.expirationDates)}}function E(o,l){if(1&o){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"convoy-token-modal",41),e.NdJ("closeModal",function(){e.CHM(t);const s=e.oxw();return s.showAccessKey=!1,e.KtG(s.fetchPersonalKeys())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("token",t.accessKey)}}function L(o,l){if(1&o){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"app-delete-modal",42),e.NdJ("closeModal",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.showRevokeKeyModal=!1)})("deleteData",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.revokeKey())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("isLoading",t.isRevokingKey)("deleteText","revoke \u201c"+(null==t.selectedKey?null:t.selectedKey.name)+"api key\u201d")}}const G=function(o){return{invisible:o}},U=function(o){return{page:o}};let z=(()=>{class o{constructor(t,n,s,c,p){this.formBuilder=t,this.accountService=n,this.generalService=s,this.router=c,this.route=p,this.showCreateNewTokenForm=!1,this.isFetchingKeys=!1,this.isGeneratingNewKey=!1,this.showAccessKey=!1,this.showRevokeKeyModal=!1,this.isRevokingKey=!1,this.loaderIndex=[0,1,2],this.expirationDates=[{name:"7 days",uid:7},{name:"14 days",uid:14},{name:"30 days",uid:30},{name:"90 days",uid:90}],this.generateKeyForm=this.formBuilder.group({name:["",i.kI.required],expiration:[null]})}ngOnInit(){this.getUserId()}getUserId(){const t=localStorage.getItem("CONVOY_AUTH");t&&"undefined"!==t?(this.userId=JSON.parse(t)?.uid,this.fetchPersonalKeys()):this.router.navigateByUrl("/login")}generateNewKey(){var t=this;return(0,u.Z)(function*(){if(t.generateKeyForm.invalid)t.generateKeyForm.markAllAsTouched();else{t.generateKeyForm.value.expiration=parseInt(t.generateKeyForm.value.expiration),t.isGeneratingNewKey=!0;try{const n=yield t.accountService.generatePersonalKey(t.userId,t.generateKeyForm.value);t.accessKey=n.data.key,t.showCreateNewTokenForm=!1,t.showAccessKey=!0,t.generateKeyForm.reset(),t.generalService.showNotification({message:n.message,style:"success"}),t.isGeneratingNewKey=!1}catch{return void(t.isGeneratingNewKey=!1)}}})()}fetchPersonalKeys(t){var n=this;return(0,u.Z)(function*(){n.isFetchingKeys=!0;const s=t?.page||n.route.snapshot.queryParams.page||1;try{const c=yield n.accountService.fetchPersonalKeys({userId:n.userId,page:s});n.personalAccessKeys=c.data,n.isFetchingKeys=!1}catch{n.isFetchingKeys=!1}})()}revokeKey(){var t=this;return(0,u.Z)(function*(){t.isRevokingKey=!0;try{const n=yield t.accountService.revokeKey({userId:t.userId,keyId:t.selectedKey?.uid});t.generalService.showNotification({message:n.message,style:"success"}),t.isRevokingKey=!1,t.showRevokeKeyModal=!1,t.fetchPersonalKeys()}catch{t.isRevokingKey=!1}})()}getSelectedDate(t){const n=`${(0,v.Z)(t,"yyyy-MM-dd")}T11:59:59Z`;this.generateKeyForm.patchValue({expires_at:n})}getKeyStatus(t){return new Date>new Date(t)?"disabled":"active"}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(f),e.Y36(w.m),e.Y36(d.F0),e.Y36(d.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["personal-settings"]],decls:16,vars:18,consts:[[4,"ngIf"],["class","flex justify-between items-center mb-28px",4,"ngIf"],[1,"flex","items-center","mt-16px",3,"ngClass"],["convoy-button","","fill","outline","size","sm","routerLink","./","disabled","",1,"pl-4px","pr-16px","py-4px","border-primary-300",3,"queryParams","disabled","click"],["width","24","height","24",1,"mr-8px","fill-primary-100"],[0,"xlink","href","#arrow-left-icon"],["convoy-button","","fill","outline","size","sm","routerLink","./",1,"pr-4px","pl-16px","py-4px","border-primary-300","ml-16px",3,"queryParams","disabled","click"],["width","24","height","24",1,"ml-8px","fill-primary-100"],[0,"xlink","href","#arrow-right-icon"],["title","Generate Token","description","Your personal API key has been generated successfully","notificationText","Personal API key has been copied to your clipboard.",3,"token","closeModal",4,"ngIf"],["deleteButtonText","revoke",3,"isLoading","deleteText","closeModal","deleteData",4,"ngIf"],["class","flex justify-between items-center py-12px",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","py-12px"],[1,"flex","items-center","mb-8px"],["className","h-20px w-100px"],["className","h-14px w-60px ml-10px"],["className","h-14px w-120px"],[1,"flex","justify-between","items-center","mb-28px"],[1,"font-semibold"],["convoy-button","","size","sm",3,"click"],["width","16","height","16",1,"mr-8px","fill-white-100"],[0,"xlink","href","#plus-icon"],["class","flex justify-between items-center py-12px border-b border-b-grey-10 last-of-type:border-none",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","py-12px","border-b","border-b-grey-10","last-of-type:border-none"],[1,"flex","items-center"],[1,"font-medium","text-12","mr-14px"],[3,"type"],[1,"text-grey-40","text-10","mt-8px"],["convoy-button","","size","sm","fill","text","color","danger",3,"click",4,"ngIf"],["convoy-button","","size","sm","fill","text","color","danger",3,"click"],["width","16","height","16",1,"mr-8px","fill-danger-100"],[0,"xlink","href","#delete-icon"],["convoy-empty-state","","imgSrc","/assets/img/new-empty-state.png","heading","You currently do not have any personal access tokens.","buttonText","Generate New Token",1,"py-100px",3,"onAction"],[1,"font-semibold","mb-28px"],[3,"formGroup","ngSubmit"],["for","name","required","true","convoy-label",""],["type","text","id","name","convoy-input","","autocomplete","name","formControlName","name","placeholder","Token name"],["label","Expiry Duration","name","expiration","formControlName","expiration",3,"options","selectedOption"],[1,"flex","justify-end","mt-60px"],["convoy-button","","type","button","fill","outline",1,"mr-3","transition-all","duration-300","hover:text-danger-100","hover:border-danger-100",3,"click"],["convoy-button",""],["title","Generate Token","description","Your personal API key has been generated successfully","notificationText","Personal API key has been copied to your clipboard.",3,"token","closeModal"],["deleteButtonText","revoke",3,"isLoading","deleteText","closeModal","deleteData"]],template:function(t,n){1&t&&(e.YNc(0,N,2,1,"ng-container",0),e.YNc(1,M,7,0,"div",1),e.YNc(2,D,2,1,"ng-container",0),e.YNc(3,Y,2,0,"ng-container",0),e.YNc(4,Q,15,3,"ng-container",0),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return n.fetchPersonalKeys({page:null==n.personalAccessKeys||null==n.personalAccessKeys.pagination?null:n.personalAccessKeys.pagination.prev})}),e.O4$(),e.TgZ(7,"svg",4),e._UZ(8,"use",5),e.qZA(),e._uU(9," Previous "),e.qZA(),e.kcU(),e.TgZ(10,"button",6),e.NdJ("click",function(){return n.fetchPersonalKeys({page:null==n.personalAccessKeys||null==n.personalAccessKeys.pagination?null:n.personalAccessKeys.pagination.next})}),e._uU(11," Next "),e.O4$(),e.TgZ(12,"svg",7),e._UZ(13,"use",8),e.qZA()()(),e.YNc(14,E,1,1,"convoy-token-modal",9),e.YNc(15,L,1,2,"app-delete-modal",10)),2&t&&(e.Q6J("ngIf",n.isFetchingKeys&&!n.showCreateNewTokenForm),e.xp6(1),e.Q6J("ngIf",!n.showCreateNewTokenForm&&(null==n.personalAccessKeys||null==n.personalAccessKeys.content?null:n.personalAccessKeys.content.length)>0),e.xp6(1),e.Q6J("ngIf",!n.isFetchingKeys&&n.personalAccessKeys&&!n.showCreateNewTokenForm),e.xp6(1),e.Q6J("ngIf",!n.isFetchingKeys&&0===(null==n.personalAccessKeys||null==n.personalAccessKeys.content?null:n.personalAccessKeys.content.length)&&!n.showCreateNewTokenForm),e.xp6(1),e.Q6J("ngIf",n.showCreateNewTokenForm),e.xp6(1),e.Q6J("ngClass",e.VKq(12,G,0===(null==n.personalAccessKeys||null==n.personalAccessKeys.content?null:n.personalAccessKeys.content.length)||(null==n.personalAccessKeys||null==n.personalAccessKeys.content?null:n.personalAccessKeys.content.length)<10||n.showCreateNewTokenForm)),e.xp6(1),e.Q6J("queryParams",e.VKq(14,U,null==n.personalAccessKeys||null==n.personalAccessKeys.pagination?null:n.personalAccessKeys.pagination.prev))("disabled",0===(null==n.personalAccessKeys||null==n.personalAccessKeys.pagination?null:n.personalAccessKeys.pagination.prev)),e.xp6(4),e.Q6J("queryParams",e.VKq(16,U,null==n.personalAccessKeys||null==n.personalAccessKeys.pagination?null:n.personalAccessKeys.pagination.next))("disabled",0===(null==n.personalAccessKeys||null==n.personalAccessKeys.pagination?null:n.personalAccessKeys.pagination.next)),e.xp6(4),e.Q6J("ngIf",n.showAccessKey),e.xp6(1),e.Q6J("ngIf",n.showRevokeKeyModal))},dependencies:[r.mk,r.sg,r.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.rH,T.r,P.s,b.z,k.J,C.t,K.Z,S.H,_.uZ,_.wo,_.Vd,_._n,r.uU,I.k]}),o})();var j=a(6440);function R(o,l){1&o&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Please enter your first name"),e.qZA())}function $(o,l){1&o&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Please enter your last name"),e.qZA())}function H(o,l){1&o&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Please enter a valid email"),e.qZA())}let V=(()=>{class o{constructor(t,n,s,c,p){this.formBuilder=t,this.router=n,this.accountService=s,this.privateService=c,this.generalService=p,this.isSavingUserDetails=!1,this.isUpdatingPassword=!1,this.isFetchingUserDetails=!1,this.passwordToggle={oldPassword:!1,newPassword:!1,confirmPassword:!1},this.editBasicInfoForm=this.formBuilder.group({first_name:["",i.kI.required],last_name:["",i.kI.required],email:["",i.kI.compose([i.kI.required,i.kI.email])]})}ngOnInit(){this.getAuthDetails()}getAuthDetails(){const t=localStorage.getItem("CONVOY_AUTH");if(t&&"undefined"!==t){const n=JSON.parse(t);this.editBasicInfoForm.patchValue({first_name:n?.first_name,last_name:n?.last_name,email:n?.email}),this.userId=n?.uid}else this.router.navigateByUrl("/login")}editBasicUserInfo(){var t=this;return(0,u.Z)(function*(){if(t.editBasicInfoForm.invalid)return t.editBasicInfoForm.markAllAsTouched();t.isSavingUserDetails=!0;try{const n=yield t.accountService.editBasicInfo({userId:t.userId,body:t.editBasicInfoForm.value});t.generalService.showNotification({style:"success",message:"Changes saved successfully!"}),localStorage.setItem("CONVOY_AUTH",JSON.stringify(n.data)),t.isSavingUserDetails=!1}catch{t.isSavingUserDetails=!1}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(d.F0),e.Y36(f),e.Y36(j.i),e.Y36(w.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["profile-settings"]],decls:22,vars:6,consts:[[1,"flex","justify-between","items-center","mb-28px"],[1,"font-semibold"],["convoy-button","","size","sm",3,"disabled","click"],[3,"formGroup"],[1,"grid","grid-cols-2","gap-4"],["for","first_name","required","true","convoy-label",""],["type","text","id","first_name","convoy-input","","autocomplete","first_name","formControlName","first_name","placeholder","First name"],[4,"ngIf"],["for","last_name","required","true","convoy-label",""],["type","text","id","last_name","convoy-input","","autocomplete","last_name","formControlName","last_name","placeholder","Last name"],["for","email","required","true","convoy-label",""],["type","email","id","email","convoy-input","","autocomplete","email","formControlName","email","placeholder","Last name"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Basic Info"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.editBasicUserInfo()}),e._uU(4),e.qZA()(),e.TgZ(5,"form",3)(6,"div",4)(7,"convoy-input-field")(8,"label",5),e._uU(9,"First name"),e.qZA(),e._UZ(10,"input",6),e.YNc(11,R,2,0,"convoy-input-error",7),e.qZA(),e.TgZ(12,"convoy-input-field")(13,"label",8),e._uU(14,"Last name"),e.qZA(),e._UZ(15,"input",9),e.YNc(16,$,2,0,"convoy-input-error",7),e.qZA()(),e.TgZ(17,"convoy-input-field")(18,"label",10),e._uU(19,"Email"),e.qZA(),e._UZ(20,"input",11),e.YNc(21,H,2,0,"convoy-input-error",7),e.qZA()()),2&t){let s,c,p;e.xp6(3),e.Q6J("disabled",n.isSavingUserDetails),e.xp6(1),e.Oqu(n.isSavingUserDetails?"Saving changes...":"Save Changes"),e.xp6(1),e.Q6J("formGroup",n.editBasicInfoForm),e.xp6(6),e.Q6J("ngIf",(null==(s=n.editBasicInfoForm.get("first_name"))?null:s.touched)&&(null==(s=n.editBasicInfoForm.get("first_name"))?null:s.invalid)),e.xp6(5),e.Q6J("ngIf",(null==(c=n.editBasicInfoForm.get("last_name"))?null:c.touched)&&(null==(c=n.editBasicInfoForm.get("last_name"))?null:c.invalid)),e.xp6(5),e.Q6J("ngIf",(null==(p=n.editBasicInfoForm.get("email"))?null:p.touched)&&(null==(p=n.editBasicInfoForm.get("email"))?null:p.invalid))}},dependencies:[r.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,T.r,_.uZ,_.wo,_.Vd,_._n]}),o})();function W(o,l){1&o&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Enter current password"),e.qZA())}function X(o,l){1&o&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Enter new password"),e.qZA())}function ee(o,l){1&o&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Enter new password"),e.qZA())}function te(o,l){1&o&&(e.TgZ(0,"div",17),e._UZ(1,"img",18),e.TgZ(2,"span"),e._uU(3,"Password should have at least one special character"),e.qZA()())}let ne=(()=>{class o{constructor(t,n,s){this.formBuilder=t,this.accountService=n,this.generalService=s,this.isUpdatingPassword=!1,this.passwordToggle={oldPassword:!1,newPassword:!1,confirmPassword:!1},this.changePasswordForm=this.formBuilder.group({current_password:["",i.kI.required],password:["",i.kI.required],password_confirmation:["",i.kI.required]})}ngOnInit(){}changePassword(){var t=this;return(0,u.Z)(function*(){if(t.changePasswordForm.invalid)return t.changePasswordForm.markAllAsTouched();t.isUpdatingPassword=!0;try{let n=localStorage.getItem("CONVOY_AUTH");n&&(n=JSON.parse(n)?.uid);const s=yield t.accountService.changePassword({userId:n||"",body:t.changePasswordForm.value});t.generalService.showNotification({style:"success",message:s.message}),t.changePasswordForm.reset(),t.isUpdatingPassword=!1}catch{t.isUpdatingPassword=!1}})()}checkPassword(){return this.changePasswordForm.value.password===this.changePasswordForm.value.password_confirmation}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(f),e.Y36(w.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["security-settings"]],decls:31,vars:7,consts:[[1,"flex","justify-between","items-center","mb-28px"],[1,"font-semibold"],["convoy-button","","size","sm",3,"disabled","click"],[3,"formGroup","ngSubmit"],["for","current_password","required","true","convoy-label",""],["type","password","id","current_password","convoy-input","","autocomplete","current_password","formControlName","current_password","placeholder","********"],[4,"ngIf"],[1,"text-12","-mt-18px","mb-24px"],["routerLink","/forgot-password",1,"text-primary-100","text-12","ml-8px"],["for","password","required","true","convoy-label",""],["type","password","id","password","convoy-input","","autocomplete","password","formControlName","password","placeholder","********"],["for","password_confirmation","required","true","convoy-label",""],["type","password","id","password_confirmation","convoy-input","","autocomplete","password_confirmation","formControlName","password_confirmation","placeholder","********"],["class","flex items-center text-12 text-danger-100 mt-8px mb-24px",4,"ngIf"],[1,"flex","items-start","bg-primary-500","border","border-dashed","border-primary-100","rounded-8px","py-10px","px-16px","mt-24px","w-full"],["src","/assets/img/ideas.svg","alt","idea",1,"mr-20px"],[1,"text-14"],[1,"flex","items-center","text-12","text-danger-100","mt-8px","mb-24px"],["src","assets/img/input-error-icon.svg","alt","input error icon",1,"mr-8px","w-16px"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Change Password"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.changePassword()}),e._uU(4),e.qZA()(),e.TgZ(5,"form",3),e.NdJ("ngSubmit",function(){return n.changePassword()}),e.TgZ(6,"convoy-input-field")(7,"label",4),e._uU(8,"Current Password"),e.qZA(),e._UZ(9,"input",5),e.YNc(10,W,2,0,"convoy-input-error",6),e.qZA(),e.TgZ(11,"div",7)(12,"span"),e._uU(13,"Forgot password?"),e.qZA(),e.TgZ(14,"a",8),e._uU(15,"Reset it here"),e.qZA()(),e.TgZ(16,"convoy-input-field")(17,"label",9),e._uU(18,"New Password"),e.qZA(),e._UZ(19,"input",10),e.YNc(20,X,2,0,"convoy-input-error",6),e.qZA(),e.TgZ(21,"convoy-input-field")(22,"label",11),e._uU(23,"Confirm Password"),e.qZA(),e._UZ(24,"input",12),e.YNc(25,ee,2,0,"convoy-input-error",6),e.qZA(),e.YNc(26,te,4,0,"div",13),e.qZA(),e.TgZ(27,"div",14),e._UZ(28,"img",15),e.TgZ(29,"p",16),e._uU(30,"Use a strong password with at least 8 characters long, and having a mixed of letters, numbers, and symbols."),e.qZA()()),2&t){let s,c;e.xp6(3),e.Q6J("disabled",n.isUpdatingPassword),e.xp6(1),e.Oqu(n.isUpdatingPassword?"Saving changes...":"Save Changes"),e.xp6(1),e.Q6J("formGroup",n.changePasswordForm),e.xp6(5),e.Q6J("ngIf",(null==(s=n.changePasswordForm.get("current_password"))?null:s.touched)&&(null==(s=n.changePasswordForm.get("current_password"))?null:s.invalid)),e.xp6(10),e.Q6J("ngIf",(null==(c=n.changePasswordForm.get("password"))?null:c.touched)&&(null==(c=n.changePasswordForm.get("password"))?null:c.invalid)),e.xp6(5),e.Q6J("ngIf",n.changePasswordForm.controls.password.valid&&n.changePasswordForm.controls.password_confirmation.valid&&n.changePasswordForm.controls.password_confirmation.touched&&!n.checkPassword()),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.controls.password.valid&&n.changePasswordForm.controls.password_confirmation.valid&&n.changePasswordForm.controls.password_confirmation.touched&&!n.checkPassword())}},dependencies:[r.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.yS,T.r,_.uZ,_.wo,_.Vd,_._n]}),o})();function oe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"button",9),e.NdJ("click",function(){const c=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.toggleActivePage(c.name))}),e.O4$(),e.TgZ(2,"svg",10),e._UZ(3,"use"),e.qZA(),e.kcU(),e.TgZ(4,"span",11),e._uU(5),e.qZA()()()}if(2&o){const t=l.$implicit,n=e.oxw();e.xp6(1),e.Tol(n.activePage===t.name?"bg-primary-500 text-primary-100 rounded-8px transition-all duration-300 py-12px !px-16px mb-20px !justify-start min-w-[216px]":"text-grey-40 rounded-8px transition-all duration-300 py-12px !px-16px mb-20px !justify-start min-w-[216px]"),e.xp6(1),e.Tol("profile"===t.name?n.activePage===t.name?"stroke-primary-100 transition-all duration-300":"stroke-grey-40 transition-all duration-300":n.activePage===t.name?"fill-primary-100 transition-all duration-300":"fill-grey-40 transition-all duration-300"),e.Q6J("id",t.icon),e.xp6(1),e.uIk("href","#"+t.icon+"-icon",null,"xlink"),e.xp6(2),e.Oqu(t.name)}}function se(o,l){1&o&&(e.ynx(0),e._UZ(1,"profile-settings"),e.BQk())}function re(o,l){1&o&&(e.ynx(0),e._UZ(1,"security-settings"),e.BQk())}function ae(o,l){1&o&&(e.ynx(0),e._UZ(1,"personal-settings"),e.BQk())}let ie=(()=>{class o{constructor(t,n){this.router=t,this.route=n,this.activePage="profile",this.settingsMenu=[{name:"profile",icon:"profile"},{name:"security",icon:"security"},{name:"personal access tokens",icon:"key"}]}ngOnInit(){this.toggleActivePage(this.route.snapshot.queryParams?.activePage??"profile")}toggleActivePage(t){this.activePage=t,this.router.url.split("/")[2]||this.addPageToUrl()}addPageToUrl(){const t={};t.activePage=this.activePage,this.router.navigate([],{queryParams:Object.assign({},t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.F0),e.Y36(d.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-account"]],decls:12,vars:4,consts:[["convoy-page","","size","md"],["convoy-card","",1,"flex","p-0"],[1,"border-r","border-r-grey-10","w-full","max-w-[300px]"],[1,"border-b","border-b-grey-10","px-40px","py-20px"],[1,"font-semibold"],[1,"pl-40px","py-32px"],[4,"ngFor","ngForOf"],[1,"px-32px","py-18px","min-h-[60vh]","w-full"],[4,"ngIf"],[1,"flex","items-center",3,"click"],["width","18","height","18",1,"mr-10px","transition-all","duration-200",3,"id"],[1,"font-medium","text-14","transition-all","duration-200","whitespace-nowrap","capitalize"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"Settings"),e.qZA()(),e.TgZ(6,"ul",5),e.YNc(7,oe,6,7,"li",6),e.qZA()(),e.TgZ(8,"div",7),e.YNc(9,se,2,0,"ng-container",8),e.YNc(10,re,2,0,"ng-container",8),e.YNc(11,ae,2,0,"ng-container",8),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",n.settingsMenu),e.xp6(2),e.Q6J("ngIf","profile"===n.activePage),e.xp6(1),e.Q6J("ngIf","security"===n.activePage),e.xp6(1),e.Q6J("ngIf","personal access tokens"===n.activePage))},dependencies:[r.sg,r.O5,x.i,y.A,z,V,ne]}),o})();var le=a(1549),ce=a(3579);const ue=[{path:"",component:ie}];let pe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[r.ez,i.UX,d.Bz.forChild(ue),T.r,y.A,P.s,b.z,k.J,le.K,C.t,K.Z,ce.K,S.H,_.wo,_._n]}),o})()}}]);
//# sourceMappingURL=177.c41dc8099bfef383.js.map