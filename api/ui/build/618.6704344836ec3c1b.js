"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[618],{2065:(P,k,l)=>{l.d(k,{s:()=>g});var r=l(7073),o=l(4151),h=l(1354);function y(u,t){if(1&u&&o._UZ(0,"img",6),2&u){const f=o.oxw();o.Q6J("src",f.imgSrc,o.LSH)}}function b(u,t){if(1&u&&(o.TgZ(0,"h2",7),o._uU(1),o.qZA()),2&u){const f=o.oxw();o.xp6(1),o.Oqu(f.heading)}}function v(u,t){if(1&u&&(o.TgZ(0,"p",8),o._uU(1),o.qZA()),2&u){const f=o.oxw();o.xp6(1),o.Oqu(f.description)}}function _(u,t){if(1&u){const f=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(){o.CHM(f);const Z=o.oxw();return o.KtG(Z.onAction.emit())}),o._uU(1),o.qZA()}if(2&u){const f=o.oxw();o.xp6(1),o.Oqu(f.buttonText)}}const x=[[["","emptyStateCTA",""]]],c=["[emptyStateCTA]"];let g=(()=>{class u{constructor(){this.onAction=new o.vpe}ngOnInit(){}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275cmp=o.Xpm({type:u,selectors:[["convoy-empty-state"],["","convoy-empty-state",""]],inputs:{imgSrc:"imgSrc",heading:"heading",description:"description",buttonText:"buttonText"},outputs:{onAction:"onAction"},standalone:!0,features:[o.jDz],ngContentSelectors:c,decls:7,vars:4,consts:[[1,"flex","flex-col","items-center","justify-center"],["alt","empty state","class","mb-46px max-h-[156px]",3,"src",4,"ngIf"],["class","font-semibold mb-14px text-center",4,"ngIf"],["class","text-14 text-grey-60 w-full max-w-[600px] text-center mt-8px",4,"ngIf"],["convoy-button","","class","mt-22px",3,"click",4,"ngIf"],[1,"empty:hidden"],["alt","empty state",1,"mb-46px","max-h-[156px]",3,"src"],[1,"font-semibold","mb-14px","text-center"],[1,"text-14","text-grey-60","w-full","max-w-[600px]","text-center","mt-8px"],["convoy-button","",1,"mt-22px",3,"click"]],template:function(f,L){1&f&&(o.F$t(x),o.TgZ(0,"div",0),o.YNc(1,y,1,1,"img",1),o.YNc(2,b,2,1,"h2",2),o.YNc(3,v,2,1,"p",3),o.YNc(4,_,2,1,"button",4),o.TgZ(5,"div",5),o.Hsn(6),o.qZA()()),2&f&&(o.xp6(1),o.Q6J("ngIf",L.imgSrc),o.xp6(1),o.Q6J("ngIf",L.heading),o.xp6(1),o.Q6J("ngIf",L.description),o.xp6(1),o.Q6J("ngIf",L.buttonText))},dependencies:[r.ez,r.O5,h.r],encapsulation:2}),u})()},5454:(P,k,l)=>{l.d(k,{z:()=>b});var r=l(7073),o=l(4151),h=l(1354),y=l(385);let b=(()=>{class v{constructor(){this.closeModal=new o.vpe,this.deleteData=new o.vpe,this.isLoading=!1}ngOnInit(){}}return v.\u0275fac=function(x){return new(x||v)},v.\u0275cmp=o.Xpm({type:v,selectors:[["app-delete-modal"]],inputs:{isLoading:"isLoading",deleteText:"deleteText",deleteButtonText:"deleteButtonText"},outputs:{closeModal:"closeModal",deleteData:"deleteData"},standalone:!0,features:[o.jDz],decls:11,vars:3,consts:[["convoy-modal","","position","center","size","sm",3,"closeModal"],[1,"flex","flex-col","justify-center","items-center","px-20px","py-30px"],["src","/assets/img/warning.gif","alt","warning",1,"h-[126px]","w-[126px]"],[1,"text-16","font-semibold","text-black","mb-8px","text-center"],[1,"text-14","font-medium","text-grey-40","mb-20px"],["convoy-button","","color","danger",1,"mb-24px",3,"disabled","click"],["convoy-button","","fill","text",1,"font-semibold",3,"click"]],template:function(x,c){1&x&&(o.TgZ(0,"div",0),o.NdJ("closeModal",function(){return c.closeModal.emit()}),o.TgZ(1,"div",1),o._UZ(2,"img",2),o.TgZ(3,"p",3),o._uU(4),o.qZA(),o.TgZ(5,"p",4),o._uU(6,"This action is irrevesible."),o.qZA(),o.TgZ(7,"button",5),o.NdJ("click",function(){return c.deleteData.emit()}),o._uU(8),o.qZA(),o.TgZ(9,"button",6),o.NdJ("click",function(){return c.closeModal.emit()}),o._uU(10,"No, Cancel"),o.qZA()()()),2&x&&(o.xp6(4),o.hij("Are you sure you want to ",c.deleteText,"?"),o.xp6(3),o.Q6J("disabled",c.isLoading),o.xp6(1),o.Oqu(c.deleteButtonText?"Yes, "+c.deleteButtonText:"Yes, Delete"))},dependencies:[r.ez,y.zS,h.r]}),v})()},4430:(P,k,l)=>{l.d(k,{Q:()=>v});var r=l(4151),o=l(7073),h=l(7205),y=l(1354);function b(_,x){if(1&_){const c=r.EpF();r.TgZ(0,"div",1)(1,"button",2),r.NdJ("click",function(){r.CHM(c);const u=r.oxw();return r.KtG(u.prev({prev_page_cursor:u.paginationData.prev_page_cursor}))}),r.O4$(),r.TgZ(2,"svg",3),r._UZ(3,"use",4),r.qZA(),r._uU(4," Previous "),r.qZA(),r.kcU(),r.TgZ(5,"button",5),r.NdJ("click",function(){r.CHM(c);const u=r.oxw();return r.KtG(u.next({next_page_cursor:u.paginationData.next_page_cursor}))}),r._uU(6," Next "),r.O4$(),r.TgZ(7,"svg",6),r._UZ(8,"use",7),r.qZA()()()}if(2&_){const c=r.oxw();r.xp6(1),r.Q6J("disabled",!c.paginationData.has_prev_page),r.xp6(4),r.Q6J("disabled",!c.paginationData.has_next_page)}}let v=(()=>{class _{constructor(){this.paginate=new r.vpe}ngOnInit(){}next(c){this.paginate.emit({...c,direction:"next",prev_page_cursor:""})}prev(c){this.paginate.emit({...c,direction:"prev",next_page_cursor:""})}}return _.\u0275fac=function(c){return new(c||_)},_.\u0275cmp=r.Xpm({type:_,selectors:[["convoy-pagination"]],inputs:{paginationData:["pagination","paginationData"]},outputs:{paginate:"paginate"},standalone:!0,features:[r.jDz],decls:1,vars:1,consts:[["class","flex items-center mt-16px mb-24px",4,"ngIf"],[1,"flex","items-center","mt-16px","mb-24px"],["convoy-button","","fill","outline","size","sm",1,"pl-4px","pr-16px","py-4px","border-primary-300",3,"disabled","click"],["width","24","height","24",1,"mr-8px","fill-primary-100"],[0,"xlink","href","#arrow-left-icon"],["convoy-button","","fill","outline","size","sm",1,"pr-4px","pl-16px","py-4px","border-primary-300","ml-16px",3,"disabled","click"],["width","24","height","24",1,"ml-8px","fill-primary-100"],[0,"xlink","href","#arrow-right-icon"]],template:function(c,g){1&c&&r.YNc(0,b,9,2,"div",0),2&c&&r.Q6J("ngIf",g.paginationData)},dependencies:[o.ez,o.O5,h.Bz,y.r]}),_})()},2618:(P,k,l)=>{l.r(k),l.d(k,{PortalLinksComponent:()=>pt});var r=l(9369),o=l(7073),h=l(1354),y=l(3117),b=l(2065),v=l(7205),_=l(385),x=l(2187),c=l(5456),g=l(6907),u=l(1549),t=l(4151),f=l(6440),L=l(4330),Z=l(3755);let T=(()=>{class i{constructor(n){this.http=n}createPortalLink(n){var e=this;return new Promise(function(){var a=(0,r.Z)(function*(s,d){try{return s(yield e.http.request({url:"/portal-links",method:"post",body:n.data,level:"org_project"}))}catch(m){return d(m)}});return function(s,d){return a.apply(this,arguments)}}())}updatePortalLink(n){var e=this;return new Promise(function(){var a=(0,r.Z)(function*(s,d){try{return s(yield e.http.request({url:`/portal-links/${n.linkId}`,method:"put",body:n.data,level:"org_project"}))}catch(m){return d(m)}});return function(s,d){return a.apply(this,arguments)}}())}getPortalLink(n){var e=this;return new Promise(function(){var a=(0,r.Z)(function*(s,d){try{return s(yield e.http.request({url:`/portal-links/${n}`,method:"get",level:"org_project"}))}catch(m){return d(m)}});return function(s,d){return a.apply(this,arguments)}}())}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(Z.O))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function w(i,p){if(1&i&&(t.ynx(0),t.TgZ(1,"p",22),t._uU(2,"URL"),t.qZA(),t.TgZ(3,"div",23)(4,"span",24),t._uU(5),t.qZA(),t._UZ(6,"convoy-copy-button",25),t.qZA(),t.BQk()),2&i){const n=t.oxw();t.xp6(5),t.Oqu(n.portalLink||""),t.xp6(1),t.Q6J("text",n.portalLink||"")}}function E(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.goBack())}),t._uU(1,"Cancel"),t.qZA()}}function U(i,p){if(1&i){const n=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.goBack())}),t._uU(1,"Done"),t.qZA()}}const A=function(i){return{"pointer-events-none":i}};let M=(()=>{class i{constructor(n,e,a,s,d,m){this.formBuilder=n,this.privateService=e,this.generalService=a,this.createPortalLinkService=s,this.router=d,this.route=m,this.portalLinkForm=this.formBuilder.group({name:[null,g.kI.required],endpoints:[null,g.kI.required]}),this.isCreatingPortalLink=!1,this.fetchingLinkDetails=!1,this.linkUid=this.route.snapshot.params.id}ngOnInit(){var n=this;return(0,r.Z)(function*(){n.getEndpoints(),n.linkUid&&(yield n.getPortalLink())})()}savePortalLink(){var n=this;return(0,r.Z)(function*(){n.isCreatingPortalLink=!0;try{const e=n.linkUid?yield n.createPortalLinkService.updatePortalLink({linkId:n.linkUid,data:n.portalLinkForm.value}):yield n.createPortalLinkService.createPortalLink({data:n.portalLinkForm.value});n.generalService.showNotification({message:e.message,style:"success"}),n.linkUid||(n.portalLink=e.data.url),n.linkUid&&n.goBack(),n.isCreatingPortalLink=!1}catch{n.isCreatingPortalLink=!1}})()}getEndpoints(n){var e=this;return(0,r.Z)(function*(){try{const s=(yield e.privateService.getEndpoints({q:n})).data.content;s.forEach(d=>{d.name=d.title}),e.endpoints=s}catch{}})()}getPortalLink(){var n=this;return(0,r.Z)(function*(){n.fetchingLinkDetails=!0;try{const a=(yield n.createPortalLinkService.getPortalLink(n.linkUid)).data;n.portalLinkForm.patchValue({name:a.name,endpoints:a.endpoints}),n.fetchingLinkDetails=!1}catch{n.fetchingLinkDetails=!1}})()}goBack(){this.router.navigateByUrl("/projects/"+this.privateService.activeProjectDetails?.uid+"/portal-links")}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(g.qu),t.Y36(f.i),t.Y36(L.m),t.Y36(T),t.Y36(v.F0),t.Y36(v.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["convoy-create-portal-link"]],standalone:!0,features:[t.jDz],decls:28,vars:15,consts:[["convoy-modal","","position","full",3,"closeModal"],["convoy-modal-header","","fullscreen","true"],[1,"flex","items-center"],["convoy-button","","size","sm","texture","light",1,"px-10px","!py-10px",3,"click"],["src","/assets/img/modal-close-icon.svg","alt","close icon",1,"w-12px"],[1,"font-semibold","capitalize","ml-2"],[1,"max-w-[834px]","m-auto"],[3,"formGroup","ngSubmit"],["convoy-card","",1,"p-24px","mt-40px"],[1,"font-semibold","mb-8px"],[1,"text-grey-60","text-14","mb-20px","max-w-[577px]"],["for","link-name","convoy-label","","required","true"],["id","link-name","convoy-input","","autocomplete","name","formControlName","name","placeholder","Link name",3,"readonly"],[3,"ngClass"],["label","Endpoints","name","endpoints","formControlName","endpoints","errorMessage","Endpoints is required","className","mb-24px",3,"options","required","multiple","searchable","searchString","selectedOption"],[4,"ngIf"],[1,"flex","justify-end","items-center","my-60px"],["convoy-button","","class","mr-16px text-14 transition-all duration-300 hover:text-danger-100 hover:border-danger-100","fill","outline","type","button",3,"click",4,"ngIf"],["convoy-button","",3,"disabled"],["width","24","height","24",1,"fill-white-100"],[0,"xlink","href","#arrow-right-icon"],["convoy-button","","class","ml-16px text-14","type","button","fill","outline",3,"click",4,"ngIf"],[1,"text-grey-40","text-12","mt-20px"],[1,"flex","items-center","justify-between","w-full","h-50px","bg-[#F7F9FC]","border","border-grey-10","rounded-[6px]","px-16px","mb-12px","last-of-type:mb-8px"],[1,"text-14","font-normal","whitespace-nowrap","w-450px","overflow-hidden","text-ellipsis"],["notificationText","URL has been copied to clipboard!",3,"text"],["convoy-button","","fill","outline","type","button",1,"mr-16px","text-14","transition-all","duration-300","hover:text-danger-100","hover:border-danger-100",3,"click"],["convoy-button","","type","button","fill","outline",1,"ml-16px","text-14",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.NdJ("closeModal",function(){return e.goBack()}),t.TgZ(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return e.goBack()}),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"h2",5),t._uU(6),t.qZA()()(),t.TgZ(7,"div",6)(8,"form",7),t.NdJ("ngSubmit",function(){return e.savePortalLink()}),t.TgZ(9,"div",8)(10,"h2",9),t._uU(11),t.qZA(),t.TgZ(12,"p",10),t._uU(13,"Portal link is a mini Convoy dashboard for your for your receiving endpoint owners to easily review and debug their webhook events from you."),t.qZA(),t.TgZ(14,"convoy-input-field")(15,"label",11),t._uU(16,"Link Name"),t.qZA(),t._UZ(17,"input",12),t.qZA(),t.TgZ(18,"div",13)(19,"convoy-select",14),t.NdJ("searchString",function(s){return e.getEndpoints(s)})("selectedOption",function(s){return e.portalLinkForm.patchValue({endpoints:s})}),t.qZA()(),t.YNc(20,w,7,2,"ng-container",15),t.qZA(),t.TgZ(21,"div",16),t.YNc(22,E,2,0,"button",17),t.TgZ(23,"button",18),t._uU(24," Save Portal Link "),t.O4$(),t.TgZ(25,"svg",19),t._UZ(26,"use",20),t.qZA()(),t.YNc(27,U,2,0,"button",21),t.qZA()()()()),2&n&&(t.xp6(6),t.Oqu(e.linkUid?"Update Portal Link":"Create Portal Link"),t.xp6(2),t.Q6J("formGroup",e.portalLinkForm),t.xp6(3),t.hij("",e.linkUid?"Update":"Create"," Portal Link"),t.xp6(6),t.Q6J("readonly",e.portalLink),t.xp6(1),t.Q6J("ngClass",t.VKq(13,A,e.portalLink)),t.xp6(1),t.Q6J("options",e.endpoints)("required",!0)("multiple",!0)("searchable",!0),t.xp6(1),t.Q6J("ngIf",e.portalLink),t.xp6(2),t.Q6J("ngIf",!e.portalLink),t.xp6(1),t.Q6J("disabled",e.isCreatingPortalLink||e.portalLink),t.xp6(4),t.Q6J("ngIf",e.portalLink))},dependencies:[o.ez,o.mk,o.O5,_.zS,_.Rb,x.Vd,x.uZ,x._n,c.H,y.A,h.r,g.UX,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.sg,g.u,u.K]}),i})();var D=l(1616),I=l(5454),C=l(7888),J=l(2516),O=l(3927),S=l(1143),F=l(3940),N=l(3720),q=l(9902),Q=l(3270),j=l(4430);let Y=(()=>{class i{constructor(n){this.http=n}getPortalLinks(n){var e=this;return new Promise(function(){var a=(0,r.Z)(function*(s,d){try{return!n?.next_page_cursor&&!n?.prev_page_cursor&&(n={next_page_cursor:String(Number.MAX_SAFE_INTEGER),direction:"next",endpointId:n?.endpointId}),s(yield e.http.request({url:"/portal-links",method:"get",level:"org_project",query:n}))}catch(m){return d(m)}});return function(s,d){return a.apply(this,arguments)}}())}revokePortalLink(n){var e=this;return new Promise(function(){var a=(0,r.Z)(function*(s,d){try{return s(yield e.http.request({url:`/portal-links/${n.linkId}/revoke`,method:"put",body:null,level:"org_project"}))}catch(m){return d(m)}});return function(s,d){return a.apply(this,arguments)}}())}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(Z.O))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const z=["linksEndpointFilter"];function K(i,p){1&i&&t._UZ(0,"img",31)}function B(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(a){t.CHM(n);const s=t.oxw();return t.KtG(s.clearEndpointFilter(a))}),t.O4$(),t.TgZ(1,"svg",33),t._UZ(2,"use",34),t.qZA()()}}const R=function(i){return{"bg-primary-500":i}};function G(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"li",35)(1,"button",36),t.NdJ("click",function(){const s=t.CHM(n).$implicit,d=t.oxw();return t.KtG(d.updateEndpointFilter(s.uid))}),t._uU(2),t.qZA()()}if(2&i){const n=p.$implicit,e=t.oxw();t.Q6J("ngClass",t.VKq(2,R,n.uid===e.linkEndpoint)),t.xp6(2),t.hij(" ",n.title," ")}}function H(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"div",37)(1,"button",38),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.clearEndpointFilter())}),t._uU(2,"Clear"),t.qZA()()}}function $(i,p){1&i&&(t.TgZ(0,"convoy-button",39),t._uU(1,"Create Portal Link"),t.qZA())}function W(i,p){1&i&&(t.TgZ(0,"div",40),t._UZ(1,"div",41)(2,"div",41)(3,"div",41)(4,"div",41)(5,"div",41)(6,"div",41),t.qZA())}const V=function(){return["./"]},X=function(i){return{id:i}};function tt(i,p){if(1&i&&(t.TgZ(0,"div",43)(1,"div",44)(2,"div",45)(3,"div",46),t._uU(4),t.qZA(),t.O4$(),t.TgZ(5,"svg",47),t._UZ(6,"use",3),t.qZA()()(),t.kcU(),t.TgZ(7,"div",48)(8,"div",49)(9,"span",50),t._uU(10),t.qZA(),t.TgZ(11,"span",51),t._uU(12,"Endpoint(s)"),t.qZA()(),t._UZ(13,"div",52),t.TgZ(14,"convoy-copy-button",53)(15,"span",54),t._uU(16,"Copy Portal Link"),t.qZA()()()()),2&i){const n=p.$implicit;t.Q6J("id","portal-link"+p.index)("routerLink",t.DdM(6,V))("queryParams",t.VKq(7,X,n.uid)),t.xp6(4),t.Oqu(n.name),t.xp6(6),t.Oqu(n.endpoint_count),t.xp6(4),t.Q6J("text",n.url)}}function nt(i,p){if(1&i&&(t.ynx(0),t.TgZ(1,"div",40),t.YNc(2,tt,17,9,"div",42),t.qZA(),t.BQk()),2&i){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",null==n.portalLinks?null:n.portalLinks.content)}}function et(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"convoy-pagination",55),t.NdJ("paginate",function(a){t.CHM(n);const s=t.oxw();return t.KtG(s.getPortalLinks(a))}),t.qZA()}if(2&i){const n=t.oxw();t.Q6J("pagination",null==n.portalLinks?null:n.portalLinks.pagination)}}function ot(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"div",56)(1,"div",57),t.NdJ("onAction",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.openCreateLinkModal())}),t.qZA()()}}function it(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"li",72)(1,"div",73),t._uU(2),t.qZA(),t.TgZ(3,"div",74)(4,"button",75),t.NdJ("click",function(){const s=t.CHM(n).$implicit,d=t.oxw(2);return t.KtG(d.viewEndpoint(s))}),t.O4$(),t.TgZ(5,"svg",76),t._UZ(6,"use",3),t.qZA()()()()}if(2&i){const n=p.$implicit;t.xp6(2),t.Oqu(null==n?null:n.title)}}function rt(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"div",58),t.NdJ("closeModal",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.router.navigate([],{queryParams:{}}))}),t.TgZ(1,"div",59)(2,"h2",60),t._uU(3),t.qZA(),t.TgZ(4,"button",61),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.router.navigate([],{queryParams:{}}))}),t._UZ(5,"img",62),t.qZA()(),t.TgZ(6,"div",63)(7,"ul"),t.YNc(8,it,7,1,"li",64),t.qZA(),t.TgZ(9,"div",65)(10,"button",66),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.showDeleteModal=!0)}),t._uU(11," Delete Portal Link "),t.O4$(),t.TgZ(12,"svg",67),t._UZ(13,"use",68),t.qZA()(),t.kcU(),t.TgZ(14,"button",69),t._uU(15," Edit Portal Link "),t.O4$(),t.TgZ(16,"svg",70),t._UZ(17,"use",71),t.qZA()()()()()}if(2&i){const n=t.oxw();t.Q6J("id","source-details"),t.xp6(3),t.Oqu((null==n.activeLink?null:n.activeLink.name)||"Portal Link Details"),t.xp6(5),t.Q6J("ngForOf",null==n.activeLink?null:n.activeLink.endpoints_metadata),t.xp6(6),t.Q6J("routerLink","/projects/"+(null==n.privateService.activeProjectDetails?null:n.privateService.activeProjectDetails.uid)+"/portal-links/"+(null==n.activeLink?null:n.activeLink.uid)+"/edit")}}function at(i,p){1&i&&t._UZ(0,"convoy-create-portal-link")}function lt(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"app-delete-modal",77),t.NdJ("closeModal",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.showDeleteModal=!1)})("deleteData",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.revokeLink())}),t.qZA()}if(2&i){const n=t.oxw();t.Q6J("isLoading",n.isRevokingLink)("deleteText","revoke \u201c"+(null==n.activeLink?null:n.activeLink.name)+"\u201d")}}const st=function(i){return{"text-primary-100 !bg-primary-500":i}};let pt=(()=>{class i{constructor(n,e,a,s,d){this.privateService=n,this.router=e,this.portalLinksService=a,this.route=s,this.generalService=d,this.showCreatePortalLinkModal="new"===this.router.url.split("/")[4],this.showEditPortalLinkModal="edit"===this.router.url.split("/")[5],this.isLoadingPortalLinks=!1,this.showDeleteModal=!1,this.isRevokingLink=!1,this.linkEndpoint=this.route.snapshot.queryParams.linksEndpoint,this.linksTableHead=["Link Name","Endpoints","URL","Created",""],this.route.queryParams.subscribe(m=>this.activeLink=this.portalLinks?.content.find(ct=>ct.uid===m?.id))}ngOnInit(){this.getPortalLinks()}ngAfterViewInit(){this.linksEndpointFilter$=(0,J.R)(this.linksEndpointFilter?.nativeElement,"keyup").pipe((0,O.U)(n=>n.target.value),(0,S.O)(""),(0,F.b)(500),(0,N.x)(),(0,q.w)(n=>this.getEndpointsForFilter(n)))}getPortalLinks(n){var e=this;return(0,r.Z)(function*(){e.isLoadingPortalLinks=!0;try{const a=yield e.portalLinksService.getPortalLinks({...n,endpointId:e.linkEndpoint});e.portalLinks=a.data,(e.portalLinks?.pagination?.total||0)>0&&(e.activeLink=e.portalLinks?.content.find(s=>s.uid===e.route.snapshot.queryParams?.id)),e.isLoadingPortalLinks=!1}catch{e.isLoadingPortalLinks=!1}})()}revokeLink(){var n=this;return(0,r.Z)(function*(){if(n.activeLink){n.isRevokingLink=!0;try{const e=yield n.portalLinksService.revokePortalLink({linkId:n.activeLink?.uid});n.generalService.showNotification({message:e.message,style:"success"}),n.isRevokingLink=!1,n.showDeleteModal=!1,n.getPortalLinks()}catch{n.isRevokingLink=!1}}})()}searchLinks(n){}getEndpointsForFilter(n){var e=this;return(0,r.Z)(function*(){return yield(yield e.privateService.getEndpoints({q:n})).data.content})()}updateEndpointFilter(n){this.linkEndpoint=n,this.getPortalLinks()}clearEndpointFilter(n){n?.stopPropagation(),this.linkEndpoint=void 0,this.getPortalLinks()}openCreateLinkModal(){this.router.navigateByUrl("/projects/"+this.privateService.activeProjectDetails?.uid+"/portal-links/new")}viewEndpoint(n){this.router.navigateByUrl("/projects/"+this.privateService.activeProjectDetails?.uid+"/endpoints/"+n.uid)}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(f.i),t.Y36(v.F0),t.Y36(Y),t.Y36(v.gz),t.Y36(L.m))},i.\u0275cmp=t.Xpm({type:i,selectors:[["convoy-portal-links"]],viewQuery:function(n,e){if(1&n&&t.Gf(z,7),2&n){let a;t.iGM(a=t.CRH())&&(e.linksEndpointFilter=a.first)}},standalone:!0,features:[t.jDz],decls:41,vars:18,consts:[[1,"text-12","font-medium","flex","items-center","uppercase"],["routerLink","/projects",1,"font-medium","cursor-pointer"],["width","16","height","16",1,"mx-4px"],[0,"xlink","href","#arrow-right-icon"],[1,"text-primary-100","font-medium"],[1,"flex","justify-between","items-end","mt-24px","border-b","border-b-grey-10","pb-20px","mb-24px"],[1,"flex","items-center"],[1,"text-24","font-bold","text-grey-80","mr-10px"],["tooltipContent","Portals links allows you to view and debug webhook events sent to selected endpoints on a streamlined dashboard. On a portal page only events sent to the endpoints you've selected will be shown.","position","right"],[1,"flex","items-center","justify-between","my-26px"],["convoy-dropdown","","size","lg","position","left"],["dropdownTrigger","","convoy-button","","size","sm","fill","outline",1,"px-10px","!border-primary-400","min-w-[140px]","whitespace-nowrap","justify-between","h-36px",3,"ngClass"],["src","/assets/img/apps-icon-grey.svg","alt","apps filter icon",1,"w-14px","mr-10px"],[1,"text-grey-40","w-full"],["class","ml-10px mr-0px w-14px","src","/assets/img/angle-arrow-down.svg","alt","arrow down icon",4,"ngIf"],["type","button",3,"click",4,"ngIf"],["dropdownOptions",""],[1,"m-10px","border","border-primary-400","h-36px","px-14px","rounded-[10px]","flex","items-center","bg-white-100"],["src","/assets/img/search-icon.svg","alt","search icon",1,"mr-10px","w-14px"],["type","search","placeholder","Search endpoints here",1,"w-full","outline-none","text-12"],["linksEndpointFilter",""],[1,"min-h-[100px]","pb-10px"],["class","py-8px flex items-center justify-between border-b border-grey-10 px-10px","convoy-dropdown-option","",3,"ngClass",4,"ngFor","ngForOf"],["class","p-10px pb-20px flex justify-end",4,"ngIf"],["size","sm","routerLink","./new",4,"ngIf"],["class","flex flex-wrap gap-24px",4,"ngIf"],[4,"ngIf"],[3,"pagination","paginate",4,"ngIf"],["convoy-card","","class","py-54px mt-24px",4,"ngIf"],["convoy-modal","","position","right",3,"id","closeModal",4,"ngIf"],[3,"isLoading","deleteText","closeModal","deleteData",4,"ngIf"],["src","/assets/img/angle-arrow-down.svg","alt","arrow down icon",1,"ml-10px","mr-0px","w-14px"],["type","button",3,"click"],["width","10","height","10",1,"fill-primary-100"],[0,"xlink","href","#close-icon"],["convoy-dropdown-option","",1,"py-8px","flex","items-center","justify-between","border-b","border-grey-10","px-10px",3,"ngClass"],["convoy-button","","fill","text",1,"text-12","text-black","w-full","!justify-start",3,"click"],[1,"p-10px","pb-20px","flex","justify-end"],["convoy-dropdown-option","","convoy-button","","size","sm","fill","outline","color","danger",3,"click"],["size","sm","routerLink","./new"],[1,"flex","flex-wrap","gap-24px"],[1,"bg-grey-10","rounded-8px","animate-pulse","w-348px","h-108px"],["convoy-card","","hover","true","class","w-full max-w-[348px] cursor-pointer pt-20px",3,"id","routerLink","queryParams",4,"ngFor","ngForOf"],["convoy-card","","hover","true",1,"w-full","max-w-[348px]","cursor-pointer","pt-20px",3,"id","routerLink","queryParams"],[1,"px-24px","pb-12px","border-b","border-b-grey-10"],[1,"flex","justify-between","items-center"],[1,"text-14","font-medium","overflow-hidden","max-w-[260px]","text-ellipsis","whitespace-nowrap"],["width","18","height","18",1,"fill-grey-60"],[1,"mx-24px","flex","justify-between","items-center"],[1,"mb-24px","mt-12px"],[1,"text-12","font-medium"],[1,"text-12","text-grey-40","pl-8px"],[1,"bg-grey-10","w-2px","min-h-[60px]"],["size","md","className","ml-2px mb-20px mt-12px flex items-center","notificationText","URL has been copied to clipboard",3,"text"],[1,"text-12","ml-8px","font-medium"],[3,"pagination","paginate"],["convoy-card","",1,"py-54px","mt-24px"],["convoy-empty-state","","imgSrc","/assets/img/portal-link-empty-state.png","heading","You currently do not have any portal links","description","Portal Links enable you create customer-facing dashboards for your user endpoints. You can link a portal link to more than one endpoint at a time.","buttonText","Create Portal Link","id","links-empty-state",3,"onAction"],["convoy-modal","","position","right",3,"id","closeModal"],["convoy-modal-header",""],[1,"font-semibold","capitalize"],["convoy-button","","texture","light","size","sm",1,"px-8px","!py-10px",3,"click"],["src","/assets/img/modal-close-icon.svg","alt","close icon"],[1,"p-20px"],["convoy-list-item","","class","!p-0",4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-40px","mr-16px"],["convoy-button","","fill","outline","color","danger","size","sm",3,"click"],["width","18","height","18",1,"ml-8px","fill-danger-100"],[0,"xlink","href","#delete-icon"],["convoy-button","","size","sm",1,"ml-24px",3,"routerLink"],["width","18","height","18",1,"ml-8px","fill-white-100"],[0,"xlink","href","#edit-icon"],["convoy-list-item","",1,"!p-0"],[1,"w-1/2","text-14","text-grey-40","font-medium"],[1,"w-1/2","flex","justify-end"],["convoy-button","","fill","clear",1,"!px-0",3,"click"],["width","20","height","20",1,"fill-grey-60"],[3,"isLoading","deleteText","closeModal","deleteData"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2,"Projects"),t.qZA(),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"use",3),t.qZA(),t._uU(5),t.TgZ(6,"svg",2),t._UZ(7,"use",3),t.qZA(),t.kcU(),t.TgZ(8,"span",4),t._uU(9,"Portal Links"),t.qZA()(),t.TgZ(10,"div",5)(11,"div",6)(12,"h1",7),t._uU(13,"Portal Links"),t.qZA(),t._UZ(14,"convoy-tooltip",8),t.qZA()(),t.TgZ(15,"div",9)(16,"div",6)(17,"div",10)(18,"button",11),t._UZ(19,"img",12),t.TgZ(20,"span",13),t._uU(21,"All Endpoints"),t.qZA(),t.YNc(22,K,1,0,"img",14),t.YNc(23,B,3,0,"button",15),t.qZA(),t.ynx(24,16),t.TgZ(25,"div",17),t._UZ(26,"img",18)(27,"input",19,20),t.qZA(),t.TgZ(29,"ul",21),t.YNc(30,G,3,4,"li",22),t.ALo(31,"async"),t.qZA(),t.YNc(32,H,3,0,"div",23),t.BQk(),t.qZA()(),t.YNc(33,$,2,0,"convoy-button",24),t.qZA(),t.YNc(34,W,7,0,"div",25),t.YNc(35,nt,3,1,"ng-container",26),t.YNc(36,et,1,1,"convoy-pagination",27),t.YNc(37,ot,2,0,"div",28),t.YNc(38,rt,18,4,"div",29),t.YNc(39,at,1,0,"convoy-create-portal-link",26),t.YNc(40,lt,1,2,"app-delete-modal",30)),2&n&&(t.xp6(5),t.hij(" ",null==e.privateService.activeProjectDetails?null:e.privateService.activeProjectDetails.name," "),t.xp6(13),t.Q6J("ngClass",t.VKq(16,st,!!e.linkEndpoint)),t.xp6(4),t.Q6J("ngIf",!e.linkEndpoint),t.xp6(1),t.Q6J("ngIf",e.linkEndpoint),t.xp6(7),t.Q6J("ngForOf",t.lcZ(31,14,e.linksEndpointFilter$)),t.xp6(2),t.Q6J("ngIf",!!e.linkEndpoint),t.xp6(1),t.Q6J("ngIf",!e.isLoadingPortalLinks&&(null==e.portalLinks||null==e.portalLinks.content?null:e.portalLinks.content.length)),t.xp6(1),t.Q6J("ngIf",e.isLoadingPortalLinks),t.xp6(1),t.Q6J("ngIf",!e.isLoadingPortalLinks&&(null==e.portalLinks||null==e.portalLinks.content?null:e.portalLinks.content.length)),t.xp6(1),t.Q6J("ngIf",(null==e.portalLinks||null==e.portalLinks.pagination?null:e.portalLinks.pagination.has_next_page)||(null==e.portalLinks||null==e.portalLinks.pagination?null:e.portalLinks.pagination.has_prev_page)),t.xp6(1),t.Q6J("ngIf",!e.isLoadingPortalLinks&&0===(null==e.portalLinks||null==e.portalLinks.content?null:e.portalLinks.content.length)),t.xp6(1),t.Q6J("ngIf",null==e.activeLink?null:e.activeLink.uid),t.xp6(1),t.Q6J("ngIf",e.showCreatePortalLinkModal||e.showEditPortalLinkModal),t.xp6(1),t.Q6J("ngIf",e.showDeleteModal))},dependencies:[o.ez,o.mk,o.sg,o.O5,o.Ov,v.Bz,v.rH,v.yS,g.u5,h.r,C.J,C.o,y.A,b.s,M,D.G,u.K,I.z,_.zS,_.Rb,Q.K,j.Q]}),i})()}}]);
//# sourceMappingURL=618.6704344836ec3c1b.js.map