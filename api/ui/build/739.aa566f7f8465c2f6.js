"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[739],{3739:(x,c,r)=>{r.r(c),r.d(c,{LoginComponent:()=>T});var g=r(9369),p=r(7073),i=r(6907),f=r(1354),a=r(2187),o=r(4151),v=r(7205),h=r(3755);let y=(()=>{class t{constructor(e){this.http=e}login(e){var n=this;return new Promise(function(){var s=(0,g.Z)(function*(m,d){try{return m(yield n.http.request({url:"/auth/login",body:e,method:"post"}))}catch(u){return d(u)}});return function(m,d){return s.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(h.O))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function w(t,l){1&t&&(o.TgZ(0,"convoy-input-error"),o._uU(1,"Please enter your username"),o.qZA())}function L(t,l){1&t&&(o.TgZ(0,"convoy-input-error"),o._uU(1,"Please enter your password"),o.qZA())}function b(t,l){1&t&&(o.TgZ(0,"span",18),o._uU(1,"Login"),o.qZA())}function Z(t,l){1&t&&o._UZ(0,"img",19)}let T=(()=>{class t{constructor(e,n,s){this.formBuilder=e,this.router=n,this.loginService=s,this.showLoginPassword=!1,this.disableLoginBtn=!1,this.loginForm=this.formBuilder.group({username:["",i.kI.required],password:["",i.kI.required]})}ngOnInit(){}login(){var e=this;return(0,g.Z)(function*(){if(e.loginForm.invalid)return e.loginForm.markAsTouched();e.disableLoginBtn=!0;try{const n=yield e.loginService.login(e.loginForm.value);localStorage.setItem("CONVOY_AUTH",JSON.stringify(n.data)),localStorage.setItem("CONVOY_AUTH_TOKENS",JSON.stringify(n.data.token));const s=localStorage.getItem("CONVOY_LAST_AUTH_LOCATION");s?location.href=s:e.router.navigateByUrl("/")}catch{e.disableLoginBtn=!1}})()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(i.qu),o.Y36(v.F0),o.Y36(y))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],standalone:!0,features:[o.jDz],decls:26,vars:8,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","w-full"],["src","/assets/img/logo.svg","alt","convoy logo",1,"mb-28px","w-130px"],[1,"max-w-[445px]","mx-auto","my-0","p-24px","w-full","bg-white-100","shadow-default","rounded-8px"],[3,"formGroup","ngSubmit"],["convoy-input-field",""],["for","username","convoy-label",""],["type","text","id","username","convoy-input","","autocomplete","username","formControlName","username","placeholder","super@default.com"],[4,"ngIf"],["convoy-label","","for","password"],["convoy-input","","autocomplete","username","formControlName","password","placeholder","super@default.com","id","password",3,"type"],["type","button",1,"bg-transparent","w-18px","h-18px","absolute","top-[55%]","right-16px","border-none","translate-x-0","translate-y-[-50%]",3,"click"],["alt","showLoginPassword ? 'hide password icon' : 'view password icon'",1,"w-full",3,"src"],[1,"flex","items-center","text-12","mb-20px","-mt-18px"],["convoy-button","","fill","link","type","button","size","sm",1,"px-0","ml-6px",3,"click"],["convoy-button","","size","lg",3,"disabled"],["class","text-14",4,"ngIf"],["src","assets/img/button-loader.gif","alt","loader","class","h-18px",4,"ngIf"],["convoy-button","","fill","link","size","sm",1,"mt-12px","w-full",3,"click"],[1,"text-14"],["src","assets/img/button-loader.gif","alt","loader",1,"h-18px"]],template:function(e,n){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"img",1),o.TgZ(2,"section",2)(3,"form",3),o.NdJ("ngSubmit",function(){return n.login()}),o.TgZ(4,"div",4)(5,"label",5),o._uU(6,"Username"),o.qZA(),o._UZ(7,"input",6),o.YNc(8,w,2,0,"convoy-input-error",7),o.qZA(),o.TgZ(9,"div",4)(10,"label",8),o._uU(11,"Password"),o.qZA(),o.TgZ(12,"convoy-password-field"),o._UZ(13,"input",9),o.TgZ(14,"button",10),o.NdJ("click",function(){return n.showLoginPassword=!n.showLoginPassword}),o._UZ(15,"img",11),o.qZA()(),o.YNc(16,L,2,0,"convoy-input-error",7),o.qZA(),o.TgZ(17,"div",12),o._uU(18," Forgot password? "),o.TgZ(19,"button",13),o.NdJ("click",function(){return n.router.navigateByUrl("/forgot-password")}),o._uU(20,"Reset it here"),o.qZA()(),o.TgZ(21,"button",14),o.YNc(22,b,2,0,"span",15),o.YNc(23,Z,1,0,"img",16),o.qZA()(),o.TgZ(24,"button",17),o.NdJ("click",function(){return n.router.navigateByUrl("/signup")}),o._uU(25,"Signup"),o.qZA()()()),2&e&&(o.xp6(3),o.Q6J("formGroup",n.loginForm),o.xp6(5),o.Q6J("ngIf",n.loginForm.controls.username.touched&&n.loginForm.controls.username.invalid),o.xp6(5),o.Q6J("type",n.showLoginPassword?"text":"password"),o.xp6(2),o.Q6J("src",n.showLoginPassword?"/assets/img/password-visible-icon.svg":"/assets/img/password-invisible-icon.svg",o.LSH),o.xp6(1),o.Q6J("ngIf",n.loginForm.controls.password.touched&&n.loginForm.controls.password.invalid),o.xp6(5),o.Q6J("disabled",n.disableLoginBtn),o.xp6(1),o.Q6J("ngIf",!n.disableLoginBtn),o.xp6(1),o.Q6J("ngIf",n.disableLoginBtn))},dependencies:[p.ez,p.O5,i.UX,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,f.r,a.uZ,a.Vd,a._n,a.wo,a.KU]}),t})()}}]);
//# sourceMappingURL=739.aa566f7f8465c2f6.js.map