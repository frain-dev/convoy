"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[109],{109:(U,a,i)=>{i.r(a),i.d(a,{SetupProjectComponent:()=>x});var u=i(9369),s=i(7073),_=i(385),m=i(3117),g=i(1354),f=i(7058),P=i(9847),p=i(7030),b=i(671),l=i(4690),d=i(2379),h=i(4341),e=i(4151),y=i(6440),C=i(4330),v=i(7205),S=i(6377),E=i(7542);function T(r,c){1&r&&e._UZ(0,"convoy-loader")}function D(r,c){1&r&&(e.ynx(0),e.TgZ(1,"h3",23),e._uU(2,"Create your first source"),e.qZA(),e.TgZ(3,"p",16),e._uU(4," A source on Convoy represents your event senders, the providers and services you\u2019ll like to receive events from. On creating a source, you\u2019ll get a unique URL to listen to event into Convoy which can then be routed to any endpoint of choice "),e.qZA(),e.BQk())}function j(r,c){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"convoy-create-source"),e.qZA()),2&r){const t=e.oxw();e.Tol("incoming"===t.projectType?"order-4":"order-10")}}function M(r,c){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24)(2,"div",25)(3,"div")(4,"h2",26),e._uU(5,"Connect Pub/sub as event source"),e.qZA(),e.TgZ(6,"p",27),e._uU(7,"Connect your Google Pub/Sub or AWS SQS to automatically trigger events to endpoints once there is a new message on the queue"),e.qZA()(),e.TgZ(8,"convoy-toggle",28),e.NdJ("onChange",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.connectPubSub=!n.connectPubSub)}),e.qZA()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(8),e.Q6J("isChecked",t.connectPubSub)}}const O=function(r){return{"h-0 invisible":r}};let x=(()=>{class r{constructor(t,o,n,A,Z){this.privateService=t,this.generalService=o,this.router=n,this.route=A,this.subscriptionService=Z,this.activeProjectId=this.route.snapshot.params.id,this.projectType="outgoing",this.automaticSubscription=!0,this.isLoading=!1,this.showLoader=!1,this.connectPubSub=!1}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.privateService.activeProjectDetails?.uid||(t.showLoader=!0,yield t.privateService.getProjectDetails(),t.showLoader=!1),t.privateService.activeProjectDetails?.uid&&(t.projectType=t.privateService.activeProjectDetails?.type)})()}cancel(){this.router.navigateByUrl(this.privateService.activeProjectDetails?.uid?"/projects/"+this.privateService.activeProjectDetails?.uid:"/projects/"+this.activeProjectId)}onProjectOnboardingComplete(){this.generalService.showNotification({message:`${this.privateService.activeProjectDetails?.type} configuration complete`,style:"success",type:"modal"}),this.router.navigateByUrl("/projects/"+this.privateService.activeProjectDetails?.uid)}saveProjectConfig(){var t=this;return(0,u.Z)(function*(){const[o,n]=yield Promise.allSettled([!(!t.createSourceForm||t.createSourceForm?.sourceCreated)&&t.createSourceForm.saveSource(),!t.createEndpointForm.endpointCreated&&t.createEndpointForm.saveEndpoint()]);"incoming"===t.projectType&&"fulfilled"===o.status&&"boolean"!=typeof o.value&&(t.newSource=o.value?.data,t.subscriptionService.subscriptionData={source_id:o.value?.data.uid}),"fulfilled"===n.status&&"boolean"!=typeof n.value&&(t.newEndpoint=n.value?.data,t.subscriptionService.subscriptionData={...t.subscriptionService.subscriptionData,endpoint_id:n.value?.data.uid}),t.automaticSubscription&&(t.subscriptionService.subscriptionData={...t.subscriptionService.subscriptionData,name:`${t.newEndpoint.title}${t.newSource?" \u2192 "+t.newSource.name:""}'s Subscription`}),yield t.createSubscriptionForm.saveSubscription(!0)})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(y.i),e.Y36(C.m),e.Y36(v.F0),e.Y36(v.gz),e.Y36(S.U))},r.\u0275cmp=e.Xpm({type:r,selectors:[["convoy-setup-project"]],viewQuery:function(t,o){if(1&t&&(e.Gf(l.q,5),e.Gf(p.G,5),e.Gf(d.M,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.createSourceForm=n.first),e.iGM(n=e.CRH())&&(o.createEndpointForm=n.first),e.iGM(n=e.CRH())&&(o.createSubscriptionForm=n.first)}},standalone:!0,features:[e.jDz],decls:32,vars:11,consts:[["convoy-modal","","position","full",3,"id","closeModal"],["convoy-modal-header","","fullscreen","true"],[1,"flex","items-center"],["convoy-button","","size","sm","texture","light",1,"px-10px","!py-10px",3,"click"],["src","/assets/img/modal-close-icon.svg","alt","close icon",1,"w-12px"],[1,"font-semibold","capitalize","ml-2"],[1,"max-w-[834px]","m-auto","pb-60px","flex","flex-col"],[4,"ngIf"],[3,"class",4,"ngIf"],[1,"font-semibold","mt-40px","order-5"],[1,"text-14","text-grey-60","mt-6px","max-w-[634px]","order-6"],[1,"mb-40px","order-7"],[1,"border-t","border-grey-20","my-24px"],["label","Automatically subscribe endpoint to all events sent?","name","automaticSubscription",3,"isChecked","onChange"],[1,"order-8",3,"ngClass"],[1,"font-semibold"],[1,"text-14","text-grey-60","mt-6px","max-w-[634px]"],[3,"onAction"],[1,"flex","justify-end","order-11","mt-32px"],["convoy-button","","fill","outline","type","button",1,"mr-16px","transition-all","duration-300","hover:text-danger-100","hover:border-danger-100",3,"click"],["convoy-button","",3,"disabled","click"],["width","24","height","24",1,"ml-8px","fill-white-100"],[0,"xlink","href","#arrow-right-icon"],[1,"font-semibold","mt-40px"],["convoy-card","",1,"p-24px","mb-40px","order-9"],[1,"flex","justify-between"],[1,"font-semibold","mb-8px"],[1,"text-grey-60","text-12","mt-6px","max-w-[348px]"],["name","connectPubSub",3,"isChecked","onChange"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("closeModal",function(){return o.cancel()}),e.TgZ(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return o.cancel()}),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"h2",5),e._uU(6),e.qZA()()(),e.TgZ(7,"div",6),e.YNc(8,T,1,0,"convoy-loader",7),e.YNc(9,D,5,0,"ng-container",7),e.YNc(10,j,2,2,"div",8),e.TgZ(11,"h3",9),e._uU(12,"Create your first endpoint"),e.qZA(),e.TgZ(13,"p",10),e._uU(14,"HTTP Endpoint is the destination of events from your sources. Create an endpoint to receive events from your configured sources, including through Convoy API."),e.qZA(),e.TgZ(15,"convoy-create-endpoint",11),e._UZ(16,"hr",12),e.TgZ(17,"convoy-toggle",13),e.NdJ("onChange",function(){return o.automaticSubscription=!o.automaticSubscription}),e.qZA()(),e.TgZ(18,"div",14)(19,"h3",15),e._uU(20,"Create your first subscription"),e.qZA(),e.TgZ(21,"p",16),e._uU(22,"Subscriptions enable you to subscribe endpoints to events from any source, with extra configurations like event filters and retry logic"),e.qZA(),e.TgZ(23,"convoy-create-subscription",17),e.NdJ("onAction",function(){return o.onProjectOnboardingComplete()}),e.qZA()(),e.YNc(24,M,9,1,"ng-container",7),e.TgZ(25,"div",18)(26,"button",19),e.NdJ("click",function(){return o.cancel()}),e._uU(27,"Cancel"),e.qZA(),e.TgZ(28,"button",20),e.NdJ("click",function(){return o.saveProjectConfig()}),e._uU(29," Save and Proceed "),e.O4$(),e.TgZ(30,"svg",21),e._UZ(31,"use",22),e.qZA()()()()()),2&t&&(e.Q6J("id","configureProjectForm"),e.xp6(6),e.Oqu("outgoing"===o.projectType?"Configure Outgoing Project":"Configure Incoming Project"),e.xp6(2),e.Q6J("ngIf",o.showLoader),e.xp6(1),e.Q6J("ngIf","incoming"===o.projectType),e.xp6(1),e.Q6J("ngIf","incoming"===o.projectType||o.connectPubSub),e.xp6(7),e.Q6J("isChecked",o.automaticSubscription),e.xp6(1),e.Q6J("ngClass",e.VKq(9,O,o.automaticSubscription)),e.xp6(6),e.Q6J("ngIf","outgoing"===(null==o.privateService.activeProjectDetails?null:o.privateService.activeProjectDetails.type)),e.xp6(4),e.Q6J("disabled",o.isLoading))},dependencies:[s.ez,s.mk,s.O5,_.zS,_.Rb,m.A,g.r,f.P,l.q,P.A,d.M,p.G,b.n,h.q,E.R]}),r})()}}]);
//# sourceMappingURL=109.7c06e268a5ea8801.js.map