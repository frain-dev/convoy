"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[719],{4938:(m,g,c)=>{c.d(g,{I:()=>s});var a=c(4151);let s=(()=>{class d{constructor(){this.position="right",this.size="md",this.show=!1,this.sizes={sm:"w-[140px]",md:"w-[200px]",lg:"w-[249px]",xl:"w-[350px]",full:"w-full"}}ngOnInit(){}get classes(){return`${this.sizes[this.size]} ${{right:"right-[5%]",left:"left-[5%]",center:"left-0"}[this.position]} ${this.show?"opacity-100 h-fit overflow-y-auto pointer-events-auto":"opacity-0 h-0 overflow-hidden pointer-events-none"} ${this.class}`}}return d.\u0275fac=function(p){return new(p||d)},d.\u0275dir=a.lG2({type:d,selectors:[["","convoy-dropdown-container",""]],hostAttrs:[1,"absolute","top-[110%]","w-full","bg-white-100","border","border-grey-10","rounded-12px","shadow-default","z-10","transition-all","ease-in-out","duration-300","h-fit","max-h-[440px]"],hostVars:2,hostBindings:function(p,f){2&p&&a.Tol(f.classes)},inputs:{position:"position",size:"size",show:"show",class:["className","class"]},standalone:!0}),d})()},7888:(m,g,c)=>{c.d(g,{J:()=>i,o:()=>r});var a=c(7073),s=c(4151),d=c(4938),l=c(9119);const p=["dropdownTriggerContainer"],f=["dropdownContainer"];function h(n,o){if(1&n){const t=s.EpF();s.TgZ(0,"div",6),s.NdJ("click",function(_){s.CHM(t);const y=s.oxw();return _.stopPropagation(),s.KtG(y.show=!1)}),s.qZA()}}const v=[[["","dropdownTrigger",""]],[["","dropdownOptions",""]]],e=["[dropdownTrigger]","[dropdownOptions]"];let r=(()=>{class n{constructor(t){this.onSelect=new s.vpe,this.value=void 0,this.parent=t}onSelectOption(){this.onSelect.emit(),this.parent.show=!1,this.parent.onSelect.emit(this.value)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(i,1))},n.\u0275dir=s.lG2({type:n,selectors:[["","convoy-dropdown-option",""],["","convoy-dropdown-close",""]],hostBindings:function(t,u){1&t&&s.NdJ("click",function(){return u.onSelectOption()})},inputs:{value:"value"},outputs:{onSelect:"onSelect"},standalone:!0}),n})(),i=(()=>{class n{constructor(){this.position="right",this.size="md",this.onSelect=new s.vpe,this.show=!1}ngOnInit(){this.dropdownTriggerContainer.nativeElement.children[0].addEventListener("click",()=>this.show=!this.show)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["convoy-dropdown"],["","convoy-dropdown",""]],viewQuery:function(t,u){if(1&t&&(s.Gf(p,7),s.Gf(f,7)),2&t){let _;s.iGM(_=s.CRH())&&(u.dropdownTriggerContainer=_.first),s.iGM(_=s.CRH())&&(u.dropdownOptions=_.first)}},inputs:{position:"position",size:"size"},outputs:{onSelect:"onSelect"},standalone:!0,features:[s.jDz],ngContentSelectors:e,decls:8,vars:4,consts:[["convoyOverlay","",3,"click",4,"ngIf"],[1,"relative"],[1,"empty:hidden"],["dropdownTriggerContainer",""],["convoy-dropdown-container","",3,"position","show","size"],["dropdownContainer",""],["convoyOverlay","",3,"click"]],template:function(t,u){1&t&&(s.F$t(v),s.YNc(0,h,1,0,"div",0),s.TgZ(1,"div",1)(2,"div",2,3),s.Hsn(4),s.qZA(),s.TgZ(5,"div",4,5),s.Hsn(7,1),s.qZA()()),2&t&&(s.Q6J("ngIf",u.show),s.xp6(5),s.Q6J("position",u.position)("show",u.show)("size",u.size))},dependencies:[a.ez,a.O5,d.I,l.F]}),n})()},7542:(m,g,c)=>{c.d(g,{R:()=>l});var a=c(4151),s=c(7073);const d=function(p){return{"opacity-50":p}};let l=(()=>{class p{constructor(){this.isTransparent=!1,this.position="absolute"}ngOnInit(){}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275cmp=a.Xpm({type:p,selectors:[["convoy-loader"]],inputs:{isTransparent:"isTransparent",position:"position"},decls:2,vars:5,consts:[[3,"ngClass"],["src","/assets/img/page-loader.gif","alt","loader",1,"w-150px"]],template:function(h,v){1&h&&(a.TgZ(0,"div",0),a._UZ(1,"img",1),a.qZA()),2&h&&(a.Tol(v.position+" left-0 right-0 top-0 bottom-0 flex items-center justify-center bg-gradient-radial rounded-8px h-full z-[1]"),a.Q6J("ngClass",a.VKq(3,d,v.isTransparent)))},dependencies:[s.mk]}),p})()},4341:(m,g,c)=>{c.d(g,{q:()=>d});var a=c(7073),s=c(4151);let d=(()=>{class l{}return l.\u0275fac=function(f){return new(f||l)},l.\u0275mod=s.oAB({type:l}),l.\u0275inj=s.cJS({imports:[a.ez]}),l})()},6440:(m,g,c)=>{c.d(g,{i:()=>f});var a=c(9369),s=c(4151),d=c(3755),l=c(7205),p=c(7590);let f=(()=>{class h{constructor(e,r,i){this.http=e,this.router=r,this.projectService=i,this.projects=[],this.showCreateOrgModal=!1}getOrganisation(){let e=localStorage.getItem("CONVOY_ORG");return e?JSON.parse(e):null}urlFactory(e){const r=this.getOrganisation().uid;switch(e){case"org":return`/organisations/${r}`;case"org_project":return`/organisations/${r}/projects/${this.activeProjectDetails?.uid}`;default:return""}}getConfiguration(){var e=this;return new Promise(function(){var r=(0,a.Z)(function*(i,n){if(e.configutation)return i(e.configutation);try{const o=yield e.http.request({url:"/configuration",method:"get"});return e.configutation=o,i(o)}catch(o){return n(o)}});return function(i,n){return r.apply(this,arguments)}}())}deleteSubscription(e){var r=this;return new Promise(function(){var i=(0,a.Z)(function*(n,o){try{return n(yield r.http.request({url:`/subscriptions/${e}`,method:"delete",level:"org_project"}))}catch(t){return o(t)}});return function(n,o){return i.apply(this,arguments)}}())}getSubscriptions(e){var r=this;return new Promise(function(){var i=(0,a.Z)(function*(n,o){try{return e||(e={next_page_cursor:String(Number.MAX_SAFE_INTEGER),direction:"next"}),n(yield r.http.request({url:"/subscriptions",method:"get",level:"org_project",query:e}))}catch(t){return o(t)}});return function(n,o){return i.apply(this,arguments)}}())}getProjectDetails(e){var r=this;const i=this.router.url.split("/")[2];return new Promise(function(){var n=(0,a.Z)(function*(o,t){if(r.projectDetails&&!e?.refresh)return o(r.projectDetails);try{const u=yield r.http.request({url:`/projects/${e?.projectId||r.activeProjectDetails?.uid||i}`,method:"get",level:"org"});return r.activeProjectDetails=u.data,r.projectService.activeProjectDetails=u.data,r.projectDetails=u,o(u)}catch(u){return t(u)}});return function(o,t){return n.apply(this,arguments)}}())}organisationConfig(e){var r=this;return(0,a.Z)(function*(){if(!e||e&&0==e?.length)return;const i=localStorage.getItem("CONVOY_ORG");if(!i||"undefined"===i)return;const n=JSON.parse(i),o=e.find(t=>t.uid===n?.uid);if(o)return localStorage.setItem("CONVOY_ORG",JSON.stringify(o));r.organisationDetails=e[0],localStorage.setItem("CONVOY_ORG",JSON.stringify(e[0]))})()}getOrganizations(e){var r=this;return new Promise(function(){var i=(0,a.Z)(function*(n,o){if(r.organisations&&!e?.refresh)return n(r.organisations);try{const t=yield r.http.request({url:"/organisations",method:"get"});return yield r.organisationConfig(t.data?.content),r.organisations=t,t.data.content.length?n(t):r.router.navigateByUrl("/get-started")}catch(t){return o(t)}});return function(n,o){return i.apply(this,arguments)}}())}logout(){var e=this;return new Promise(function(){var r=(0,a.Z)(function*(i,n){try{return i(yield e.http.request({url:"/auth/logout",method:"post",body:null}))}catch(o){return n(o)}});return function(i,n){return r.apply(this,arguments)}}())}addOrganisation(e){var r=this;return new Promise(function(){var i=(0,a.Z)(function*(n,o){try{return n(yield r.http.request({url:"/organisations",method:"post",body:e}))}catch(t){return o(t)}});return function(n,o){return i.apply(this,arguments)}}())}getProjects(){var e=this;return new Promise(function(){var r=(0,a.Z)(function*(i,n){try{const o=yield e.http.request({url:"/projects",method:"get",level:"org"});return e.projects=o.data,i(o)}catch(o){return n(o)}});return function(i,n){return r.apply(this,arguments)}}())}flipt(){var e=this;let r;if(this.organisationDetails?.uid)r=this.organisationDetails?.uid;else{const i=localStorage.getItem("CONVOY_ORG");i&&(r=JSON.parse(i).uid)}return new Promise(function(){var i=(0,a.Z)(function*(n,o){const u=[];["can_create_cli_api_key"].forEach(_=>u.push({flagKey:_,entityId:_,context:{group_id:e.activeProjectDetails?.uid||"",organisation_id:r}}));try{const _=yield e.http.request({url:"/flags",method:"post",body:{requests:u},hideNotification:!0,isOut:!0});return e.apiFlagResponse=_,n(_)}catch(_){return o(_)}});return function(n,o){return i.apply(this,arguments)}}())}getFlag(e){var r=this;return(0,a.Z)(function*(){try{return r.apiFlagResponse||(yield r.flipt()),!!r.apiFlagResponse?.responses.find(n=>n.flagKey===e)?.match}catch{return!1}})()}getUserDetails(e){var r=this;return new Promise(function(){var i=(0,a.Z)(function*(n,o){if(r.profileDetails&&!e.refresh)return n(r.profileDetails);try{const t=yield r.http.request({url:`/users/${e.userId}/profile`,method:"get"});return r.profileDetails=t,n(t)}catch(t){return o(t)}});return function(n,o){return i.apply(this,arguments)}}())}getEndpoints(e){var r=this;return new Promise(function(){var i=(0,a.Z)(function*(n,o){try{return!e?.next_page_cursor&&!e?.prev_page_cursor&&(e={next_page_cursor:String(Number.MAX_SAFE_INTEGER),direction:"next",q:e?.q}),n(yield r.http.request({url:"/endpoints",method:"get",query:e,level:"org_project"}))}catch(t){return o(t)}});return function(n,o){return i.apply(this,arguments)}}())}getSources(e){var r=this;return new Promise(function(){var i=(0,a.Z)(function*(n,o){try{return e||(e={next_page_cursor:String(Number.MAX_SAFE_INTEGER),direction:"next"}),n(yield r.http.request({url:"/sources",method:"get",level:"org_project",query:e}))}catch(t){return o(t)}});return function(n,o){return i.apply(this,arguments)}}())}getRefreshToken(){var e=this;return(0,a.Z)(function*(){let r=localStorage.CONVOY_AUTH_TOKENS;return r=!!r&&JSON.parse(r),new Promise(function(){var i=(0,a.Z)(function*(n,o){if(!r)return o();try{const t=yield e.http.request({url:"/auth/token/refresh",method:"post",body:r});return localStorage.setItem("CONVOY_AUTH_TOKENS",JSON.stringify(t.data)),n(t)}catch(t){o(t)}});return function(n,o){return i.apply(this,arguments)}}())})()}getProjectStat(e){var r=this;return new Promise(function(){var i=(0,a.Z)(function*(n,o){if(r.projectStats&&!e?.refresh)return n(r.projectStats);try{const t=yield r.http.request({url:"/stats",method:"get",level:"org_project"});return r.projectStats=t,n(t)}catch(t){return o(t)}});return function(n,o){return i.apply(this,arguments)}}())}}return h.\u0275fac=function(e){return new(e||h)(s.LFG(d.O),s.LFG(l.F0),s.LFG(p.Y))},h.\u0275prov=s.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);
//# sourceMappingURL=719.dbb0dbf264ed616b.js.map