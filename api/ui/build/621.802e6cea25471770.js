"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[621],{7621:(q,f,a)=>{a.r(f),a.d(f,{SignupComponent:()=>N});var m=a(9369),d=a(7073),i=a(6907),y=a(1354),c=a(2187),e=a(4151),_=a(3755);let h=(()=>{class n{constructor(o){this.http=o}signup(o){var t=this;return new Promise(function(){var l=(0,m.Z)(function*(s,r){try{return s(yield t.http.request({url:"/auth/register",body:o,method:"post"}))}catch(p){return r(p)}});return function(s,r){return l.apply(this,arguments)}}())}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.O))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z=a(7205),S=a(1172),v=a.n(S);let b=(()=>{class n{constructor(){}sendWelcomeEmail(o){return(0,m.Z)(function*(){return new Promise(function(){var t=(0,m.Z)(function*(l,s){try{const r=v().create(),{data:p}=yield r.get(`https://faas-fra1-afec6ce7.doserverless.co/api/v1/web/fn-8f44e6aa-e5d6-4e31-b781-5080c050bb37/welcome-user/welcome-mail?email=${o.email}&firstname=${o.firstname}&lastname=${o.lastname}`);l(p)}catch(r){return v().isAxiosError(r)?(console.log("hubspot error message: ",r.message),s(r.message)):(console.log("hubspot unexpected error: ",r),s("An hubspot unexpected error occurred"))}});return function(l,s){return t.apply(this,arguments)}}())})()}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function T(n,u){1&n&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Please enter your business name"),e.qZA())}function w(n,u){1&n&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Please enter your email"),e.qZA())}function x(n,u){1&n&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Please enter your first name"),e.qZA())}function F(n,u){1&n&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Please enter your last name"),e.qZA())}function C(n,u){1&n&&(e.TgZ(0,"convoy-input-error"),e._uU(1,"Password is required"),e.qZA())}function U(n,u){1&n&&(e.TgZ(0,"span",19),e._uU(1,"Signup"),e.qZA())}function A(n,u){1&n&&e._UZ(0,"img",20)}let N=(()=>{class n{constructor(o,t,l,s){this.formBuilder=o,this.signupService=t,this.router=l,this.hubspotService=s,this.showSignupPassword=!1,this.disableSignupBtn=!1,this.signupForm=this.formBuilder.group({email:["",i.kI.required],first_name:["",i.kI.required],last_name:["",i.kI.required],password:["",i.kI.required],org_name:["",i.kI.required]})}ngOnInit(){}signup(){var o=this;return(0,m.Z)(function*(){if(o.signupForm.invalid)return o.signupForm.markAsTouched();o.disableSignupBtn=!0;try{const t=yield o.signupService.signup(o.signupForm.value);localStorage.setItem("CONVOY_AUTH",JSON.stringify(t.data)),localStorage.setItem("CONVOY_AUTH_TOKENS",JSON.stringify(t.data.token)),"dashboard.getconvoy.io"===window.location.hostname&&(yield o.hubspotService.sendWelcomeEmail({email:o.signupForm.value.email,firstname:o.signupForm.value.first_name,lastname:o.signupForm.value.last_name})),o.router.navigateByUrl("/"),o.disableSignupBtn=!1}catch{o.disableSignupBtn=!1}})()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(i.qu),e.Y36(h),e.Y36(Z.F0),e.Y36(b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["convoy-signup"]],standalone:!0,features:[e.jDz],decls:34,vars:9,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","w-full"],["src","/assets/img/logo.svg","alt","convoy logo",1,"mb-28px","w-130px"],[1,"max-w-[445px]","mx-auto","my-0","p-24px","w-full","bg-white-100","shadow-default","rounded-8px"],[1,"flex","flex-wrap","justify-between",3,"formGroup","ngSubmit"],["for","org_name","convoy-label","","required","true"],["id","org_name","convoy-input","","autocomplete","org_name","formControlName","org_name","placeholder","Convoy"],[4,"ngIf"],["for","email","convoy-label","","required","true"],["type","email","id","email","convoy-input","","autocomplete","email","formControlName","email","placeholder","super@default.com"],["for","first_name","convoy-label","","required","true"],["id","first_name","convoy-input","","autocomplete","first_name","formControlName","first_name","placeholder","John"],["for","last_name","convoy-label","","required","true"],["id","last_name","convoy-input","","autocomplete","last_name","formControlName","last_name","placeholder","Doe"],["for","new-password","convoy-label","","required","true"],["type","password","id","new-password","convoy-input","","autocomplete","new-password","formControlName","password"],["convoy-button","","size","lg",1,"w-full",3,"disabled"],["class","text-14",4,"ngIf"],["src","assets/img/button-loader.gif","alt","loader","class","h-18px",4,"ngIf"],["convoy-button","","fill","link","size","sm",1,"mt-34px","w-full",3,"click"],[1,"text-14"],["src","assets/img/button-loader.gif","alt","loader",1,"h-18px"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"section",2)(3,"form",3),e.NdJ("ngSubmit",function(){return t.signup()}),e.TgZ(4,"convoy-input-field")(5,"label",4),e._uU(6,"Business Name"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,T,2,0,"convoy-input-error",6),e.qZA(),e.TgZ(9,"convoy-input-field")(10,"label",7),e._uU(11,"Email"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,w,2,0,"convoy-input-error",6),e.qZA(),e.TgZ(14,"convoy-input-field")(15,"label",9),e._uU(16,"First Name"),e.qZA(),e._UZ(17,"input",10),e.YNc(18,x,2,0,"convoy-input-error",6),e.qZA(),e.TgZ(19,"convoy-input-field")(20,"label",11),e._uU(21,"Last Name"),e.qZA(),e._UZ(22,"input",12),e.YNc(23,F,2,0,"convoy-input-error",6),e.qZA(),e.TgZ(24,"convoy-input-field")(25,"label",13),e._uU(26,"Password"),e.qZA(),e._UZ(27,"input",14),e.YNc(28,C,2,0,"convoy-input-error",6),e.qZA(),e.TgZ(29,"button",15),e.YNc(30,U,2,0,"span",16),e.YNc(31,A,1,0,"img",17),e.qZA()()(),e.TgZ(32,"button",18),e.NdJ("click",function(){return t.router.navigateByUrl("/login")}),e._uU(33,"Log in if you already have an account"),e.qZA()()),2&o){let l,s,r,p,g;e.xp6(3),e.Q6J("formGroup",t.signupForm),e.xp6(5),e.Q6J("ngIf",(null==(l=t.signupForm.get("org_name"))?null:l.touched)&&(null==(l=t.signupForm.get("org_name"))?null:l.invalid)),e.xp6(5),e.Q6J("ngIf",(null==(s=t.signupForm.get("email"))?null:s.touched)&&(null==(s=t.signupForm.get("email"))?null:s.invalid)),e.xp6(5),e.Q6J("ngIf",(null==(r=t.signupForm.get("first_name"))?null:r.touched)&&(null==(r=t.signupForm.get("first_name"))?null:r.invalid)),e.xp6(5),e.Q6J("ngIf",(null==(p=t.signupForm.get("last_name"))?null:p.touched)&&(null==(p=t.signupForm.get("last_name"))?null:p.invalid)),e.xp6(5),e.Q6J("ngIf",(null==(g=t.signupForm.get("password"))?null:g.touched)&&(null==(g=t.signupForm.get("password"))?null:g.invalid)),e.xp6(1),e.Q6J("disabled",t.disableSignupBtn),e.xp6(1),e.Q6J("ngIf",!t.disableSignupBtn),e.xp6(1),e.Q6J("ngIf",t.disableSignupBtn)}},dependencies:[d.ez,d.O5,i.UX,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y.r,c.wo,c.Vd,c._n,c.uZ]}),n})()}}]);
//# sourceMappingURL=621.802e6cea25471770.js.map