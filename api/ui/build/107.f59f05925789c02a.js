"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[107],{5107:(_,d,r)=>{r.r(d),r.d(d,{ForgotPasswordComponent:()=>Z});var g=r(9369),m=r(7073),s=r(6907),f=r(1354),l=r(2187),o=r(4151),w=r(3755);let v=(()=>{class e{constructor(t){this.http=t}forgotPassword(t){var n=this;return new Promise(function(){var a=(0,g.Z)(function*(c,p){try{return c(yield n.http.request({url:"/users/forgot-password",body:t,method:"post"}))}catch(u){return p(u)}});return function(c,p){return a.apply(this,arguments)}}())}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(w.O))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=r(4330),y=r(7205);function h(e,i){1&e&&(o.TgZ(0,"convoy-input-error"),o._uU(1,"Please enter a valid email"),o.qZA())}function P(e,i){if(1&e){const t=o.EpF();o.ynx(0),o._UZ(1,"img",2),o.TgZ(2,"h2",3),o._uU(3,"Forgot your password? \u{1f510}"),o.qZA(),o.TgZ(4,"p",4),o._uU(5,"Enter your email address and we\u2019ll email you a link to reset your password."),o.qZA(),o.TgZ(6,"section",5)(7,"form",6),o.NdJ("ngSubmit",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.resetPassword())}),o.TgZ(8,"convoy-input-field")(9,"label",7),o._uU(10,"Email Address"),o.qZA(),o._UZ(11,"input",8),o.YNc(12,h,2,0,"convoy-input-error",1),o.qZA(),o.TgZ(13,"button",9),o._uU(14),o.qZA()()(),o.BQk()}if(2&e){const t=o.oxw();let n;o.xp6(7),o.Q6J("formGroup",t.forgotPasswordForm),o.xp6(5),o.Q6J("ngIf",(null==(n=t.forgotPasswordForm.get("email"))?null:n.touched)&&(null==(n=t.forgotPasswordForm.get("email"))?null:n.invalid)),o.xp6(1),o.Q6J("disabled",t.loading),o.xp6(1),o.hij(" ",t.loading?"Sending...":"Send Link"," ")}}function F(e,i){if(1&e){const t=o.EpF();o.ynx(0),o._UZ(1,"img",10)(2,"img",11),o.TgZ(3,"h2",3),o._uU(4,"We sent you a password reset link, \u{1f4ec} \u{1f510}"),o.qZA(),o.TgZ(5,"p",4),o._uU(6,"A password reset link has been sent to your email, follow the link in your email to change your password"),o.qZA(),o.TgZ(7,"button",12),o.NdJ("click",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.resetPassword())}),o._uU(8),o.qZA(),o.TgZ(9,"button",13),o.NdJ("click",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.router.navigateByUrl("/login"))}),o._uU(10,"Go to login"),o.qZA(),o.BQk()}if(2&e){const t=o.oxw();o.xp6(7),o.Q6J("disabled",t.loading),o.xp6(1),o.hij(" ",t.loading?"Sending...":"Resend Reset Link"," ")}}let Z=(()=>{class e{constructor(t,n,a,c){this.formBuilder=t,this.forgotPasswordService=n,this.generalService=a,this.router=c,this.forgotPasswordForm=this.formBuilder.group({email:["",s.kI.compose([s.kI.required,s.kI.email])]}),this.activeState="resetPassword",this.loading=!1}ngOnInit(){}resetPassword(){var t=this;return(0,g.Z)(function*(){if(t.forgotPasswordForm.invalid)Object.values(t.forgotPasswordForm.controls).forEach(n=>{n?.markAsTouched()});else{t.loading=!0;try{const n=yield t.forgotPasswordService.forgotPassword(t.forgotPasswordForm.value);t.generalService.showNotification({style:"success",message:n.message}),t.activeState="instructionSent",t.loading=!1}catch{t.loading=!1}}})()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(s.qu),o.Y36(v),o.Y36(x.m),o.Y36(y.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-forgot-password"]],standalone:!0,features:[o.jDz],decls:3,vars:2,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","w-full"],[4,"ngIf"],["src","/assets/img/logo.svg","alt","convoy logo",1,"mb-28px","w-130px"],[1,"font-semibold","text-20","mb-10px"],[1,"text-grey-40","text-center","text-16px","max-w-[445px]","mb-32px"],[1,"max-w-[445px]","mx-auto","my-0","px-24px","py-24px","w-full","bg-white-100","shadow-default","rounded-8px"],[3,"formGroup","ngSubmit"],["for","email","convoy-label","","required","true"],["type","email","id","email","convoy-input","","autocomplete","email","formControlName","email","placeholder","super@default.com"],["convoy-button","","size","lg",3,"disabled"],["src","/assets/img/logo.svg","alt","convoy logo",1,"mb-40px","w-130px"],["src","/assets/img/forgot-password.svg","alt","forgot password",1,"mb-40px"],["convoy-button","","fill","outline",1,"w-[450px]","mb-20px",3,"disabled","click"],["convoy-button","","fill","link","size","sm",3,"click"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.YNc(1,P,15,4,"ng-container",1),o.YNc(2,F,11,2,"ng-container",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf","resetPassword"==n.activeState),o.xp6(1),o.Q6J("ngIf","instructionSent"==n.activeState))},dependencies:[m.ez,m.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,f.r,l.wo,l.Vd,l._n,l.uZ]}),e})()}}]);
//# sourceMappingURL=107.f59f05925789c02a.js.map