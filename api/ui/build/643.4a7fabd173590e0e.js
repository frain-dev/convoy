"use strict";(self.webpackChunkconvoy_ng=self.webpackChunkconvoy_ng||[]).push([[643],{4643:(b,l,t)=>{t.r(l),t.d(l,{ResetPasswordComponent:()=>C});var m=t(9369),w=t(7073),n=t(6907),d=t(7205),f=t(1354),c=t(2187),s=t(4151),v=t(3755);let y=(()=>{class o{constructor(e){this.http=e}resetPassword(e){var r=this;return new Promise(function(){var a=(0,m.Z)(function*(u,g){try{return u(yield r.http.request({url:`/users/reset-password?token=${e.token}`,body:e.body,method:"post"}))}catch(p){return g(p)}});return function(u,g){return a.apply(this,arguments)}}())}}return o.\u0275fac=function(e){return new(e||o)(s.LFG(v.O))},o.\u0275prov=s.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var P=t(4330);function x(o,i){1&o&&(s.TgZ(0,"convoy-input-error"),s._uU(1,"New password is required"),s.qZA())}function h(o,i){1&o&&(s.TgZ(0,"convoy-input-error"),s._uU(1,"Confirm password is required"),s.qZA())}function Z(o,i){if(1&o){const e=s.EpF();s.ynx(0),s._UZ(1,"img",2),s.TgZ(2,"h2",3),s._uU(3,"Set a new password, \u{1f510}"),s.qZA(),s.TgZ(4,"p",4),s._uU(5,"Kindly enter and set up a new password for your account."),s.qZA(),s.TgZ(6,"section",5)(7,"form",6),s.NdJ("ngSubmit",function(){s.CHM(e);const a=s.oxw();return s.KtG(a.resetPassword())}),s.TgZ(8,"convoy-input-field")(9,"label",7),s._uU(10,"New Password"),s.qZA(),s._UZ(11,"input",8),s.YNc(12,x,2,0,"convoy-input-error",1),s.qZA(),s.TgZ(13,"convoy-input-field")(14,"label",9),s._uU(15,"Confirm Password"),s.qZA(),s._UZ(16,"input",10),s.YNc(17,h,2,0,"convoy-input-error",1),s.qZA(),s.TgZ(18,"button",11),s._uU(19,"Change your password"),s.qZA()()(),s.BQk()}if(2&o){const e=s.oxw();let r,a;s.xp6(7),s.Q6J("formGroup",e.resetPasswordForm),s.xp6(5),s.Q6J("ngIf",(null==(r=e.resetPasswordForm.get("password"))?null:r.touched)&&(null==(r=e.resetPasswordForm.get("password"))?null:r.invalid)),s.xp6(5),s.Q6J("ngIf",(null==(a=e.resetPasswordForm.get("password_confirmation"))?null:a.touched)&&(null==(a=e.resetPasswordForm.get("password_confirmation"))?null:a.invalid)),s.xp6(1),s.Q6J("disabled",e.resetingPassword)}}const _=function(){return["/login"]};function T(o,i){1&o&&(s.ynx(0),s._UZ(1,"img",12)(2,"img",13),s.TgZ(3,"h2",3),s._uU(4,"Password reset successful! \u{1f510}"),s.qZA(),s.TgZ(5,"p",4),s._uU(6,"The password for your account has been reset successfully, login to continue using your account."),s.qZA(),s.TgZ(7,"button",14),s._uU(8,"Continue to your workspace"),s.qZA(),s.BQk()),2&o&&(s.xp6(7),s.Q6J("routerLink",s.DdM(1,_)))}let C=(()=>{class o{constructor(e,r,a,u){this.formBuilder=e,this.resetPasswordService=r,this.route=a,this.generalService=u,this.resetPasswordForm=this.formBuilder.group({password:["",n.kI.required],password_confirmation:["",n.kI.required]}),this.showPassword=!1,this.showCofirmPassword=!1,this.resetingPassword=!1,this.activePage="resetPassword"}ngOnInit(){}resetPassword(){var e=this;return(0,m.Z)(function*(){if(e.resetPasswordForm.invalid)return e.resetPasswordForm.markAsTouched();e.resetingPassword=!0;try{const r=yield e.resetPasswordService.resetPassword({token:e.route.snapshot.queryParams["auth-token"],body:e.resetPasswordForm.value});e.resetingPassword=!1,e.generalService.showNotification({style:"success",message:r.message}),e.activePage="success"}catch{e.resetingPassword=!1}})()}}return o.\u0275fac=function(e){return new(e||o)(s.Y36(n.qu),s.Y36(y),s.Y36(d.gz),s.Y36(P.m))},o.\u0275cmp=s.Xpm({type:o,selectors:[["app-reset-password"]],standalone:!0,features:[s.jDz],decls:3,vars:2,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","w-full"],[4,"ngIf"],["src","/assets/img/logo.svg","alt","convoy logo",1,"mb-28px","w-130px"],[1,"font-semibold","text-20","mb-10px"],[1,"text-grey-40","text-center","text-16px","max-w-[445px]","mb-32px"],[1,"max-w-[445px]","mx-auto","my-0","px-24px","py-24px","w-full","bg-white-100","shadow-default","rounded-8px"],[3,"formGroup","ngSubmit"],["for","new-password","convoy-label","","required","true"],["type","password","id","new-password","convoy-input","","autocomplete","new-password","formControlName","password"],["for","password_confirmation","convoy-label","","required","true"],["type","password","id","password_confirmation","convoy-input","","autocomplete","password_confirmation","formControlName","password_confirmation"],["convoy-button","","size","lg",3,"disabled"],["src","/assets/img/logo.svg","alt","convoy logo",1,"mb-40px","w-130px"],["src","/assets/img/password-reset-success-img.svg","alt","password reset success image",1,"mb-40px"],["convoy-button","",1,"w-[450px]","mb-20px",3,"routerLink"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s.YNc(1,Z,20,4,"ng-container",1),s.YNc(2,T,9,2,"ng-container",1),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf","resetPassword"===r.activePage),s.xp6(1),s.Q6J("ngIf","success"===r.activePage))},dependencies:[w.ez,w.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,f.r,c.wo,c.Vd,c._n,c.uZ,d.Bz,d.rH]}),o})()}}]);
//# sourceMappingURL=643.4a7fabd173590e0e.js.map