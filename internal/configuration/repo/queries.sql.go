// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: queries.sql

package repo

import (
	"context"

	"github.com/jackc/pgx/v5/pgconn"
	"github.com/jackc/pgx/v5/pgtype"
)

const createConfiguration = `-- name: CreateConfiguration :exec

INSERT INTO convoy.configurations (
	id,
	is_analytics_enabled,
	is_signup_enabled,
	storage_policy_type,
	on_prem_path,
	s3_prefix,
	s3_bucket,
	s3_access_key,
	s3_secret_key,
	s3_region,
	s3_session_token,
	s3_endpoint,
	retention_policy_policy,
	retention_policy_enabled
) VALUES (
	$1,
	$2,
	$3,
	$4,
	$5,
	$6,
	$7,
	$8,
	$9,
	$10,
	$11,
	$12,
	$13,
	$14
)
`

type CreateConfigurationParams struct {
	ID                     string
	IsAnalyticsEnabled     string
	IsSignupEnabled        bool
	StoragePolicyType      string
	OnPremPath             pgtype.Text
	S3Prefix               pgtype.Text
	S3Bucket               pgtype.Text
	S3AccessKey            pgtype.Text
	S3SecretKey            pgtype.Text
	S3Region               pgtype.Text
	S3SessionToken         pgtype.Text
	S3Endpoint             pgtype.Text
	RetentionPolicyPolicy  string
	RetentionPolicyEnabled bool
}

// Configuration Queries
// SQLc queries for Configuration repository operations
func (q *Queries) CreateConfiguration(ctx context.Context, arg CreateConfigurationParams) error {
	_, err := q.db.Exec(ctx, createConfiguration,
		arg.ID,
		arg.IsAnalyticsEnabled,
		arg.IsSignupEnabled,
		arg.StoragePolicyType,
		arg.OnPremPath,
		arg.S3Prefix,
		arg.S3Bucket,
		arg.S3AccessKey,
		arg.S3SecretKey,
		arg.S3Region,
		arg.S3SessionToken,
		arg.S3Endpoint,
		arg.RetentionPolicyPolicy,
		arg.RetentionPolicyEnabled,
	)
	return err
}

const loadConfiguration = `-- name: LoadConfiguration :one
SELECT
	id,
	is_analytics_enabled,
	is_signup_enabled,
	storage_policy_type,
	on_prem_path,
	s3_prefix,
	s3_bucket,
	s3_access_key,
	s3_secret_key,
	s3_region,
	s3_session_token,
	s3_endpoint,
	retention_policy_policy,
	retention_policy_enabled,
	created_at,
	updated_at,
	deleted_at
FROM convoy.configurations
WHERE deleted_at IS NULL
LIMIT 1
`

type LoadConfigurationRow struct {
	ID                     string
	IsAnalyticsEnabled     string
	IsSignupEnabled        bool
	StoragePolicyType      string
	OnPremPath             pgtype.Text
	S3Prefix               pgtype.Text
	S3Bucket               pgtype.Text
	S3AccessKey            pgtype.Text
	S3SecretKey            pgtype.Text
	S3Region               pgtype.Text
	S3SessionToken         pgtype.Text
	S3Endpoint             pgtype.Text
	RetentionPolicyPolicy  string
	RetentionPolicyEnabled bool
	CreatedAt              pgtype.Timestamptz
	UpdatedAt              pgtype.Timestamptz
	DeletedAt              pgtype.Timestamptz
}

// Loads the single configuration (should only be one row)
func (q *Queries) LoadConfiguration(ctx context.Context) (LoadConfigurationRow, error) {
	row := q.db.QueryRow(ctx, loadConfiguration)
	var i LoadConfigurationRow
	err := row.Scan(
		&i.ID,
		&i.IsAnalyticsEnabled,
		&i.IsSignupEnabled,
		&i.StoragePolicyType,
		&i.OnPremPath,
		&i.S3Prefix,
		&i.S3Bucket,
		&i.S3AccessKey,
		&i.S3SecretKey,
		&i.S3Region,
		&i.S3SessionToken,
		&i.S3Endpoint,
		&i.RetentionPolicyPolicy,
		&i.RetentionPolicyEnabled,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const updateConfiguration = `-- name: UpdateConfiguration :execresult
UPDATE convoy.configurations
SET
	is_analytics_enabled = $1,
	is_signup_enabled = $2,
	storage_policy_type = $3,
	on_prem_path = $4,
	s3_prefix = $5,
	s3_bucket = $6,
	s3_access_key = $7,
	s3_secret_key = $8,
	s3_region = $9,
	s3_session_token = $10,
	s3_endpoint = $11,
	retention_policy_policy = $12,
	retention_policy_enabled = $13,
	updated_at = NOW()
WHERE id = $14 AND deleted_at IS NULL
`

type UpdateConfigurationParams struct {
	IsAnalyticsEnabled     string
	IsSignupEnabled        bool
	StoragePolicyType      string
	OnPremPath             pgtype.Text
	S3Prefix               pgtype.Text
	S3Bucket               pgtype.Text
	S3AccessKey            pgtype.Text
	S3SecretKey            pgtype.Text
	S3Region               pgtype.Text
	S3SessionToken         pgtype.Text
	S3Endpoint             pgtype.Text
	RetentionPolicyPolicy  string
	RetentionPolicyEnabled bool
	ID                     string
}

func (q *Queries) UpdateConfiguration(ctx context.Context, arg UpdateConfigurationParams) (pgconn.CommandTag, error) {
	return q.db.Exec(ctx, updateConfiguration,
		arg.IsAnalyticsEnabled,
		arg.IsSignupEnabled,
		arg.StoragePolicyType,
		arg.OnPremPath,
		arg.S3Prefix,
		arg.S3Bucket,
		arg.S3AccessKey,
		arg.S3SecretKey,
		arg.S3Region,
		arg.S3SessionToken,
		arg.S3Endpoint,
		arg.RetentionPolicyPolicy,
		arg.RetentionPolicyEnabled,
		arg.ID,
	)
}
