// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0

package repo

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

type Querier interface {
	// Count records before the given cursor (for pagination metadata)
	// Uses same filters as FetchAPIKeysPaginated
	//
	// This query counts how many records exist with ID > cursor
	// which tells us how many records are on previous pages
	CountPrevAPIKeys(ctx context.Context, arg CountPrevAPIKeysParams) (pgtype.Int8, error)
	// API Keys Queries
	// Schema: convoy.api_keys
	// Columns: id, name, key_type, mask_id, role_type, role_project, role_endpoint,
	//          hash, salt, user_id, expires_at, created_at, updated_at, deleted_at
	// ============================================================================
	// CREATE Operations
	// ============================================================================
	CreateAPIKey(ctx context.Context, arg CreateAPIKeyParams) error
	// ============================================================================
	// PAGINATED READ Operations
	// ============================================================================
	// Unified pagination query that handles:
	// - Bidirectional pagination (forward with 'next', backward with 'prev')
	// - Multiple optional filters (project_id, endpoint_id, user_id, key_type)
	// - Array filter for endpoint_ids
	// - Soft delete filtering (deleted_at IS NULL)
	//
	// Parameters:
	// @direction: 'next' for forward pagination, 'prev' for backward pagination
	// @cursor: ID of the last item from previous page (empty string for first page)
	// @project_id: Filter by role_project (empty string to skip)
	// @endpoint_id: Filter by single role_endpoint (empty string to skip)
	// @user_id: Filter by user_id (empty string to skip)
	// @key_type: Filter by key_type (empty string to skip)
	// @has_endpoint_ids: true to filter by endpoint_ids array, false to skip
	// @endpoint_ids: Array of endpoint IDs to filter by
	// @limit_val: Number of records to fetch (should be PerPage + 1 for hasNext detection)
	// Final select: reverse order for backward pagination to maintain DESC ordering
	FetchAPIKeysPaginated(ctx context.Context, arg FetchAPIKeysPaginatedParams) ([]FetchAPIKeysPaginatedRow, error)
	FindAPIKeyByHash(ctx context.Context, hash string) (FindAPIKeyByHashRow, error)
	// ============================================================================
	// READ Operations - Single Record
	// ============================================================================
	FindAPIKeyByID(ctx context.Context, id string) (FindAPIKeyByIDRow, error)
	// CRITICAL: Used for API key authentication in NativeRealm
	FindAPIKeyByMaskID(ctx context.Context, maskID string) (FindAPIKeyByMaskIDRow, error)
	FindAPIKeyByProjectID(ctx context.Context, roleProject pgtype.Text) (FindAPIKeyByProjectIDRow, error)
	// ============================================================================
	// DELETE Operations (Soft Delete)
	// ============================================================================
	// Soft delete multiple API keys by setting deleted_at timestamp
	// Uses ANY() for array parameter handling
	RevokeAPIKeys(ctx context.Context, ids []string) error
	// ============================================================================
	// UPDATE Operations
	// ============================================================================
	UpdateAPIKey(ctx context.Context, arg UpdateAPIKeyParams) error
}

var _ Querier = (*Queries)(nil)
